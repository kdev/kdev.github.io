<!DOCTYPE html>
<html lang="en" xml:lang="en">
<head>
<!-- otrs.github.io -->
<link href="https://netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css" rel="stylesheet">
<link href="https://fonts.googleapis.com/css?family=Roboto" rel="stylesheet" type="text/css">
<link rel="stylesheet" href="../../../../../../documentation.css">
<script src="https://code.jquery.com/jquery-1.11.0.min.js"></script>
<script type="text/javascript" src="../../../../../../documentation.js"></script>
<link rel="icon" type="image/png" sizes="32x32" href="../../../../../../../images/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="../../../../../../../images/favicon-16x16.png">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.9.0/styles/default.min.css">
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.9.0/highlight.min.js"></script>
<script>
$(document).ready(function() {

    // Hint languages to prevent false matches (php for example).
    hljs.configure({
        languages: ['perl', 'javascript', 'xml', 'html', 'css', 'json', 'yaml']
    });

    // programlistings in manuals
    $('pre.programlisting').each(function(i, block) {
        hljs.highlightBlock(block);
    });
    // code snippets in Perl API docs
    $('.pod pre').addClass('perl').each(function(i, block) {
        hljs.highlightBlock(block);
    });
});</script>
<!-- otrs.github.io -->

<title>Kernel::System::Ticket &mdash; OTRS 8.0 API Reference Perl</title>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
</head>
<body><div class="box">
  <h1 class="t1">OTRS 8.0 API Reference Perl</h1>
  <table>
    <tr>
      <td class="label">Description</td>
      <td class="cell">manuals and libraries</td>
    </tr>
  </table>
</div>
<div class="path">
  <a href="../../index.html">OTRS 8.0 API Reference Perl</a> &gt; Perl Modules &gt;
  Kernel::System::Ticket
</div>
<div>

</div>

<div class="pod">


<ul id="index">
  <li><a href="#NAME">NAME</a></li>
  <li><a href="#SYNOPSIS">SYNOPSIS</a></li>
  <li><a href="#PUBLIC-INTERFACE">PUBLIC INTERFACE</a>
    <ul>
      <li><a href="#new">new()</a></li>
      <li><a href="#TicketCreateNumber">TicketCreateNumber()</a></li>
      <li><a href="#GetTNByString">GetTNByString()</a></li>
      <li><a href="#TicketCheckNumber">TicketCheckNumber()</a></li>
      <li><a href="#TicketCreate">TicketCreate()</a></li>
      <li><a href="#TicketDelete">TicketDelete()</a></li>
      <li><a href="#TicketIDLookup">TicketIDLookup()</a></li>
      <li><a href="#TicketNumberLookup">TicketNumberLookup()</a></li>
      <li><a href="#TicketSubjectBuild">TicketSubjectBuild()</a></li>
      <li><a href="#TicketSubjectClean">TicketSubjectClean()</a></li>
      <li><a href="#TicketGet">TicketGet()</a></li>
      <li><a href="#TicketTitleUpdate">TicketTitleUpdate()</a></li>
      <li><a href="#TicketUnlockTimeoutUpdate">TicketUnlockTimeoutUpdate()</a></li>
      <li><a href="#TicketQueueID">TicketQueueID()</a></li>
      <li><a href="#TicketMoveList">TicketMoveList()</a></li>
      <li><a href="#TicketQueueSet">TicketQueueSet()</a></li>
      <li><a href="#TicketMoveQueueList">TicketMoveQueueList()</a></li>
      <li><a href="#TicketTypeList">TicketTypeList()</a></li>
      <li><a href="#TicketTypeSet">TicketTypeSet()</a></li>
      <li><a href="#TicketServiceList">TicketServiceList()</a></li>
      <li><a href="#TicketServiceSet">TicketServiceSet()</a></li>
      <li><a href="#TicketEscalationPreferences">TicketEscalationPreferences()</a></li>
      <li><a href="#TicketEscalationDateCalculation">TicketEscalationDateCalculation()</a></li>
      <li><a href="#TicketEscalationIndexBuild">TicketEscalationIndexBuild()</a></li>
      <li><a href="#TicketSLAList">TicketSLAList()</a></li>
      <li><a href="#TicketSLASet">TicketSLASet()</a></li>
      <li><a href="#TicketCustomerSet">TicketCustomerSet()</a></li>
      <li><a href="#TicketPermission">TicketPermission()</a></li>
      <li><a href="#TicketCustomerPermission">TicketCustomerPermission()</a></li>
      <li><a href="#GetSubscribedUserIDsByQueueID">GetSubscribedUserIDsByQueueID()</a></li>
      <li><a href="#GetSubscribedUserIDsByServiceID">GetSubscribedUserIDsByServiceID()</a></li>
      <li><a href="#TicketPendingTimeSet">TicketPendingTimeSet()</a></li>
      <li><a href="#TicketLockGet">TicketLockGet()</a></li>
      <li><a href="#TicketLockSet">TicketLockSet()</a></li>
      <li><a href="#TicketArchiveFlagSet">TicketArchiveFlagSet()</a></li>
      <li><a href="#TicketArchiveFlagGet">TicketArchiveFlagGet()</a></li>
      <li><a href="#TicketStateSet">TicketStateSet()</a></li>
      <li><a href="#TicketStateList">TicketStateList()</a></li>
      <li><a href="#OwnerCheck">OwnerCheck()</a></li>
      <li><a href="#TicketOwnerSet">TicketOwnerSet()</a></li>
      <li><a href="#TicketOwnerList">TicketOwnerList()</a></li>
      <li><a href="#TicketResponsibleSet">TicketResponsibleSet()</a></li>
      <li><a href="#TicketResponsibleList">TicketResponsibleList()</a></li>
      <li><a href="#TicketInvolvedAgentsList">TicketInvolvedAgentsList()</a></li>
      <li><a href="#TicketPrioritySet">TicketPrioritySet()</a></li>
      <li><a href="#TicketPriorityList">TicketPriorityList()</a></li>
      <li><a href="#HistoryTicketStatusGet">HistoryTicketStatusGet()</a></li>
      <li><a href="#HistoryTicketGet">HistoryTicketGet()</a></li>
      <li><a href="#HistoryTypeLookup">HistoryTypeLookup()</a></li>
      <li><a href="#HistoryAdd">HistoryAdd()</a></li>
      <li><a href="#HistoryGet">HistoryGet()</a></li>
      <li><a href="#HistoryDelete">HistoryDelete()</a></li>
      <li><a href="#TicketAccountedTimeGet">TicketAccountedTimeGet()</a></li>
      <li><a href="#TicketAccountTime">TicketAccountTime()</a></li>
      <li><a href="#TicketMerge">TicketMerge()</a></li>
      <li><a href="#TicketMergeDynamicFields">TicketMergeDynamicFields()</a></li>
      <li><a href="#TicketMergeLinkedObjects">TicketMergeLinkedObjects()</a></li>
      <li><a href="#TicketWatchGet">TicketWatchGet()</a></li>
      <li><a href="#TicketWatchSubscribe">TicketWatchSubscribe()</a></li>
      <li><a href="#TicketWatchUnsubscribe">TicketWatchUnsubscribe()</a></li>
      <li><a href="#TicketArticleStorageSwitch">TicketArticleStorageSwitch()</a></li>
      <li><a href="#TicketCheckForProcessType">TicketCheckForProcessType()</a></li>
      <li><a href="#TicketCalendarGet">TicketCalendarGet()</a></li>
      <li><a href="#SearchUnknownTicketCustomers">SearchUnknownTicketCustomers()</a></li>
    </ul>
  </li>
  <li><a href="#PRIVATE-FUNCTIONS">PRIVATE FUNCTIONS</a>
    <ul>
      <li><a href="#TicketCacheClear">_TicketCacheClear()</a></li>
      <li><a href="#TicketGetExtended">_TicketGetExtended()</a></li>
      <li><a href="#TicketGetFirstResponse">_TicketGetFirstResponse()</a></li>
      <li><a href="#TicketGetClosed">_TicketGetClosed()</a></li>
      <li><a href="#TicketGetFirstLock">_TicketGetFirstLock()</a></li>
    </ul>
  </li>
</ul>

<h1 id="NAME">NAME</h1>

<p>Kernel::System::Ticket - Functions to create, modify and delete tickets as well as related helper functions</p>

<h1 id="SYNOPSIS">SYNOPSIS</h1>

<p>Create ticket object</p>

<pre><code>    use Kernel::System::ObjectManager;
    local $Kernel::OM = Kernel::System::ObjectManager-&gt;new();
    my $TicketObject = $Kernel::OM-&gt;Get(&#39;Kernel::System::Ticket&#39;);</code></pre>

<p>Create a new ticket</p>

<pre><code>    my $TicketID = $TicketObject-&gt;TicketCreate(
        Title        =&gt; &#39;Some Ticket Title&#39;,
        Queue        =&gt; &#39;Raw&#39;,
        Lock         =&gt; &#39;unlock&#39;,
        Priority     =&gt; &#39;3 normal&#39;,
        State        =&gt; &#39;new&#39;,
        CustomerID   =&gt; &#39;12345&#39;,
        CustomerUser =&gt; &#39;customer@example.com&#39;,
        OwnerID      =&gt; 1,
        UserID       =&gt; 1,
    );</code></pre>

<p>Lock the ticket</p>

<pre><code>    my $Success = $TicketObject-&gt;TicketLockSet(
        Lock     =&gt; &#39;lock&#39;,
        TicketID =&gt; $TicketID,
        UserID   =&gt; 1,
    );</code></pre>

<p>Update the title</p>

<pre><code>    my $Success = $TicketObject-&gt;TicketTitleUpdate(
        Title    =&gt; &#39;Some Title&#39;,
        TicketID =&gt; $TicketID,
        UserID   =&gt; 1,
    );</code></pre>

<p>Move ticket to another queue</p>

<pre><code>    my $Success = $TicketObject-&gt;TicketQueueSet(
        Queue    =&gt; &#39;Some Queue Name&#39;,
        TicketID =&gt; $TicketID,
        UserID   =&gt; 1,
    );</code></pre>

<p>Set a ticket type</p>

<pre><code>    my $Success = $TicketObject-&gt;TicketTypeSet(
        Type     =&gt; &#39;Incident&#39;,
        TicketID =&gt; $TicketID,
        UserID   =&gt; 1,
    );</code></pre>

<p>Assign another customer</p>

<pre><code>    my $Success = $TicketObject-&gt;TicketCustomerSet(
        No       =&gt; &#39;12345&#39;,
        User     =&gt; &#39;customer@company.org&#39;,
        TicketID =&gt; $TicketID,
        UserID   =&gt; 1,
    );</code></pre>

<p>Update the state</p>

<pre><code>    my $Success = $TicketObject-&gt;TicketStateSet(
        State     =&gt; &#39;pending reminder&#39;,
        TicketID =&gt; $TicketID,
        UserID   =&gt; 1,
    );</code></pre>

<p>Update pending time (only for pending states)</p>

<pre><code>    my $Success = $TicketObject-&gt;TicketPendingTimeSet(
        String   =&gt; &#39;2019-08-14 22:05:00&#39;,
        TicketID =&gt; $TicketID,
        UserID   =&gt; 1,
    );</code></pre>

<p>Set a new priority</p>

<pre><code>    my $Success = $TicketObject-&gt;TicketPrioritySet(
        TicketID =&gt; $TicketID,
        Priority =&gt; &#39;low&#39;,
        UserID   =&gt; 1,
    );</code></pre>

<p>Assign to another agent</p>

<pre><code>    my $Success = $TicketObject-&gt;TicketOwnerSet(
        TicketID  =&gt; $TicketID,
        NewUserID =&gt; 2,
        UserID    =&gt; 1,
    );</code></pre>

<p>Set a responsible</p>

<pre><code>    my $Success = $TicketObject-&gt;TicketResponsibleSet(
        TicketID  =&gt; $TicketID,
        NewUserID =&gt; 3,
        UserID    =&gt; 1,
    );</code></pre>

<p>Add something to the history</p>

<pre><code>    my $Success = $TicketObject-&gt;HistoryAdd(
        Name         =&gt; &#39;Some Comment&#39;,
        HistoryType  =&gt; &#39;Move&#39;,
        TicketID     =&gt; $TicketID,
        CreateUserID =&gt; 1,
    );</code></pre>

<p>Get the complete ticket history</p>

<pre><code>    my @HistoryLines = $TicketObject-&gt;HistoryGet(
        TicketID =&gt; $TicketID,
        UserID   =&gt; 1,
    );</code></pre>

<p>Get current ticket attributes</p>

<pre><code>    my %Ticket = $TicketObject-&gt;TicketGet(
        TicketID      =&gt; $TicketID,
        UserID        =&gt; 1,
    );</code></pre>

<p>Delete the ticket</p>

<pre><code>    my $Success = $TicketObject-&gt;TicketDelete(
        TicketID =&gt; $TicketID,
        UserID   =&gt; 1,
    );</code></pre>

<h1 id="PUBLIC-INTERFACE">PUBLIC INTERFACE</h1>

<h2 id="new">new()</h2>

<p>Don&#39;t use the constructor directly, use the ObjectManager instead:</p>

<pre><code>    my $TicketObject = $Kernel::OM-&gt;Get(&#39;Kernel::System::Ticket&#39;);</code></pre>

<h2 id="TicketCreateNumber">TicketCreateNumber()</h2>

<p>creates a new ticket number</p>

<pre><code>    my $TicketNumber = $TicketObject-&gt;TicketCreateNumber();</code></pre>

<h2 id="GetTNByString">GetTNByString()</h2>

<p>creates a new ticket number</p>

<pre><code>    my $TicketNumber = $TicketObject-&gt;GetTNByString($Subject);</code></pre>

<h2 id="TicketCheckNumber">TicketCheckNumber()</h2>

<p>checks if ticket number exists, returns ticket id if number exists.</p>

<p>returns the merged ticket id if ticket was merged. only into a depth of maximum 10 merges</p>

<pre><code>    my $TicketID = $TicketObject-&gt;TicketCheckNumber(
        Tn =&gt; &#39;200404051004575&#39;,
    );</code></pre>

<h2 id="TicketCreate">TicketCreate()</h2>

<p>creates a new ticket</p>

<pre><code>    my $TicketID = $TicketObject-&gt;TicketCreate(
        Title        =&gt; &#39;Some Ticket Title&#39;,
        Queue        =&gt; &#39;Raw&#39;,            # or QueueID =&gt; 123,
        Lock         =&gt; &#39;unlock&#39;,
        Priority     =&gt; &#39;3 normal&#39;,       # or PriorityID =&gt; 2,
        State        =&gt; &#39;new&#39;,            # or StateID =&gt; 5,
        CustomerID   =&gt; &#39;123465&#39;,
        CustomerUser =&gt; &#39;customer@example.com&#39;,
        OwnerID      =&gt; 123,
        UserID       =&gt; 123,
    );</code></pre>

<p>or</p>

<pre><code>    my $TicketID = $TicketObject-&gt;TicketCreate(
        TN            =&gt; $TicketObject-&gt;TicketCreateNumber(), # optional
        Title         =&gt; &#39;Some Ticket Title&#39;,
        Queue         =&gt; &#39;Raw&#39;,              # or QueueID =&gt; 123,
        Lock          =&gt; &#39;unlock&#39;,
        Priority      =&gt; &#39;3 normal&#39;,         # or PriorityID =&gt; 2,
        State         =&gt; &#39;new&#39;,              # or StateID =&gt; 5,
        Type          =&gt; &#39;Incident&#39;,         # or TypeID = 1 or Ticket type default (Ticket::Type::Default), not required
        Service       =&gt; &#39;Service A&#39;,        # or ServiceID =&gt; 1, not required
        SLA           =&gt; &#39;SLA A&#39;,            # or SLAID =&gt; 1, not required
        CustomerID    =&gt; &#39;123465&#39;,
        CustomerUser  =&gt; &#39;customer@example.com&#39;,
        OwnerID       =&gt; 123,
        ResponsibleID =&gt; 123,                # not required
        ArchiveFlag   =&gt; &#39;y&#39;,                # (y|n) not required
        UserID        =&gt; 123,
    );</code></pre>

<p>Events: TicketCreate</p>

<h2 id="TicketDelete">TicketDelete()</h2>

<p>deletes a ticket with articles from storage</p>

<pre><code>    my $Success = $TicketObject-&gt;TicketDelete(
        TicketID =&gt; 123,
        UserID   =&gt; 123,
    );</code></pre>

<p>Events: TicketDelete</p>

<h2 id="TicketIDLookup">TicketIDLookup()</h2>

<p>ticket id lookup by ticket number</p>

<pre><code>    my $TicketID = $TicketObject-&gt;TicketIDLookup(
        TicketNumber =&gt; &#39;2004040510440485&#39;,
    );</code></pre>

<h2 id="TicketNumberLookup">TicketNumberLookup()</h2>

<p>ticket number lookup by ticket id</p>

<pre><code>    my $TicketNumber = $TicketObject-&gt;TicketNumberLookup(
        TicketID =&gt; 123,
    );</code></pre>

<h2 id="TicketSubjectBuild">TicketSubjectBuild()</h2>

<p>rebuild a new ticket subject</p>

<p>This will generate a subject like <code>RE: [Ticket# 2004040510440485] Some subject</code></p>

<pre><code>    my $NewSubject = $TicketObject-&gt;TicketSubjectBuild(
        TicketNumber =&gt; &#39;2004040510440485&#39;,
        Subject      =&gt; $OldSubject,
        Action       =&gt; &#39;Reply&#39;,
    );</code></pre>

<p>This will generate a subject like <code>[Ticket# 2004040510440485] Some subject</code> (so without RE: )</p>

<pre><code>    my $NewSubject = $TicketObject-&gt;TicketSubjectBuild(
        TicketNumber =&gt; &#39;2004040510440485&#39;,
        Subject      =&gt; $OldSubject,
        Type         =&gt; &#39;New&#39;,
        Action       =&gt; &#39;Reply&#39;,
    );</code></pre>

<p>This will generate a subject like <code>FWD: [Ticket# 2004040510440485] Some subject</code></p>

<pre><code>    my $NewSubject = $TicketObject-&gt;TicketSubjectBuild(
        TicketNumber =&gt; &#39;2004040510440485&#39;,
        Subject      =&gt; $OldSubject,
        Action       =&gt; &#39;Forward&#39;, # Possible values are Reply and Forward, Reply is default.
    );</code></pre>

<p>This will generate a subject like <code>[Ticket# 2004040510440485] Re: Some subject</code> (so without clean-up of subject)</p>

<pre><code>    my $NewSubject = $TicketObject-&gt;TicketSubjectBuild(
        TicketNumber =&gt; &#39;2004040510440485&#39;,
        Subject      =&gt; $OldSubject,
        Type         =&gt; &#39;New&#39;,
        NoCleanup    =&gt; 1,
    );</code></pre>

<h2 id="TicketSubjectClean">TicketSubjectClean()</h2>

<p>strip/clean up a ticket subject</p>

<pre><code>    my $NewSubject = $TicketObject-&gt;TicketSubjectClean(
        TicketNumber =&gt; &#39;2004040510440485&#39;,
        Subject      =&gt; $OldSubject,
        Size         =&gt; $SubjectSizeToBeDisplayed   # optional, if 0 do not cut subject
    );</code></pre>

<h2 id="TicketGet">TicketGet()</h2>

<p>Get ticket info</p>

<pre><code>    my %Ticket = $TicketObject-&gt;TicketGet(
        TicketID      =&gt; 123,
        DynamicFields =&gt; 0,         # Optional, default 0. To include the dynamic field values for this ticket on the return structure.
        UserID        =&gt; 123,
        Silent        =&gt; 0,         # Optional, default 0. To suppress the warning if the ticket does not exist.
    );</code></pre>

<p>Returns:</p>

<pre><code>    %Ticket = (
        TicketNumber       =&gt; &#39;20101027000001&#39;,
        Title              =&gt; &#39;some title&#39;,
        TicketID           =&gt; 123,
        State              =&gt; &#39;some state&#39;,
        StateID            =&gt; 123,
        StateType          =&gt; &#39;some state type&#39;,
        Priority           =&gt; &#39;some priority&#39;,
        PriorityID         =&gt; 123,
        Lock               =&gt; &#39;lock&#39;,
        LockID             =&gt; 123,
        Queue              =&gt; &#39;some queue&#39;,
        QueueID            =&gt; 123,
        CustomerID         =&gt; &#39;customer_id_123&#39;,
        CustomerUserID     =&gt; &#39;customer_user_id_123&#39;,
        Owner              =&gt; &#39;some_owner_login&#39;,
        OwnerID            =&gt; 123,
        Type               =&gt; &#39;some ticket type&#39;,
        TypeID             =&gt; 123,
        SLA                =&gt; &#39;some sla&#39;,
        SLAID              =&gt; 123,
        Service            =&gt; &#39;some service&#39;,
        ServiceID          =&gt; 123,
        Responsible        =&gt; &#39;some_responsible_login&#39;,
        ResponsibleID      =&gt; 123,
        Age                =&gt; 3456,
        Created            =&gt; &#39;2010-10-27 20:15:00&#39;
        CreateBy           =&gt; 123,
        Changed            =&gt; &#39;2010-10-27 20:15:15&#39;,
        ChangeBy           =&gt; 123,
        ArchiveFlag        =&gt; &#39;y&#39;,

        # (pending time values, if a pending time exists)
        RealTillTimeNotUsed              (unix time stamp of pending time)
        UntilTime                        (seconds total till pending, e.g. &quot;3600&quot;)
        UntilTimeDestinationDate         (date of pending time, e.g. &quot;2009-02-14 18:00:00&quot;)


        # If DynamicFields =&gt; 1 was passed, you&#39;ll get an entry like this for each dynamic field:
        DynamicField_X     =&gt; &#39;value_x&#39;,

        # (time stamps of expected escalations)
        EscalationResponseTime           (unix time stamp of response time escalation)
        EscalationUpdateTime             (unix time stamp of update time escalation)
        EscalationSolutionTime           (unix time stamp of solution time escalation)

        # (general escalation info of nearest escalation type)
        EscalationDestinationIn          (escalation in e. g. 1h 4m)
        EscalationDestinationTime        (date of escalation in unix time, e. g. 72193292)
        EscalationDestinationDate        (date of escalation, e. g. &quot;2009-02-14 18:00:00&quot;)
        EscalationTimeWorkingTime        (seconds of working/service time till escalation, e. g. &quot;1800&quot;)
        EscalationTime                   (seconds total till escalation of nearest escalation time type - response, update or solution time, e. g. &quot;3600&quot;)

        # (detailed escalation info about first response, update and solution time)
        FirstResponseTimeEscalation      (if true, ticket is escalated)
        FirstResponseTimeNotification    (if true, notify - x% of escalation has reached)
        FirstResponseTimeDestinationTime (date of escalation in unix time, e. g. 72193292)
        FirstResponseTimeDestinationDate (date of escalation, e. g. &quot;2009-02-14 18:00:00&quot;)
        FirstResponseTimeWorkingTime     (seconds of working/service time till escalation, e. g. &quot;1800&quot;)
        FirstResponseTime                (seconds total till escalation, e. g. &quot;3600&quot;)

        UpdateTimeEscalation             (if true, ticket is escalated)
        UpdateTimeNotification           (if true, notify - x% of escalation has reached)
        UpdateTimeDestinationTime        (date of escalation in unix time, e. g. 72193292)
        UpdateTimeDestinationDate        (date of escalation, e. g. &quot;2009-02-14 18:00:00&quot;)
        UpdateTimeWorkingTime            (seconds of working/service time till escalation, e. g. &quot;1800&quot;)
        UpdateTime                       (seconds total till escalation, e. g. &quot;3600&quot;)

        SolutionTimeEscalation           (if true, ticket is escalated)
        SolutionTimeNotification         (if true, notify - x% of escalation has reached)
        SolutionTimeDestinationTime      (date of escalation in unix time, e. g. 72193292)
        SolutionTimeDestinationDate      (date of escalation, e. g. &quot;2009-02-14 18:00:00&quot;)
        SolutionTimeWorkingTime          (seconds of working/service time till escalation, e. g. &quot;1800&quot;)
        SolutionTime                     (seconds total till escalation, e. g. &quot;3600&quot;)
    );</code></pre>

<p>To get extended ticket attributes, use <code>Extended</code></p>

<pre><code>    my %Ticket = $TicketObject-&gt;TicketGet(
        TicketID =&gt; 123,
        UserID   =&gt; 123,
        Extended =&gt; 1,
    );</code></pre>

<p>Additional parameters are:</p>

<pre><code>    %Ticket = (
        FirstResponse                   (timestamp of first response, first contact with customer)
        FirstResponseInMin              (minutes till first response)
        FirstResponseDiffInMin          (minutes till or over first response)

        SolutionInMin                   (minutes till solution time)
        SolutionDiffInMin               (minutes till or over solution time)

        FirstLock                       (timestamp of first lock)
    );</code></pre>

<h2 id="TicketTitleUpdate">TicketTitleUpdate()</h2>

<p>update ticket title</p>

<pre><code>    my $Success = $TicketObject-&gt;TicketTitleUpdate(
        Title    =&gt; &#39;Some Title&#39;,
        TicketID =&gt; 123,
        UserID   =&gt; 1,
    );</code></pre>

<p>Events: TicketTitleUpdate</p>

<h2 id="TicketUnlockTimeoutUpdate">TicketUnlockTimeoutUpdate()</h2>

<p>set the ticket unlock time to the passed time</p>

<pre><code>    my $Success = $TicketObject-&gt;TicketUnlockTimeoutUpdate(
        UnlockTimeout =&gt; $Epoch,
        TicketID      =&gt; 123,
        UserID        =&gt; 143,
    );</code></pre>

<p>Events: TicketUnlockTimeoutUpdate</p>

<h2 id="TicketQueueID">TicketQueueID()</h2>

<p>get ticket queue id</p>

<pre><code>    my $QueueID = $TicketObject-&gt;TicketQueueID(
        TicketID =&gt; 123,
    );</code></pre>

<h2 id="TicketMoveList">TicketMoveList()</h2>

<p>to get the move queue list for a ticket (depends on workflow, if configured)</p>

<pre><code>    my %Queues = $TicketObject-&gt;TicketMoveList(
        Type   =&gt; &#39;create&#39;,
        UserID =&gt; 123,
    );

    my %Queues = $TicketObject-&gt;TicketMoveList(
        Type           =&gt; &#39;create&#39;,
        CustomerUserID =&gt; &#39;customer_user_id_123&#39;,
    );


    my %Queues = $TicketObject-&gt;TicketMoveList(
        QueueID =&gt; 123,
        UserID  =&gt; 123,
    );

    my %Queues = $TicketObject-&gt;TicketMoveList(
        TicketID =&gt; 123,
        UserID   =&gt; 123,
    );</code></pre>

<h2 id="TicketQueueSet">TicketQueueSet()</h2>

<p>to move a ticket (sends notification to agents of selected my queues, if ticket is not closed)</p>

<pre><code>    my $Success = $TicketObject-&gt;TicketQueueSet(
        QueueID  =&gt; 123,
        TicketID =&gt; 123,
        UserID   =&gt; 123,
    );

    my $Success = $TicketObject-&gt;TicketQueueSet(
        Queue    =&gt; &#39;Some Queue Name&#39;,
        TicketID =&gt; 123,
        UserID   =&gt; 123,
    );

    my $Success = $TicketObject-&gt;TicketQueueSet(
        Queue    =&gt; &#39;Some Queue Name&#39;,
        TicketID =&gt; 123,
        Comment  =&gt; &#39;some comment&#39;, # optional
        ForceNotificationToUserID =&gt; [1,43,56], # if you want to force somebody
        UserID   =&gt; 123,
    );</code></pre>

<p>Optional attribute: SendNoNotification disables or enables agent and customer notification for this action.</p>

<p>For example:</p>

<pre><code>        SendNoNotification =&gt; 0, # optional 1|0 (send no agent and customer notification)</code></pre>

<p>Events: TicketQueueUpdate</p>

<h2 id="TicketMoveQueueList">TicketMoveQueueList()</h2>

<p>returns a list of used queue ids / names</p>

<pre><code>    my @QueueIDList = $TicketObject-&gt;TicketMoveQueueList(
        TicketID =&gt; 123,
        Type     =&gt; &#39;ID&#39;,
    );</code></pre>

<p>Returns:</p>

<pre><code>    @QueueIDList = ( 1, 2, 3 );

    my @QueueList = $TicketObject-&gt;TicketMoveQueueList(
        TicketID =&gt; 123,
        Type     =&gt; &#39;Name&#39;,
    );</code></pre>

<p>Returns:</p>

<pre><code>    @QueueList = ( &#39;QueueA&#39;, &#39;QueueB&#39;, &#39;QueueC&#39; );</code></pre>

<h2 id="TicketTypeList">TicketTypeList()</h2>

<p>to get all possible types for a ticket (depends on workflow, if configured)</p>

<pre><code>    my %Types = $TicketObject-&gt;TicketTypeList(
        UserID =&gt; 123,
    );

    my %Types = $TicketObject-&gt;TicketTypeList(
        CustomerUserID =&gt; &#39;customer_user_id_123&#39;,
    );

    my %Types = $TicketObject-&gt;TicketTypeList(
        QueueID =&gt; 123,
        UserID  =&gt; 123,
    );

    my %Types = $TicketObject-&gt;TicketTypeList(
        TicketID =&gt; 123,
        UserID   =&gt; 123,
    );</code></pre>

<p>Returns:</p>

<pre><code>    %Types = (
        1 =&gt; &#39;default&#39;,
        2 =&gt; &#39;request&#39;,
        3 =&gt; &#39;offer&#39;,
    );</code></pre>

<h2 id="TicketTypeSet">TicketTypeSet()</h2>

<p>to set a ticket type</p>

<pre><code>    my $Success = $TicketObject-&gt;TicketTypeSet(
        TypeID   =&gt; 123,
        TicketID =&gt; 123,
        UserID   =&gt; 123,
    );

    my $Success = $TicketObject-&gt;TicketTypeSet(
        Type     =&gt; &#39;normal&#39;,
        TicketID =&gt; 123,
        UserID   =&gt; 123,
    );</code></pre>

<p>Events: TicketTypeUpdate</p>

<h2 id="TicketServiceList">TicketServiceList()</h2>

<p>to get all possible services for a ticket (depends on workflow, if configured)</p>

<pre><code>    my %Services = $TicketObject-&gt;TicketServiceList(
        QueueID        =&gt; 123,
        UserID         =&gt; 123,
    );

    my %Services = $TicketObject-&gt;TicketServiceList(
        CustomerUserID =&gt; 123,
        QueueID        =&gt; 123,
    );

    my %Services = $TicketObject-&gt;TicketServiceList(
        CustomerUserID =&gt; 123,
        TicketID       =&gt; 123,
        UserID         =&gt; 123,
    );</code></pre>

<p>Returns:</p>

<pre><code>    %Services = (
        1 =&gt; &#39;ServiceA&#39;,
        2 =&gt; &#39;ServiceB&#39;,
        3 =&gt; &#39;ServiceC&#39;,
    );</code></pre>

<h2 id="TicketServiceSet">TicketServiceSet()</h2>

<p>to set a ticket service</p>

<pre><code>    my $Success = $TicketObject-&gt;TicketServiceSet(
        ServiceID =&gt; 123,
        TicketID  =&gt; 123,
        UserID    =&gt; 123,
    );

    my $Success = $TicketObject-&gt;TicketServiceSet(
        Service  =&gt; &#39;Service A&#39;,
        TicketID =&gt; 123,
        UserID   =&gt; 123,
    );</code></pre>

<p>Events: TicketServiceUpdate</p>

<h2 id="TicketEscalationPreferences">TicketEscalationPreferences()</h2>

<p>get escalation preferences of a ticket (e. g. from SLA or from Queue based settings)</p>

<pre><code>    my %Escalation = $TicketObject-&gt;TicketEscalationPreferences(
        Ticket =&gt; $Param{Ticket},
        UserID =&gt; $Param{UserID},
    );</code></pre>

<h2 id="TicketEscalationDateCalculation">TicketEscalationDateCalculation()</h2>

<p>get escalation properties of a ticket</p>

<pre><code>    my %Escalation = $TicketObject-&gt;TicketEscalationDateCalculation(
        Ticket =&gt; $Param{Ticket},
        UserID =&gt; $Param{UserID},
    );</code></pre>

<p>returns</p>

<pre><code>    (general escalation info)
    EscalationDestinationIn          (escalation in e. g. 1h 4m)
    EscalationDestinationTime        (date of escalation in unix time, e. g. 72193292)
    EscalationDestinationDate        (date of escalation, e. g. &quot;2009-02-14 18:00:00&quot;)
    EscalationTimeWorkingTime        (seconds of working/service time till escalation, e. g. &quot;1800&quot;)
    EscalationTime                   (seconds total till escalation, e. g. &quot;3600&quot;)

    (detail escalation info about first response, update and solution time)
    FirstResponseTimeEscalation      (if true, ticket is escalated)
    FirstResponseTimeNotification    (if true, notify - x% of escalation has reached)
    FirstResponseTimeDestinationTime (date of escalation in unix time, e. g. 72193292)
    FirstResponseTimeDestinationDate (date of escalation, e. g. &quot;2009-02-14 18:00:00&quot;)
    FirstResponseTimeWorkingTime     (seconds of working/service time till escalation, e. g. &quot;1800&quot;)
    FirstResponseTime                (seconds total till escalation, e. g. &quot;3600&quot;)

    UpdateTimeEscalation             (if true, ticket is escalated)
    UpdateTimeNotification           (if true, notify - x% of escalation has reached)
    UpdateTimeDestinationTime        (date of escalation in unix time, e. g. 72193292)
    UpdateTimeDestinationDate        (date of escalation, e. g. &quot;2009-02-14 18:00:00&quot;)
    UpdateTimeWorkingTime            (seconds of working/service time till escalation, e. g. &quot;1800&quot;)
    UpdateTime                       (seconds total till escalation, e. g. &quot;3600&quot;)

    SolutionTimeEscalation           (if true, ticket is escalated)
    SolutionTimeNotification         (if true, notify - x% of escalation has reached)
    SolutionTimeDestinationTime      (date of escalation in unix time, e. g. 72193292)
    SolutionTimeDestinationDate      (date of escalation, e. g. &quot;2009-02-14 18:00:00&quot;)
    SolutionTimeWorkingTime          (seconds of working/service time till escalation, e. g. &quot;1800&quot;)
    SolutionTime                     (seconds total till escalation, e. g. &quot;3600&quot;)</code></pre>

<h2 id="TicketEscalationIndexBuild">TicketEscalationIndexBuild()</h2>

<p>build escalation index of one ticket with current settings (SLA, Queue, Calendar...)</p>

<pre><code>    my $Success = $TicketObject-&gt;TicketEscalationIndexBuild(
        TicketID =&gt; $Param{TicketID},
        UserID   =&gt; $Param{UserID},
    );</code></pre>

<h2 id="TicketSLAList">TicketSLAList()</h2>

<p>to get all possible SLAs for a ticket (depends on workflow, if configured)</p>

<pre><code>    my %SLAs = $TicketObject-&gt;TicketSLAList(
        ServiceID =&gt; 1,
        UserID    =&gt; 123,
    );

    my %SLAs = $TicketObject-&gt;TicketSLAList(
        ServiceID      =&gt; 1,
        CustomerUserID =&gt; &#39;customer_user_id_123&#39;,
    );


    my %SLAs = $TicketObject-&gt;TicketSLAList(
        QueueID   =&gt; 123,
        ServiceID =&gt; 1,
        UserID    =&gt; 123,
    );

    my %SLAs = $TicketObject-&gt;TicketSLAList(
        TicketID  =&gt; 123,
        ServiceID =&gt; 1,
        UserID    =&gt; 123,
    );</code></pre>

<p>Returns:</p>

<pre><code>    %SLAs = (
        1 =&gt; &#39;SLA A&#39;,
        2 =&gt; &#39;SLA B&#39;,
        3 =&gt; &#39;SLA C&#39;,
    );</code></pre>

<h2 id="TicketSLASet">TicketSLASet()</h2>

<p>to set a ticket service level agreement</p>

<pre><code>    my $Success = $TicketObject-&gt;TicketSLASet(
        SLAID    =&gt; 123,
        TicketID =&gt; 123,
        UserID   =&gt; 123,
    );

    my $Success = $TicketObject-&gt;TicketSLASet(
        SLA      =&gt; &#39;SLA A&#39;,
        TicketID =&gt; 123,
        UserID   =&gt; 123,
    );</code></pre>

<p>Events: TicketSLAUpdate</p>

<h2 id="TicketCustomerSet">TicketCustomerSet()</h2>

<p>Set customer data of ticket. Can set &#39;No&#39; (CustomerID), &#39;User&#39; (CustomerUserID), or both.</p>

<pre><code>    my $Success = $TicketObject-&gt;TicketCustomerSet(
        No       =&gt; &#39;client123&#39;,
        User     =&gt; &#39;client-user-123&#39;,
        TicketID =&gt; 123,
        UserID   =&gt; 23,
    );</code></pre>

<p>Events: TicketCustomerUpdate</p>

<h2 id="TicketPermission">TicketPermission()</h2>

<p>returns whether or not the agent has permission on a ticket</p>

<pre><code>    my $Access = $TicketObject-&gt;TicketPermission(
        Type     =&gt; &#39;ro&#39;,
        TicketID =&gt; 123,
        UserID   =&gt; 123,
    );</code></pre>

<p>or without logging, for example for to check if a link/action should be shown</p>

<pre><code>    my $Access = $TicketObject-&gt;TicketPermission(
        Type     =&gt; &#39;ro&#39;,
        TicketID =&gt; 123,
        LogNo    =&gt; 1,
        UserID   =&gt; 123,
    );</code></pre>

<h2 id="TicketCustomerPermission">TicketCustomerPermission()</h2>

<p>returns whether or not a customer has permission to a ticket</p>

<pre><code>    my $Access = $TicketObject-&gt;TicketCustomerPermission(
        Type     =&gt; &#39;ro&#39;,
        TicketID =&gt; 123,
        UserID   =&gt; 123,
    );</code></pre>

<p>or without logging, for example for to check if a link/action should be displayed</p>

<pre><code>    my $Access = $TicketObject-&gt;TicketCustomerPermission(
        Type     =&gt; &#39;ro&#39;,
        TicketID =&gt; 123,
        LogNo    =&gt; 1,
        UserID   =&gt; 123,
    );</code></pre>

<h2 id="GetSubscribedUserIDsByQueueID">GetSubscribedUserIDsByQueueID()</h2>

<p>returns an array of user ids which selected the given queue id as custom queue.</p>

<pre><code>    my @UserIDs = $TicketObject-&gt;GetSubscribedUserIDsByQueueID(
        QueueID =&gt; 123,
    );</code></pre>

<p>Returns:</p>

<pre><code>    @UserIDs = ( 1, 2, 3 );</code></pre>

<h2 id="GetSubscribedUserIDsByServiceID">GetSubscribedUserIDsByServiceID()</h2>

<p>returns an array of user ids which selected the given service id as custom service.</p>

<pre><code>    my @UserIDs = $TicketObject-&gt;GetSubscribedUserIDsByServiceID(
        ServiceID =&gt; 123,
    );</code></pre>

<p>Returns:</p>

<pre><code>    @UserIDs = ( 1, 2, 3 );</code></pre>

<h2 id="TicketPendingTimeSet">TicketPendingTimeSet()</h2>

<p>set ticket pending time:</p>

<pre><code>    my $Success = $TicketObject-&gt;TicketPendingTimeSet(
        Year     =&gt; 2003,
        Month    =&gt; 08,
        Day      =&gt; 14,
        Hour     =&gt; 22,
        Minute   =&gt; 05,
        TicketID =&gt; 123,
        UserID   =&gt; 23,
    );</code></pre>

<p>or use a time stamp:</p>

<pre><code>    my $Success = $TicketObject-&gt;TicketPendingTimeSet(
        String   =&gt; &#39;2003-08-14 22:05:00&#39;,
        TicketID =&gt; 123,
        UserID   =&gt; 23,
    );</code></pre>

<p>or use a diff (set pending time to &quot;now&quot; + diff minutes)</p>

<pre><code>    my $Success = $TicketObject-&gt;TicketPendingTimeSet(
        Diff     =&gt; ( 7 * 24 * 60 ),  # minutes (here: 10080 minutes - 7 days)
        TicketID =&gt; 123,
        UserID   =&gt; 23,
    );</code></pre>

<p>If you want to set the pending time to null, just supply zeros:</p>

<pre><code>    my $Success = $TicketObject-&gt;TicketPendingTimeSet(
        Year     =&gt; 0000,
        Month    =&gt; 00,
        Day      =&gt; 00,
        Hour     =&gt; 00,
        Minute   =&gt; 00,
        TicketID =&gt; 123,
        UserID   =&gt; 23,
    );</code></pre>

<p>or use a time stamp:</p>

<pre><code>    my $Success = $TicketObject-&gt;TicketPendingTimeSet(
        String   =&gt; &#39;0000-00-00 00:00:00&#39;,
        TicketID =&gt; 123,
        UserID   =&gt; 23,
    );</code></pre>

<p>Events: TicketPendingTimeUpdate</p>

<h2 id="TicketLockGet">TicketLockGet()</h2>

<p>check if a ticket is locked or not</p>

<pre><code>    if ($TicketObject-&gt;TicketLockGet(TicketID =&gt; 123)) {
        print &quot;Ticket is locked!\n&quot;;
    }
    else {
        print &quot;Ticket is not locked!\n&quot;;
    }</code></pre>

<h2 id="TicketLockSet">TicketLockSet()</h2>

<p>to lock or unlock a ticket</p>

<pre><code>    my $Success = $TicketObject-&gt;TicketLockSet(
        Lock     =&gt; &#39;lock&#39;,
        TicketID =&gt; 123,
        UserID   =&gt; 123,
    );

    my $Success = $TicketObject-&gt;TicketLockSet(
        LockID   =&gt; 1,
        TicketID =&gt; 123,
        UserID   =&gt; 123,
    );</code></pre>

<p>Optional attribute: SendNoNotification, disable or enable agent and customer notification for this action. Otherwise a notification will be sent to agent and customer.</p>

<p>For example:</p>

<pre><code>        SendNoNotification =&gt; 0, # optional 1|0 (send no agent and customer notification)</code></pre>

<p>Events: TicketLockUpdate</p>

<h2 id="TicketArchiveFlagSet">TicketArchiveFlagSet()</h2>

<p>to set the ticket archive flag</p>

<pre><code>    my $Success = $TicketObject-&gt;TicketArchiveFlagSet(
        ArchiveFlag =&gt; &#39;y&#39;,  # (y|n)
        TicketID    =&gt; 123,
        UserID      =&gt; 123,
    );</code></pre>

<p>Events: TicketArchiveFlagUpdate</p>

<h2 id="TicketArchiveFlagGet">TicketArchiveFlagGet()</h2>

<p>check if a ticket is archived or not</p>

<pre><code>    if ( $TicketObject-&gt;TicketArchiveFlagGet( TicketID =&gt; 123 ) ) {
        print &quot;Ticket is archived!\n&quot;;
    }
    else {
        print &quot;Ticket is not archived!\n&quot;;
    }</code></pre>

<h2 id="TicketStateSet">TicketStateSet()</h2>

<p>to set a ticket state</p>

<pre><code>    my $Success = $TicketObject-&gt;TicketStateSet(
        State     =&gt; &#39;open&#39;,
        TicketID  =&gt; 123,
        ArticleID =&gt; 123, #optional, for history
        UserID    =&gt; 123,
    );

    my $Success = $TicketObject-&gt;TicketStateSet(
        StateID  =&gt; 3,
        TicketID =&gt; 123,
        UserID   =&gt; 123,
    );</code></pre>

<p>Optional attribute: SendNoNotification, disable or enable agent and customer notification for this action. Otherwise a notification will be sent to agent and customer.</p>

<p>For example:</p>

<pre><code>        SendNoNotification =&gt; 0, # optional 1|0 (send no agent and customer notification)</code></pre>

<p>Events: TicketStateUpdate</p>

<h2 id="TicketStateList">TicketStateList()</h2>

<p>to get the state list for a ticket (depends on workflow, if configured)</p>

<pre><code>    my %States = $TicketObject-&gt;TicketStateList(
        TicketID =&gt; 123,
        UserID   =&gt; 123,
    );

    my %States = $TicketObject-&gt;TicketStateList(
        TicketID       =&gt; 123,
        CustomerUserID =&gt; &#39;customer_user_id_123&#39;,
    );

    my %States = $TicketObject-&gt;TicketStateList(
        QueueID =&gt; 123,
        UserID  =&gt; 123,
    );

    my %States = $TicketObject-&gt;TicketStateList(
        TicketID =&gt; 123,
        Type     =&gt; &#39;open&#39;,
        UserID   =&gt; 123,
    );</code></pre>

<p>Returns:</p>

<pre><code>    %States = (
        1 =&gt; &#39;State A&#39;,
        2 =&gt; &#39;State B&#39;,
        3 =&gt; &#39;State C&#39;,
    );</code></pre>

<h2 id="OwnerCheck">OwnerCheck()</h2>

<p>to get the ticket owner</p>

<pre><code>    my ($OwnerID, $Owner) = $TicketObject-&gt;OwnerCheck(
        TicketID =&gt; 123,
    );</code></pre>

<p>or for access control</p>

<pre><code>    my $AccessOk = $TicketObject-&gt;OwnerCheck(
        TicketID =&gt; 123,
        OwnerID  =&gt; 321,
    );</code></pre>

<h2 id="TicketOwnerSet">TicketOwnerSet()</h2>

<p>to set the ticket owner (notification to the new owner will be sent)</p>

<p>by using user id</p>

<pre><code>    my $Success = $TicketObject-&gt;TicketOwnerSet(
        TicketID  =&gt; 123,
        NewUserID =&gt; 555,
        UserID    =&gt; 123,
    );</code></pre>

<p>by using user login</p>

<pre><code>    my $Success = $TicketObject-&gt;TicketOwnerSet(
        TicketID =&gt; 123,
        NewUser  =&gt; &#39;some-user-login&#39;,
        UserID   =&gt; 123,
    );</code></pre>

<p>Return: 1 = owner has been set 2 = this owner is already set, no update needed</p>

<p>Optional attribute: SendNoNotification, disable or enable agent and customer notification for this action. Otherwise a notification will be sent to agent and customer.</p>

<p>For example:</p>

<pre><code>        SendNoNotification =&gt; 0, # optional 1|0 (send no agent and customer notification)</code></pre>

<p>Events: TicketOwnerUpdate</p>

<h2 id="TicketOwnerList">TicketOwnerList()</h2>

<p>returns the owner in the past as array with hash ref of the owner data (name, email, ...)</p>

<pre><code>    my @Owner = $TicketObject-&gt;TicketOwnerList(
        TicketID =&gt; 123,
    );</code></pre>

<p>Returns:</p>

<pre><code>    @Owner = (
        {
            UserFirstname =&gt; &#39;SomeName&#39;,
            UserLastname  =&gt; &#39;SomeName&#39;,
            UserEmail     =&gt; &#39;some@example.com&#39;,
            # custom attributes
        },
        {
            UserFirstname =&gt; &#39;SomeName&#39;,
            UserLastname  =&gt; &#39;SomeName&#39;,
            UserEmail     =&gt; &#39;some@example.com&#39;,
            # custom attributes
        },
    );</code></pre>

<h2 id="TicketResponsibleSet">TicketResponsibleSet()</h2>

<p>to set the ticket responsible (notification to the new responsible will be sent)</p>

<p>by using user id</p>

<pre><code>    my $Success = $TicketObject-&gt;TicketResponsibleSet(
        TicketID  =&gt; 123,
        NewUserID =&gt; 555,
        UserID    =&gt; 213,
    );</code></pre>

<p>by using user login</p>

<pre><code>    my $Success = $TicketObject-&gt;TicketResponsibleSet(
        TicketID  =&gt; 123,
        NewUser   =&gt; &#39;some-user-login&#39;,
        UserID    =&gt; 213,
    );</code></pre>

<p>Return: 1 = responsible has been set 2 = this responsible is already set, no update needed</p>

<p>Optional attribute: SendNoNotification, disable or enable agent and customer notification for this action. Otherwise a notification will be sent to agent and customer.</p>

<p>For example:</p>

<pre><code>        SendNoNotification =&gt; 0, # optional 1|0 (send no agent and customer notification)</code></pre>

<p>Events: TicketResponsibleUpdate</p>

<h2 id="TicketResponsibleList">TicketResponsibleList()</h2>

<p>returns the responsible in the past as array with hash ref of the owner data (name, email, ...)</p>

<pre><code>    my @Responsible = $TicketObject-&gt;TicketResponsibleList(
        TicketID =&gt; 123,
    );</code></pre>

<p>Returns:</p>

<pre><code>    @Responsible = (
        {
            UserFirstname =&gt; &#39;SomeName&#39;,
            UserLastname  =&gt; &#39;SomeName&#39;,
            UserEmail     =&gt; &#39;some@example.com&#39;,
            # custom attributes
        },
        {
            UserFirstname =&gt; &#39;SomeName&#39;,
            UserLastname  =&gt; &#39;SomeName&#39;,
            UserEmail     =&gt; &#39;some@example.com&#39;,
            # custom attributes
        },
    );</code></pre>

<h2 id="TicketInvolvedAgentsList">TicketInvolvedAgentsList()</h2>

<p>returns an array with hash ref of agents which have been involved with a ticket. It is guaranteed that no agent is returned twice. With the param &#39;WithoutSubscriptions&#39; it&#39;s possible to not return the user which only subscribed/unsubscribed the ticket.</p>

<pre><code>    my @InvolvedAgents = $TicketObject-&gt;TicketInvolvedAgentsList(
        TicketID             =&gt; 123,
        WithoutUserData      =&gt; 1, # optional
        WithoutSubscriptions =&gt; 1, # optional
        AvatarFile           =&gt; 1, # optional
        NoSensitive          =&gt; 1, # optional
    );</code></pre>

<p>Returns:</p>

<pre><code>    @InvolvedAgents = (
        {
            UserFirstname =&gt; &#39;SomeName&#39;,
            UserLastname  =&gt; &#39;SomeName&#39;,
            UserEmail     =&gt; &#39;some@example.com&#39;,
            # custom attributes
        },
        {
            UserFirstname =&gt; &#39;AnotherName&#39;,
            UserLastname  =&gt; &#39;AnotherName&#39;,
            UserEmail     =&gt; &#39;another@example.com&#39;,
            # custom attributes
        },
    );</code></pre>

<h2 id="TicketPrioritySet">TicketPrioritySet()</h2>

<p>to set the ticket priority</p>

<pre><code>    my $Success = $TicketObject-&gt;TicketPrioritySet(
        TicketID =&gt; 123,
        Priority =&gt; &#39;low&#39;,
        UserID   =&gt; 213,
    );

    my $Success = $TicketObject-&gt;TicketPrioritySet(
        TicketID   =&gt; 123,
        PriorityID =&gt; 2,
        UserID     =&gt; 213,
    );</code></pre>

<p>Events: TicketPriorityUpdate</p>

<h2 id="TicketPriorityList">TicketPriorityList()</h2>

<p>to get the priority list for a ticket (depends on workflow, if configured)</p>

<pre><code>    my %Priorities = $TicketObject-&gt;TicketPriorityList(
        TicketID =&gt; 123,
        UserID   =&gt; 123,
    );

    my %Priorities = $TicketObject-&gt;TicketPriorityList(
        TicketID       =&gt; 123,
        CustomerUserID =&gt; &#39;customer_user_id_123&#39;,
    );

    my %Priorities = $TicketObject-&gt;TicketPriorityList(
        QueueID =&gt; 123,
        UserID  =&gt; 123,
    );</code></pre>

<p>Returns:</p>

<pre><code>    %Priorities = (
        1 =&gt; &#39;Priority A&#39;,
        2 =&gt; &#39;Priority B&#39;,
        3 =&gt; &#39;Priority C&#39;,
    );</code></pre>

<h2 id="HistoryTicketStatusGet">HistoryTicketStatusGet()</h2>

<p>get a hash with ticket id as key and a hash ref (result of HistoryTicketGet) of all affected tickets in this time area.</p>

<pre><code>    my %Tickets = $TicketObject-&gt;HistoryTicketStatusGet(
        StartDay   =&gt; 12,
        StartMonth =&gt; 1,
        StartYear  =&gt; 2006,
        StopDay    =&gt; 18,
        StopMonth  =&gt; 1,
        StopYear   =&gt; 2006,
        Force      =&gt; 0,
    );</code></pre>

<h2 id="HistoryTicketGet">HistoryTicketGet()</h2>

<p>returns a hash of some of the ticket data calculated based on ticket history info at the given date.</p>

<pre><code>    my %HistoryData = $TicketObject-&gt;HistoryTicketGet(
        StopYear   =&gt; 2003,
        StopMonth  =&gt; 12,
        StopDay    =&gt; 24,
        StopHour   =&gt; 10, (optional, default 23)
        StopMinute =&gt; 0,  (optional, default 59)
        StopSecond =&gt; 0,  (optional, default 59)
        TicketID   =&gt; 123,
        Force      =&gt; 0,     # 1: don&#39;t use cache
    );</code></pre>

<p>returns</p>

<pre><code>    TicketNumber
    TicketID
    Type
    TypeID
    Queue
    QueueID
    Priority
    PriorityID
    State
    StateID
    Owner
    OwnerID
    CreateUserID
    CreateTime (timestamp)
    CreateOwnerID
    CreatePriority
    CreatePriorityID
    CreateState
    CreateStateID
    CreateQueue
    CreateQueueID
    LockFirst (timestamp)
    LockLast (timestamp)
    UnlockFirst (timestamp)
    UnlockLast (timestamp)</code></pre>

<h2 id="HistoryTypeLookup">HistoryTypeLookup()</h2>

<p>returns the id of the requested history type.</p>

<pre><code>    my $ID = $TicketObject-&gt;HistoryTypeLookup( Type =&gt; &#39;Move&#39; );</code></pre>

<h2 id="HistoryAdd">HistoryAdd()</h2>

<p>add a history entry to an ticket</p>

<pre><code>    my $Success = $TicketObject-&gt;HistoryAdd(
        Name         =&gt; &#39;Some Comment&#39;,
        HistoryType  =&gt; &#39;Move&#39;, # see system tables
        TicketID     =&gt; 123,
        ArticleID    =&gt; 1234, # not required!
        QueueID      =&gt; 123, # not required!
        TypeID       =&gt; 123, # not required!
        CreateUserID =&gt; 123,
    );</code></pre>

<p>Events: HistoryAdd</p>

<h2 id="HistoryGet">HistoryGet()</h2>

<p>get ticket history as array with hashes (TicketID, ArticleID, Name, CreateBy, CreateTime, HistoryType, QueueID, OwnerID, PriorityID, StateID, HistoryTypeID and TypeID)</p>

<p>If CreatedBy is given, only history entries from this agent are returned.</p>

<pre><code>    my @HistoryLines = $TicketObject-&gt;HistoryGet(
        TicketID  =&gt; 123,
        UserID    =&gt; 123,
        CreatedBy =&gt; 2,   (optional, if given, no UserData will be included in result)
    );</code></pre>

<h2 id="HistoryDelete">HistoryDelete()</h2>

<p>delete a ticket history (from storage)</p>

<pre><code>    my $Success = $TicketObject-&gt;HistoryDelete(
        TicketID =&gt; 123,
        UserID   =&gt; 123,
    );</code></pre>

<p>Events: HistoryDelete</p>

<h2 id="TicketAccountedTimeGet">TicketAccountedTimeGet()</h2>

<p>returns the accounted time of a ticket.</p>

<pre><code>    my $AccountedTime = $TicketObject-&gt;TicketAccountedTimeGet(TicketID =&gt; 1234);</code></pre>

<h2 id="TicketAccountTime">TicketAccountTime()</h2>

<p>account time to a ticket.</p>

<pre><code>    my $Success = $TicketObject-&gt;TicketAccountTime(
        TicketID  =&gt; 1234,
        ArticleID =&gt; 23542,
        TimeUnit  =&gt; &#39;4.5&#39;,
        UserID    =&gt; 1,
    );</code></pre>

<p>Events: TicketAccountTime</p>

<h2 id="TicketMerge">TicketMerge()</h2>

<p>merge two tickets</p>

<pre><code>    my $Success = $TicketObject-&gt;TicketMerge(
        MainTicketID  =&gt; 412,
        MergeTicketID =&gt; 123,
        UserID        =&gt; 123,
    );</code></pre>

<p>Events: TicketMerge</p>

<h2 id="TicketMergeDynamicFields">TicketMergeDynamicFields()</h2>

<p>merge dynamic fields from one ticket into another, that is, copy them from the merge ticket to the main ticket if the value is empty in the main ticket.</p>

<pre><code>    my $Success = $TicketObject-&gt;TicketMergeDynamicFields(
        MainTicketID  =&gt; 123,
        MergeTicketID =&gt; 42,
        UserID        =&gt; 1,
        DynamicFields =&gt; [&#39;DynamicField_TicketFreeText1&#39;], # optional
    );</code></pre>

<p>If DynamicFields is not present, it is taken from the Ticket::MergeDynamicFields configuration.</p>

<h2 id="TicketMergeLinkedObjects">TicketMergeLinkedObjects()</h2>

<p>merge linked objects from one ticket into another, that is, move them from the merge ticket to the main ticket in the link_relation table.</p>

<pre><code>    my $Success = $TicketObject-&gt;TicketMergeLinkedObjects(
        MainTicketID  =&gt; 123,
        MergeTicketID =&gt; 42,
        UserID        =&gt; 1,
    );</code></pre>

<h2 id="TicketWatchGet">TicketWatchGet()</h2>

<p>to get all user ids and additional attributes of an watched ticket</p>

<pre><code>    my %Watch = $TicketObject-&gt;TicketWatchGet(
        TicketID =&gt; 123,
    );</code></pre>

<p>get list of users to notify</p>

<pre><code>    my %Watch = $TicketObject-&gt;TicketWatchGet(
        TicketID =&gt; 123,
        Notify   =&gt; 1,
    );</code></pre>

<p>get list of users as array</p>

<pre><code>    my @Watch = $TicketObject-&gt;TicketWatchGet(
        TicketID =&gt; 123,
        Result   =&gt; &#39;ARRAY&#39;,
    );</code></pre>

<h2 id="TicketWatchSubscribe">TicketWatchSubscribe()</h2>

<p>to subscribe a ticket to watch it</p>

<pre><code>    my $Success = $TicketObject-&gt;TicketWatchSubscribe(
        TicketID    =&gt; 111,
        WatchUserID =&gt; 123,
        UserID      =&gt; 123,
    );</code></pre>

<p>Events: TicketSubscribe</p>

<h2 id="TicketWatchUnsubscribe">TicketWatchUnsubscribe()</h2>

<p>to remove a subscription of a ticket</p>

<pre><code>    my $Success = $TicketObject-&gt;TicketWatchUnsubscribe(
        TicketID    =&gt; 111,
        WatchUserID =&gt; 123,
        UserID      =&gt; 123,
    );</code></pre>

<p>Events: TicketUnsubscribe</p>

<h2 id="TicketArticleStorageSwitch">TicketArticleStorageSwitch()</h2>

<p>move article storage from one backend to other backend</p>

<pre><code>    my $Success = $TicketObject-&gt;TicketArticleStorageSwitch(
        TicketID    =&gt; 123,
        Source      =&gt; &#39;ArticleStorageDB&#39;,
        Destination =&gt; &#39;ArticleStorageFS&#39;,
        UserID      =&gt; 1,
    );</code></pre>

<h2 id="TicketCheckForProcessType">TicketCheckForProcessType()</h2>

<pre><code>    checks whether or not the ticket is of a process type.

    $TicketObject-&gt;TicketCheckForProcessType(
        TicketID =&gt; 123,
    );</code></pre>

<h2 id="TicketCalendarGet">TicketCalendarGet()</h2>

<p>checks calendar to be used for ticket based on sla and queue</p>

<pre><code>    my $Calendar = $TicketObject-&gt;TicketCalendarGet(
        QueueID =&gt; 1,
        SLAID   =&gt; 1,   # optional
    );</code></pre>

<p>returns calendar number or empty string for default calendar</p>

<h2 id="SearchUnknownTicketCustomers">SearchUnknownTicketCustomers()</h2>

<p>search customer users that are not saved in any backend</p>

<pre><code>    my $UnknownTicketCustomerList = $TicketObject-&gt;SearchUnknownTicketCustomers(
        SearchTerm =&gt; &#39;SomeSearchTerm&#39;,
    );</code></pre>

<p>Returns:</p>

<pre><code>    %UnknownTicketCustomerList = (
        {
            CustomerID    =&gt; &#39;SomeCustomerID&#39;,
            CustomerUser  =&gt; &#39;SomeCustomerUser&#39;,
        },
        {
            CustomerID    =&gt; &#39;SomeCustomerID&#39;,
            CustomerUser  =&gt; &#39;SomeCustomerUser&#39;,
        },
    );</code></pre>

<h1 id="PRIVATE-FUNCTIONS">PRIVATE FUNCTIONS</h1>

<h2 id="TicketCacheClear">_TicketCacheClear()</h2>

<p>Remove all caches related to specified ticket.</p>

<pre><code>    my $Success = $TicketObject-&gt;_TicketCacheClear(
        TicketID =&gt; 123,
    );</code></pre>

<h2 id="TicketGetExtended">_TicketGetExtended()</h2>

<p>Collect extended attributes for given ticket, namely first response, first lock and close data.</p>

<pre><code>    my %TicketExtended = $TicketObject-&gt;_TicketGetExtended(
        TicketID =&gt; $Param{TicketID},
        Ticket   =&gt; \%Ticket,
    );</code></pre>

<h2 id="TicketGetFirstResponse">_TicketGetFirstResponse()</h2>

<p>Collect attributes of first response for given ticket.</p>

<pre><code>    my %FirstResponse = $TicketObject-&gt;_TicketGetFirstResponse(
        TicketID =&gt; $Param{TicketID},
        Ticket   =&gt; \%Ticket,
    );</code></pre>

<h2 id="TicketGetClosed">_TicketGetClosed()</h2>

<p>Collect attributes of (last) closing for given ticket.</p>

<pre><code>    my %TicketGetClosed = $TicketObject-&gt;_TicketGetClosed(
        TicketID =&gt; $Param{TicketID},
        Ticket   =&gt; \%Ticket,
    );</code></pre>

<h2 id="TicketGetFirstLock">_TicketGetFirstLock()</h2>

<p>Collect first lock time for given ticket.</p>

<pre><code>    my %FirstLock = $TicketObject-&gt;_TicketGetFirstLock(
        TicketID =&gt; $Param{TicketID},
        Ticket   =&gt; \%Ticket,
    );</code></pre>

</div><div class="footer">generated by <a href="http://metacpan.org/module/Pod::ProjectDocs">Pod::ProjectDocs</a></div></body></html>

