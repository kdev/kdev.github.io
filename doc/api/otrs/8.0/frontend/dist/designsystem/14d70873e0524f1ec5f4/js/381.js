(window.webpackJsonp=window.webpackJsonp||[]).push([[381],{"4tAG":function(e,t,l){},N66M:function(e,t,l){"use strict";l.r(t);l("oMRA"),l("6d4m"),l("4aJ6"),l("2UZ+"),l("W1QL"),l("K/PF"),l("t91x"),l("3DBk");var a=l("VixF"),i=l("9va6"),n=l("8CHY"),o=l("DxZF"),r=l("rAvA"),s={name:"FormRecipients",components:{CommonBadge:function(){return l.e(33).then(l.bind(null,"B2Ms"))},FormAutocomplete:function(){return l.e(378).then(l.bind(null,"1BT7"))}},mixins:[a.a,o.a,r.a],props:{value:{type:null},multiple:{type:Boolean,default:!0},url:{type:String,required:!0},searchPromptText:{type:String},noResultsText:{type:String},testMode:{type:Boolean,default:!1},highlightValues:{type:Array,default:function(){return[]}},onlyMobilePhoneNumber:{type:Boolean,default:!1},isMainRecipientField:{type:Boolean,default:!1}},data:function(){return{localValue:[],oldValue:[],index:{}}},computed:{fieldId:function(){return"formRecipients-".concat(this.uuid)},params:function(){return{OnlyMobilePhoneNumber:this.onlyMobilePhoneNumber?1:0,DisabledOptions:this.connectedSelectedRecipientValues}}},watch:{value:function(e){Object(i.isEqual)(e,this.localValue)||this.buildLocalValue()}},created:function(){this.buildLocalValue()},methods:{buildLocalValue:function(){var e=this,t=this.value?Object(i.cloneDeep)(this.value):[];Object(i.isArray)(t)||(t=[t]),this.localValue=t,this.oldValue=Object(i.cloneDeep)(t),Object.values(this.localValue).forEach(function(t){e.index[t.Key]=t.Value})},emitValue:function(){var e={value:Object(i.cloneDeep)(this.localValue),oldValue:this.oldValue};this.multiple||(e.value=e.value.shift(),e.oldValue=e.oldValue.shift()),this.$emit("input",e.value,e.oldValue),this.oldValue=Object(i.cloneDeep)(this.localValue)},onSelect:function(e){this.$refs.autocomplete.clear(),e&&e.id&&e.label&&(this.index[e.id]||(this.multiple||(this.index={},this.localValue=[]),this.index[e.id]=e.label,this.localValue.push({Key:e.id,Value:e.label,Highlight:0}),this.emitValue()))},remove:function(e){this.$delete(this.index,e);var t=this.localValue.findIndex(function(t){return t.Key===e});this.$delete(this.localValue,t),this.emitValue()},guessRecipientVariant:function(e){var t=e.Highlight;return t&&"1"===t.toString()?"highlight":this.highlightValues.includes(e.Key)?"highlight":"info"},filter:function(e){var t=this,l="";l+=this.$locale.translate(this.label);return["description","localPlaceholder"].forEach(function(e){l+=t.$locale.translate(t[e])}),this.localValue.forEach(function(e){l+=e.Key+e.Value}),Object(n.a)(l,e)}}},u=(l("vWSz"),l("psIG")),c=Object(u.a)(s,function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("b-form-group",{directives:[{name:"show",rawName:"v-show",value:!e.hidden,expression:"!hidden"}],staticClass:"FormRecipients",attrs:{state:!Boolean(e.error)&&null,label:e._f("translate").apply(void 0,[e.label].concat(e.localLabelPlaceholder)),"label-for":e.fieldId,"label-class":e.required?"required":null,"label-sr-only":e.labelSrOnly,description:e._f("translate")(e.description),"invalid-feedback":e._f("translate")(e.error),"aria-label":e._f("translate").apply(void 0,[e.label].concat(e.localLabelPlaceholder))},scopedSlots:e._u([e.label&&e.description&&e.hideDescription?{key:"label",fn:function(){return[e._v("\n        "+e._s(e._f("translate").apply(void 0,[e.label].concat(e.localLabelPlaceholder)))+"\n        "),l("b-link",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.html",modifiers:{html:!0}}],attrs:{title:e._f("translate")(e.description)}},[l("CommonIcon",{staticClass:"mx-2 Font--Small",attrs:{weight:"regular",icon:"messages-bubble-square-information"}})],1)]},proxy:!0}:null,e.label&&e.description&&e.hideDescription?{key:"description",fn:function(){return[l("small",{staticClass:"sr-only"},[e._v("\n            "+e._s(e._f("translate")(e.description))+"\n        ")])]},proxy:!0}:null],null,!0)},[e._v(" "),e._v(" "),l("b-form-row",[l("b-col",[l("FormAutocomplete",{ref:"autocomplete",attrs:{name:e.name,url:e.url,"test-mode":e.testMode,"no-results-text":e.noResultsText,disabled:e.disabled,required:e.required,"search-prompt-text":e.searchPromptText,placeholder:e.placeholder,params:e.params,"clear-on-select":""},on:{select:e.onSelect},scopedSlots:e._u([e.addressBookMode?{key:"append-inline",fn:function(){return[l("CommonLink",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{title:e._f("translate")("Open customer user address book")},on:{click:e.onActionClick}},[l("CommonIcon",{staticClass:"mt-1",attrs:{icon:"single-neutral-book"}})],1)]},proxy:!0}:null],null,!0)})],1)],1),e._v(" "),l("b-form-row",[l("b-col",e._l(e.localValue,function(t){return l("CommonBadge",{key:t.Key,staticClass:"mr-3 my-2 p-1",attrs:{title:t.Value,variant:e.guessRecipientVariant(t),inline:"","show-remove-button":"","disable-tooltip":""},on:{remove:function(l){return e.remove(t.Key)}}})}),1)],1)],1)},[],!1,null,null,null);t.default=c.exports},vWSz:function(e,t,l){"use strict";var a=l("4tAG");l.n(a).a}}]);