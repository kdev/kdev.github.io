(window.webpackJsonp=window.webpackJsonp||[]).push([[402,418],{T0ip:function(e,t,r){"use strict";r.r(t);r("2Tod"),r("ABKx"),r("W1QL"),r("K/PF"),r("t91x"),r("75LO");var n=r("OvAC"),a=r.n(n),o=r("lOrp");function s(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}var i={name:"Base",props:{userType:{type:String,required:!0,validator:function(e){return-1!==["agent","customer"].indexOf(e)}},method:{type:Object}},data:function(){return{sharedSecret:null,emailSecurity:null}},computed:function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?s(Object(r),!0).forEach(function(t){a()(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({},Object(o.b)(["userInfo","config"])),mounted:function(){this.sharedSecret=this.generateSecret()},methods:{cancel:function(){this.$emit("cancel")},provideSetupData:function(){this.$emit("setup-data-provided",{sharedSecret:this.sharedSecret})},generateSecret:function(){for(var e=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","2","3","4","5","6","7"],t="",r=0;r<e.length;r++){var n=Math.floor(Math.random()*e.length),a=e[r];e[r]=e[n],e[n]=a}for(var o=0;o<16;o++)t+=e[o];return t}}},c=r("psIG"),l=Object(c.a)(i,void 0,void 0,!1,null,null,null);t.default=l.exports},"ns/e":function(e,t,r){"use strict";r.r(t);var n={name:"Email",components:{FormButton:function(){return Promise.all([r.e(3),r.e(11)]).then(r.bind(null,"dphA"))},FormCheckbox:function(){return r.e(27).then(r.bind(null,"Hzqv"))}},extends:r("T0ip").default,data:function(){return{loading:!1,emailSecurity:!1}},methods:{provideSetupData:function(){var e=this;this.loading=!0,this.clientSendRequest({Path:"".concat(this.userType,"/account/twofactor/send-setup-token-via-transport/Email"),Method:"post",Body:{Secret:this.sharedSecret,EmailSecurity:this.emailSecurity}}).then(function(){e.$nextTick(function(){e.$bus.$emit("showToastMessage",{id:"SendTokenViaTransportSuccessMessage",text:"A message with the verification code has been successfully sent.",variant:"success"}),e.$emit("setup-data-provided",{sharedSecret:e.sharedSecret,emailSecurity:e.emailSecurity}),e.$nextTick(function(){e.loading=!1,e.$test.setFlag("Account::TwoFactor::SendSetupTokenViaTransport")})})}).catch(function(t){t?t.response&&900===t.response.Code?e.$bus.$emit("showToastMessage",{id:"".concat(t.response.Body.ErrorIdentifier,"CustomErrorMessage"),text:t.response.Body.ErrorMessage,variant:"danger"}):e.$bus.$emit("showToastMessage",{id:"sendTokenViaTransportErrorMessage",heading:"Error Sending Token",text:"The sending of the OTP token via transport has failed. Please contact the administrator.",variant:"danger"}):e.$bus.$emit("showToastMessage",{id:"serverErrorMessage",heading:"Server Communication Error",text:"A server communication error has occurred. Please try again later.",variant:"danger"}),e.loading=!1,e.$log.error("The sending of the OTP token via transport has failed.",t)})}}},a=r("psIG"),o=Object(a.a)(n,function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("b-row",[r("b-col",[r("b-row",[r("b-col",{staticClass:"mt-4 mb-3 text-center"},[r("h3",[e._v(e._s(e._f("translate")("Two-factor Setup")))])])],1),e._v(" "),r("b-row",[r("b-col",{staticClass:"text-center"},[r("p",[e._v("\n                    "+e._s(e._f("translate")("A message with the verification code will be sent to %s.",e.userInfo.UserEmail))+"\n                ")])])],1),e._v(" "),r("b-row",{staticClass:"TwoFASetup"},[r("b-col",{staticClass:"col-10 offset-1"},[r("b-row",{staticClass:"mt-3"},[r("b-col",[r("FormCheckbox",{staticClass:"TwoFASetup__EmailSecurity",attrs:{label:e._f("translate")("Enable email security"),"auto-focus":""},model:{value:e.emailSecurity,callback:function(t){e.emailSecurity=t},expression:"emailSecurity"}})],1)],1),e._v(" "),r("b-row",[r("b-col",{staticClass:"my-3",attrs:{cols:"6"}},[r("FormButton",{attrs:{text:e._f("translate")("Cancel"),variant:"secondary",block:""},on:{click:function(t){return e.cancel()}}})],1),e._v(" "),r("b-col",{staticClass:"my-3",attrs:{cols:"6"}},[r("FormButton",{attrs:{loading:e.loading,text:e._f("translate")("Next"),variant:"primary",block:""},on:{click:function(t){return e.provideSetupData()}}})],1)],1)],1)],1)],1)],1)},[],!1,null,null,null);t.default=o.exports}}]);