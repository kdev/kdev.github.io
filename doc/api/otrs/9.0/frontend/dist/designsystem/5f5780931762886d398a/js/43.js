(window.webpackJsonp=window.webpackJsonp||[]).push([[43,47,459],{"+gqe":function(t,a,e){"use strict";e.r(a);e("DbwS"),e("t91x"),e("jPba"),e("e2Kn");var i=e("e1y0"),n={name:"ChatClosed",components:{FormInput:function(){return e.e(17).then(e.bind(null,"CJfq"))},FormButton:function(){return Promise.all([e.e(3),e.e(405)]).then(e.bind(null,"dphA"))},FormTextArea:function(){return e.e(40).then(e.bind(null,"TQwJ"))}},props:{authenticated:{type:Boolean},chatId:{type:Number},publicUserId:{type:String,default:""},primaryColor:{type:String},sendEmailSummaryText:{type:String,default:"Send a summary of this conversation to me."},sendEmailPlaceholderText:{type:String,default:"Enter email"},sendEmailButtonText:{type:String,default:"Send"},createTicketSummaryText:{type:String,default:"Or, create a new ticket with the summary."},createTicketButtonText:{type:String,default:"Create Ticket"}},data:function(){return{emailAddress:this.$store.getters.userInfo&&this.$store.getters.userInfo.UserEmail||"",loading:!1}},computed:{isValid:function(){return!!this.emailAddress&&i.default.validate(this.emailAddress,["EmailAddress"])}},methods:{sendEmail:function(){var t=this;if(this.isValid){this.loading=!0;var a="public/chat/send-mail";this.authenticated||(a="public/chat/".concat(this.publicUserId,"/send-mail")),this.clientSendRequest({Path:a,Method:"post",Body:{ChatID:this.chatId,Email:this.emailAddress}}).then(function(){t.$bus.$emit("showToastMessage",{id:"chatSendEmailSuccess",text:"Chat history has been successfully sent to your email address.",variant:"success",persistent:!1}),t.$nextTick(function(){t.$test.setFlag("Chat::SendMail")})}).catch(function(a){t.$log.error(a),t.$bus.$emit("showToastMessage",{id:"chatSendEmailError",text:a.response.Body&&a.response.Body.ErrorMessage?a.response.Body.ErrorMessage:"An unknown error occurred. Please contact your administrator.",variant:"danger",persistent:!1})}).finally(function(){t.close(),t.loading=!1})}},back:function(){this.$emit("back")},goToTicketCreate:function(){this.authenticated&&(this.$router.push({name:"TicketCreate",params:{mode:"new"},query:{FromChatID:this.chatId}}),this.close())},close:function(){this.$emit("close")}}},r=e("psIG"),s=Object(r.a)(n,function(){var t=this,a=t.$createElement,i=t._self._c||a;return i("b-col",{staticClass:"px-0 mb-3 shadow Chat--WhiteBackground",attrs:{cols:"12"}},[i("b-col",{staticClass:"py-2 Chat__Head Chat--PrimaryBackground",style:{"background-color":t.primaryColor?t.primaryColor+" !important":null},attrs:{cols:"12"}},[i("CommonLink",{staticClass:"Chat__Icon",on:{click:t.back}},[i("CommonIcon",{attrs:{icon:"arrow-left-1"}})],1)],1),t._v(" "),i("b-col",{staticClass:"mh-100 py-3 Chat__Content Chat--PrimaryBackground",style:{"background-color":t.primaryColor?t.primaryColor+" !important":null},attrs:{cols:"12"}},[i("b-row",[i("b-col",{staticClass:"text-center",attrs:{cols:"12"}},[i("div",{staticClass:"mt-5 mb-5"},[i("img",{attrs:{src:e("xRqa"),alt:""}})])])],1),t._v(" "),i("b-row",[i("b-col",{staticClass:"mb-3 text-center",attrs:{md:"12"}},[i("h2",[t._v(t._s(t._f("translate")(t.sendEmailSummaryText)))])])],1),t._v(" "),i("b-row",[i("b-col",{staticClass:"px-5 mb-3",attrs:{md:"12"}},[i("p",{staticClass:"mb-1 text-center"},[i("FormInput",{attrs:{placeholder:t._f("translate")(t.sendEmailPlaceholderText),name:"EmailAddress",type:"email"},model:{value:t.emailAddress,callback:function(a){t.emailAddress=a},expression:"emailAddress"}})],1)]),t._v(" "),i("b-col",{attrs:{md:"12"}},[i("p",{staticClass:"text-center"},[i("FormButton",{staticClass:"Button Button--PrimaryInverted Chat__SendMail",style:{"border-color":t.primaryColor?"#fff !important":null,"background-color":t.primaryColor?"#fff":null,color:t.primaryColor?t.primaryColor:null},attrs:{disabled:!t.isValid,loading:t.loading,variant:"primary"},on:{click:t.sendEmail}},[t._v("\n                        "+t._s(t._f("translate")(t.sendEmailButtonText))+"\n                    ")])],1)])],1),t._v(" "),t.authenticated?[i("b-row",{staticClass:"border-top mt-2 pt-4"},[i("b-col",{staticClass:"mb-3 text-center",attrs:{md:"12"}},[i("h2",[t._v(t._s(t._f("translate")(t.createTicketSummaryText)))])])],1),t._v(" "),i("b-row",[i("b-col",{attrs:{md:"12"}},[i("p",{staticClass:"text-center"},[i("FormButton",{staticClass:"Button Button--PrimaryInverted Chat__TicketCreate",style:{"border-color":t.primaryColor?"#fff !important":null,"background-color":t.primaryColor?"#fff":null,color:t.primaryColor?t.primaryColor:null},attrs:{variant:"primary"},on:{click:t.goToTicketCreate}},[t._v("\n                            "+t._s(t._f("translate")(t.createTicketButtonText))+"\n                        ")])],1)])],1)]:t._e()],2)],1)},[],!1,null,null,null);a.default=s.exports},"e+GP":function(t,a){function e(a){"@babel/helpers - typeof";return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?t.exports=e=function(t){return typeof t}:t.exports=e=function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},e(a)}t.exports=e},e1y0:function(t,a,e){"use strict";e.r(a);e("W1QL"),e("K/PF"),e("75LO");var i=e("e+GP"),n=e.n(i),r=(e("4aJ6"),e("t91x"),e("9ovy"),e("SDJZ")),s=e.n(r),o=e("NToG"),l=e.n(o),d=new(function(){function t(){s()(this,t)}return l()(t,[{key:"validate",value:function(t,a){if(0===a.length)return!0;var e="string"==typeof a?a:a[0];return"Int"===e?t.toString().match(/^[+-]?[\d]+$/):"PositiveInt"===e?t.toString().match(/^\+?[\d]+$/):"NegativeInt"===e?t.toString().match(/^-[\d]+$/):"Num"===e?t.toString().match(/^[+-]?[\d]+\.?[\d]*$/):"PositiveNum"===e?t.toString().match(/^\+?[\d]+\.?[\d]*$/):"NegativeNum"===e?t.toString().match(/^-[\d]+\.?[\d]*$/):"Str"===e?"string"==typeof t:"StrWithData"===e?"string"==typeof t&&""!==t:"PerlPackage"===e||("MD5"===e?t.toString().match(/^[a-f0-9]{32}$/i):"SHA1"===e?t.toString().match(/^[a-f0-9]{40}$/i):"SHA256"===e?t.toString().match(/^[a-f0-9]{64}$/i):"UUID"===e?t.toString().match(/^[0-9A-F]{8}-[0-9A-F]{4}-[12345][0-9A-F]{3}-[89AB][0-9A-F]{3}-[0-9A-F]{12}$/i):"IPv4"===e?t.toString().match(/^(([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\.){3}([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])$/m):"IPv6"===e?t.toString().match(/^(([a-zA-Z]|[a-zA-Z][a-zA-Z0-9-]*[a-zA-Z0-9])\.)*([A-Za-z]|[A-Za-z][A-Za-z0-9-]*[A-Za-z0-9])$|^\s*((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(%.+)?\s*$/):"HashRef"===e?"object"===n()(t):"HashRefWithData"===e?"object"===n()(t)&&Object.keys(t).length>0:"ArrayRefWithData"===e?t instanceof Array&&t.length>0:"EmailAddress"!==e||"string"==typeof t&&t.match(/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/))}},{key:"errorMessage",value:function(t){if(0===t.length)return"";var a=t[0];return"Int"===a?"This field must contain an integer value.":"PositiveInt"===a?"This field must contain a positive integer value.":"NegativeInt"===a?"This field must contain a negative integer value.":"Num"===a?"This field must contain a number value.":"PositiveNum"===a?"This field must contain a positive number value.":"NegativeNum"===a?"This field must contain a negative number value.":"Str"===a?"This field must contain a string value.":"StrWithData"===a?"This field must contain a non-empty string value.":"PerlPackage"===a?"":"MD5"===a?"This field must contain a valid MD5 hash.":"SHA1"===a?"This field must contain a valid SHA1 hash.":"SHA256"===a?"This field must contain a valid SHA256 hash.":"UUID"===a?"This field must contain a valid UUID value.":"IPv4"===a?"This field must contain a valid IPv4 address.":"IPv6"===a?"This field must contain a valid IPv6 address.":"HashRef"===a?"This field must contain a hash reference.":"HashRefWithData"===a?"This field must contain a hash reference with data.":"ArrayRefWithData"===a?"This field must contain an array reference with data.":"EmailAddress"===a?"This field must contain a valid email address.":"This field contains an invalid value."}}]),t}());a.default=d},xRqa:function(t,a,e){t.exports=e.p+"img/chatmailicon.3663d5f.png"}}]);