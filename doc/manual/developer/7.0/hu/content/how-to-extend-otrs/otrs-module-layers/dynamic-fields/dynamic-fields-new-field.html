

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="hu" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="hu" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Egy új dinamikus mező létrehozása &mdash; OTRS Developer Manual 7.0 dokumentáció</title>
  

  
  
  
  

  

  
  
    

  

  <link rel="stylesheet" href="../../../../_static/css/otrs.css" type="text/css" />
  <link rel="stylesheet" href="../../../../_static/pygments.css" type="text/css" />
    <link rel="index" title="Tárgymutató" href="../../../../genindex.html" />
    <link rel="search" title="Keresés" href="../../../../search.html" />
    <link rel="next" title="Egy dinamikus mező funkcionalitás kiterjesztés létrehozása" href="dynamic-fields-extend.html" />
    <link rel="prev" title="Hogyan lehet kiterjeszteni a dinamikus mezőket" href="dynamic-fields-extend-options.html" /> 

  
  <script src="../../../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          
    
    
    <a href="https://doc.otrs.com/doc" class="icon fa-rocket DocumentationOverview"> OTRS Documentation</a>

    

          
            <a href="../../../index.html" class="icon icon-home"> OTRS Developer Manual
          

          
            
            <img src="../../../../_static/otrs-logo.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                7.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          


        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Tartalom</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../get-started.html">Kezdeti lépések</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../how-it-works.html">OTRS belsőségek - hogyan működik</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../../how-to-extend-otrs.html">Hogyan bővíthető az OTRS</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../writing-otrs-application.html">Egy új OTRS előtétprogram-modul írása</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../writing-new-otrs-frontend-component.html">Egy új OTRS előtétprogram összetevő írása</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../../otrs-module-layers.html">Az OTRS modulrétegek erejének használata</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../agent-auth.html">Ügyintézői hitelesítő modul</a></li>
<li class="toctree-l3"><a class="reference internal" href="../auth-sync.html">Hitelesítés szinkronizációs modul</a></li>
<li class="toctree-l3"><a class="reference internal" href="../customer-auth.html">Ügyfél hitelesítő modul</a></li>
<li class="toctree-l3"><a class="reference internal" href="../customer-user-preferences.html">Ügyfél-felhasználó beállítások modul</a></li>
<li class="toctree-l3"><a class="reference internal" href="../queue-preferences.html">Várólista beállítások modul</a></li>
<li class="toctree-l3"><a class="reference internal" href="../service-preferences.html">Szolgáltatás beállítások modul</a></li>
<li class="toctree-l3"><a class="reference internal" href="../sla-preferences.html">SLA beállítások modul</a></li>
<li class="toctree-l3"><a class="reference internal" href="../log.html">Naplózás modul</a></li>
<li class="toctree-l3"><a class="reference internal" href="../outputfilter.html">Kimenetszűrő</a></li>
<li class="toctree-l3"><a class="reference internal" href="../stats.html">Statisztikák modul</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ticketnumber-generator.html">Jegyszám előállító modulok</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ticketevent.html">Jegyesemény modul</a></li>
<li class="toctree-l3"><a class="reference internal" href="../dashboard.html">Vezérlőpult modul</a></li>
<li class="toctree-l3"><a class="reference internal" href="../notify.html">Értesítési modul</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ticket-menu.html">Jegymenü modul</a></li>
<li class="toctree-l3"><a class="reference internal" href="../gi-transport.html">Hálózati átvitel</a></li>
<li class="toctree-l3"><a class="reference internal" href="../gi-mapping.html">Leképezés</a></li>
<li class="toctree-l3"><a class="reference internal" href="../gi-invoker.html">Meghívó</a></li>
<li class="toctree-l3"><a class="reference internal" href="../gi-operation.html">Művelet</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daemon/daemon-modules.html">OTRS démon</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daemon/scheduler-task-worker-modules.html">OTRS ütemező</a></li>
<li class="toctree-l3"><a class="reference internal" href="dynamic-fields-overview.html">Áttekintés</a></li>
<li class="toctree-l3"><a class="reference internal" href="dynamic-fields-framework.html">Dinamikus mezők keretrendszer</a></li>
<li class="toctree-l3"><a class="reference internal" href="dynamic-fields-interaction.html">Dinamikus mező kölcsönhatása az előtétprogram-modulokkal</a></li>
<li class="toctree-l3"><a class="reference internal" href="dynamic-fields-extend-options.html">Hogyan lehet kiterjeszteni a dinamikus mezőket</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Egy új dinamikus mező létrehozása</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#dynamic-field-password-files">Dinamikus mező jelszó fájlok</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="dynamic-fields-extend.html">Egy dinamikus mező funkcionalitás kiterjesztés létrehozása</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ticket-postmaster-modules.html">Jegy levelezési modul</a></li>
<li class="toctree-l3"><a class="reference internal" href="../process-management-modules.html">Folyamatkezelés</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../how-to-publish-otrs-extensions.html">Hogyan tehetők közzé az OTRS kiterjesztések</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../documentation.html">Dokumentáció</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../contributing.html">Közreműködés az OTRS-ben</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../additional-resources.html">További erőforrások</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">OTRS Developer Manual</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../../../how-to-extend-otrs.html">Hogyan bővíthető az OTRS</a> &raquo;</li>
        
          <li><a href="../../otrs-module-layers.html">Az OTRS modulrétegek erejének használata</a> &raquo;</li>
        
      <li>Egy új dinamikus mező létrehozása</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            
              <a href="https://github.com/OTRS/doc-developer/blob/rel-7_0/content/how-to-extend-otrs/otrs-module-layers/dynamic-fields/dynamic-fields-new-field.rst" class="fa fa-github"> Edit on GitHub</a>
            
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="creating-a-new-dynamic-field">
<h1>Egy új dinamikus mező létrehozása<a class="headerlink" href="#creating-a-new-dynamic-field" title="Hivatkozás erre a fejezetcímre">¶</a></h1>
<p>A folyamat bemutatásához egy új <em>Jelszó</em> dinamikus mező lesz létrehozva. Ez az új dinamikus mező típus egy új jelszómezőt fog megjeleníteni a jegy és a bejegyzés objektumokhoz. Mivel nagyon hasonló egy szöveg dinamikus mezőhöz, ezért a <code class="docutils literal notranslate"><span class="pre">Base</span></code> és a <code class="docutils literal notranslate"><span class="pre">BaseText</span></code> illesztőprogramokat fogjuk használni alapként ezen új mező felépítéséhez.</p>
<div class="admonition warning">
<p class="first admonition-title">Figyelem</p>
<p class="last">Az új jelszómező megvalósítása csak oktatási célokra van, nem biztosít semmilyen biztonsági szintet, és nem ajánlott termelési rendszereknél.</p>
</div>
<p>A dinamikus mező létrehozásához négy fájlt fogunk létrehozni:</p>
<ol class="arabic simple">
<li>Egy beállítófájlt (XML) a modulok regisztrálásához.</li>
<li>Egy adminisztrátori párbeszédablak modult (Perl) a mezőlehetőségek beállításához.</li>
<li>Egy sablonmodult az adminisztrátori párbeszédablakhoz.</li>
<li>Egy dinamikus mező illesztőprogramot (Perl).</li>
</ol>
<p>Fájlszerkezet:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$HOME (e. g. /opt/otrs/)
|
...
|--/Kernel/
|   |--/Config/
|   |   |--/Files/
|   |   |   |--/XML/
|   |   |   |   |DynamicFieldPassword.xml
...
|   |--/Modules/
|   |   |AdminDynamicFieldPassword.pm
...
|   |--/Output/
|   |   |--/HTML/
|   |   |   |--/Standard/
|   |   |   |   |AdminDynamicFieldPassword.tt
...
|   |--/System/
|   |   |--/DynamicField/
|   |   |   |--/Driver/
|   |   |   |   |Password.pm
...
</pre></div>
</div>
<div class="section" id="dynamic-field-password-files">
<h2>Dinamikus mező jelszó fájlok<a class="headerlink" href="#dynamic-field-password-files" title="Hivatkozás erre a fejezetcímre">¶</a></h2>
<div class="section" id="dynamic-field-configuration-file-example">
<h3>Dinamikus mező beállítófájl példa<a class="headerlink" href="#dynamic-field-configuration-file-example" title="Hivatkozás erre a fejezetcímre">¶</a></h3>
<p>A beállítófájlokat használják a dinamikus mező típusok (illesztőprogram) és az objektumtípus illesztőprogramok regisztrálásához a háttérprogram-objektum számára. Ezek szabványos regisztrációkat is tárolnak az adminisztrátori modulokhoz a keretrendszerben.</p>
<p>Ebben a szakaszban a jelszó dinamikus mezőhöz egy beállítófájl van megjelenítve és elmagyarázva.</p>
<div class="highlight-XML notranslate"><div class="highlight"><pre><span></span><span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot; ?&gt;</span>
<span class="nt">&lt;otrs_config</span> <span class="na">version=</span><span class="s">&quot;2.0&quot;</span> <span class="na">init=</span><span class="s">&quot;Application&quot;</span><span class="nt">&gt;</span>
</pre></div>
</div>
<p>Ez a normál fejléc egy beállítófájlhoz.</p>
<div class="highlight-XML notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;ConfigItem</span> <span class="na">Name=</span><span class="s">&quot;DynamicFields::Driver###Password&quot;</span> <span class="na">Required=</span><span class="s">&quot;0&quot;</span> <span class="na">Valid=</span><span class="s">&quot;1&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;Description</span> <span class="na">Translatable=</span><span class="s">&quot;1&quot;</span><span class="nt">&gt;</span>DynamicField backend registration.<span class="nt">&lt;/Description&gt;</span>
    <span class="nt">&lt;Group&gt;</span>DynamicFieldPassword<span class="nt">&lt;/Group&gt;</span>
    <span class="nt">&lt;SubGroup&gt;</span>DynamicFields::Backend::Registration<span class="nt">&lt;/SubGroup&gt;</span>
    <span class="nt">&lt;Setting&gt;</span>
        <span class="nt">&lt;Hash&gt;</span>
            <span class="nt">&lt;Item</span> <span class="na">Key=</span><span class="s">&quot;DisplayName&quot;</span> <span class="na">Translatable=</span><span class="s">&quot;1&quot;</span><span class="nt">&gt;</span>Password<span class="nt">&lt;/Item&gt;</span>
            <span class="nt">&lt;Item</span> <span class="na">Key=</span><span class="s">&quot;Module&quot;</span><span class="nt">&gt;</span>Kernel::System::DynamicField::Driver::Password<span class="nt">&lt;/Item&gt;</span>
            <span class="nt">&lt;Item</span> <span class="na">Key=</span><span class="s">&quot;ConfigDialog&quot;</span><span class="nt">&gt;</span>AdminDynamicFieldPassword<span class="nt">&lt;/Item&gt;</span>
        <span class="nt">&lt;/Hash&gt;</span>
    <span class="nt">&lt;/Setting&gt;</span>
<span class="nt">&lt;/ConfigItem&gt;</span>
</pre></div>
</div>
<p>Ez a beállítás regisztrálja a jelszó dinamikus mező illesztőprogramot a háttérprogram-modulhoz, így az felvehető az elérhető dinamikus mezők típusainak listájába. A saját adminisztrátori párbeszédablakát is meghatározza a <code class="docutils literal notranslate"><span class="pre">ConfigDialog</span></code> kulcsban. Ezt a kulcsot a fő dinamikus mező adminisztrátori modul használja ennek az új dinamikus mező típusának a kezeléséhez.</p>
<div class="highlight-XML notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;ConfigItem</span> <span class="na">Name=</span><span class="s">&quot;Frontend::Module###AdminDynamicFieldPassword&quot;</span> <span class="na">Required=</span><span class="s">&quot;0&quot;</span> <span class="na">Valid=</span><span class="s">&quot;1&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;Description</span> <span class="na">Translatable=</span><span class="s">&quot;1&quot;</span><span class="nt">&gt;</span>Frontend module registration for the agent interface.<span class="nt">&lt;/Description&gt;</span>
    <span class="nt">&lt;Group&gt;</span>DynamicFieldPassword<span class="nt">&lt;/Group&gt;</span>
    <span class="nt">&lt;SubGroup&gt;</span>Frontend::Admin::ModuleRegistration<span class="nt">&lt;/SubGroup&gt;</span>
    <span class="nt">&lt;Setting&gt;</span>
        <span class="nt">&lt;FrontendModuleReg&gt;</span>
            <span class="nt">&lt;Group&gt;</span>admin<span class="nt">&lt;/Group&gt;</span>
            <span class="nt">&lt;Description&gt;</span>Admin<span class="nt">&lt;/Description&gt;</span>
            <span class="nt">&lt;Title</span> <span class="na">Translatable=</span><span class="s">&quot;1&quot;</span><span class="nt">&gt;</span>Dynamic Fields Text Backend GUI<span class="nt">&lt;/Title&gt;</span>
            <span class="nt">&lt;Loader&gt;</span>
                <span class="nt">&lt;JavaScript&gt;</span>Core.Agent.Admin.DynamicField.js<span class="nt">&lt;/JavaScript&gt;</span>
            <span class="nt">&lt;/Loader&gt;</span>
        <span class="nt">&lt;/FrontendModuleReg&gt;</span>
    <span class="nt">&lt;/Setting&gt;</span>
<span class="nt">&lt;/ConfigItem&gt;</span>
</pre></div>
</div>
<p>Ez egy szabványos modulregisztráció a jelszó adminisztrátori párbeszédablakhoz az adminisztrátori felületen.</p>
<div class="highlight-XML notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;/otrs_config&gt;</span>
</pre></div>
</div>
<p>Egy beállítófájl szabványos lezárása.</p>
</div>
<div class="section" id="dynamic-field-admin-dialog-example">
<h3>Dinamikus mező adminisztrátori párbeszédablak példa<a class="headerlink" href="#dynamic-field-admin-dialog-example" title="Hivatkozás erre a fejezetcímre">¶</a></h3>
<p>Az adminisztrátori párbeszédablakok szabványos adminisztrátori modulok a dinamikus mezők kezeléséhez (hozzáadás vagy szerkesztés).</p>
<p>Ebben a szakaszban a jelszó dinamikus mezőhöz egy adminisztrátori párbeszédablak van megjelenítve és elmagyarázva.</p>
<div class="highlight-Perl notranslate"><div class="highlight"><pre><span></span><span class="c1"># --</span>
<span class="c1"># Copyright (C) 2001-2020 OTRS AG, https://otrs.com/</span>
<span class="c1"># --</span>
<span class="c1"># This software comes with ABSOLUTELY NO WARRANTY. For details, see</span>
<span class="c1"># the enclosed file COPYING for license information (GPL). If you</span>
<span class="c1"># did not receive this file, see https://www.gnu.org/licenses/gpl-3.0.txt.</span>
<span class="c1"># --</span>

<span class="k">package</span> <span class="nn">Kernel::Modules::AdminDynamicFieldPassword</span><span class="p">;</span>

<span class="k">use</span> <span class="nn">strict</span><span class="p">;</span>
<span class="k">use</span> <span class="nn">warnings</span><span class="p">;</span>

<span class="k">use</span> <span class="nn">Kernel::System::VariableCheck</span> <span class="sx">qw(:all)</span><span class="p">;</span>
<span class="k">use</span> <span class="nn">Kernel::System::Valid</span><span class="p">;</span>
<span class="k">use</span> <span class="nn">Kernel::System::CheckItem</span><span class="p">;</span>
<span class="k">use</span> <span class="nn">Kernel::System::DynamicField</span><span class="p">;</span>
</pre></div>
</div>
<p>Ez egy gyakori fejléc, amely megtalálható a szokásos OTRS modulokban. Az osztály/csomag neve a <code class="docutils literal notranslate"><span class="pre">package</span></code> kulcsszón keresztül van deklarálva.</p>
<div class="highlight-Perl notranslate"><div class="highlight"><pre><span></span><span class="k">sub</span> <span class="nf">new</span> <span class="p">{</span>
    <span class="k">my</span> <span class="p">(</span> <span class="nv">$Type</span><span class="p">,</span> <span class="nv">%Param</span> <span class="p">)</span> <span class="o">=</span> <span class="nv">@_</span><span class="p">;</span>

    <span class="k">my</span> <span class="nv">$Self</span> <span class="o">=</span> <span class="p">{</span><span class="nv">%Param</span><span class="p">};</span>
    <span class="nb">bless</span><span class="p">(</span> <span class="nv">$Self</span><span class="p">,</span> <span class="nv">$Type</span> <span class="p">);</span>

    <span class="k">for</span> <span class="p">(</span><span class="sx">qw(ParamObject LayoutObject LogObject ConfigObject)</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nv">$Self</span><span class="o">-&gt;</span><span class="p">{</span><span class="nv">$_</span><span class="p">}</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nv">$Self</span><span class="o">-&gt;</span><span class="p">{</span><span class="n">LayoutObject</span><span class="p">}</span><span class="o">-&gt;</span><span class="n">FatalError</span><span class="p">(</span> <span class="n">Message</span> <span class="o">=&gt;</span> <span class="s">&quot;Got no $_!&quot;</span> <span class="p">);</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="c1"># create additional objects</span>
    <span class="nv">$Self</span><span class="o">-&gt;</span><span class="p">{</span><span class="n">ValidObject</span><span class="p">}</span> <span class="o">=</span> <span class="nn">Kernel::System::Valid</span><span class="o">-&gt;</span><span class="k">new</span><span class="p">(</span> <span class="nv">%</span><span class="p">{</span><span class="nv">$Self</span><span class="p">}</span> <span class="p">);</span>

    <span class="nv">$Self</span><span class="o">-&gt;</span><span class="p">{</span><span class="n">DynamicFieldObject</span><span class="p">}</span> <span class="o">=</span> <span class="nn">Kernel::System::DynamicField</span><span class="o">-&gt;</span><span class="k">new</span><span class="p">(</span> <span class="nv">%</span><span class="p">{</span><span class="nv">$Self</span><span class="p">}</span> <span class="p">);</span>

    <span class="c1"># get configured object types</span>
    <span class="nv">$Self</span><span class="o">-&gt;</span><span class="p">{</span><span class="n">ObjectTypeConfig</span><span class="p">}</span> <span class="o">=</span> <span class="nv">$Self</span><span class="o">-&gt;</span><span class="p">{</span><span class="n">ConfigObject</span><span class="p">}</span><span class="o">-&gt;</span><span class="n">Get</span><span class="p">(</span><span class="s">&#39;DynamicFields::ObjectType&#39;</span><span class="p">);</span>

    <span class="c1"># get the fields config</span>
    <span class="nv">$Self</span><span class="o">-&gt;</span><span class="p">{</span><span class="n">FieldTypeConfig</span><span class="p">}</span> <span class="o">=</span> <span class="nv">$Self</span><span class="o">-&gt;</span><span class="p">{</span><span class="n">ConfigObject</span><span class="p">}</span><span class="o">-&gt;</span><span class="n">Get</span><span class="p">(</span><span class="s">&#39;DynamicFields::Backend&#39;</span><span class="p">)</span> <span class="o">||</span> <span class="p">{};</span>

    <span class="nv">$Self</span><span class="o">-&gt;</span><span class="p">{</span><span class="n">DefaultValueMask</span><span class="p">}</span> <span class="o">=</span> <span class="s">&#39;****&#39;</span><span class="p">;</span>
    <span class="k">return</span> <span class="nv">$Self</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>A <code class="docutils literal notranslate"><span class="pre">new</span></code> konstruktor hozza létre az osztály új példányát. A kódolási irányelvek szerint más osztályoknak azon objektumait kell a <code class="docutils literal notranslate"><span class="pre">new</span></code> konstruktorban létrehozni, amelyek ebben a modulban szükségesek.</p>
<div class="highlight-Perl notranslate"><div class="highlight"><pre><span></span><span class="k">sub</span> <span class="nf">Run</span> <span class="p">{</span>
    <span class="k">my</span> <span class="p">(</span> <span class="nv">$Self</span><span class="p">,</span> <span class="nv">%Param</span> <span class="p">)</span> <span class="o">=</span> <span class="nv">@_</span><span class="p">;</span>

    <span class="k">if</span> <span class="p">(</span> <span class="nv">$Self</span><span class="o">-&gt;</span><span class="p">{</span><span class="n">Subaction</span><span class="p">}</span> <span class="ow">eq</span> <span class="s">&#39;Add&#39;</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nv">$Self</span><span class="o">-&gt;</span><span class="n">_Add</span><span class="p">(</span>
            <span class="nv">%Param</span><span class="p">,</span>
        <span class="p">);</span>
    <span class="p">}</span>
    <span class="k">elsif</span> <span class="p">(</span> <span class="nv">$Self</span><span class="o">-&gt;</span><span class="p">{</span><span class="n">Subaction</span><span class="p">}</span> <span class="ow">eq</span> <span class="s">&#39;AddAction&#39;</span> <span class="p">)</span> <span class="p">{</span>

        <span class="c1"># challenge token check for write action</span>
        <span class="nv">$Self</span><span class="o">-&gt;</span><span class="p">{</span><span class="n">LayoutObject</span><span class="p">}</span><span class="o">-&gt;</span><span class="n">ChallengeTokenCheck</span><span class="p">();</span>

        <span class="k">return</span> <span class="nv">$Self</span><span class="o">-&gt;</span><span class="n">_AddAction</span><span class="p">(</span>
            <span class="nv">%Param</span><span class="p">,</span>
        <span class="p">);</span>
    <span class="p">}</span>
    <span class="k">if</span> <span class="p">(</span> <span class="nv">$Self</span><span class="o">-&gt;</span><span class="p">{</span><span class="n">Subaction</span><span class="p">}</span> <span class="ow">eq</span> <span class="s">&#39;Change&#39;</span> <span class="p">)</span> <span class="p">{</span>

        <span class="k">return</span> <span class="nv">$Self</span><span class="o">-&gt;</span><span class="n">_Change</span><span class="p">(</span>
            <span class="nv">%Param</span><span class="p">,</span>
        <span class="p">);</span>
    <span class="p">}</span>
    <span class="k">elsif</span> <span class="p">(</span> <span class="nv">$Self</span><span class="o">-&gt;</span><span class="p">{</span><span class="n">Subaction</span><span class="p">}</span> <span class="ow">eq</span> <span class="s">&#39;ChangeAction&#39;</span> <span class="p">)</span> <span class="p">{</span>

        <span class="c1"># challenge token check for write action</span>
        <span class="nv">$Self</span><span class="o">-&gt;</span><span class="p">{</span><span class="n">LayoutObject</span><span class="p">}</span><span class="o">-&gt;</span><span class="n">ChallengeTokenCheck</span><span class="p">();</span>

        <span class="k">return</span> <span class="nv">$Self</span><span class="o">-&gt;</span><span class="n">_ChangeAction</span><span class="p">(</span>
            <span class="nv">%Param</span><span class="p">,</span>
        <span class="p">);</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="nv">$Self</span><span class="o">-&gt;</span><span class="p">{</span><span class="n">LayoutObject</span><span class="p">}</span><span class="o">-&gt;</span><span class="n">ErrorScreen</span><span class="p">(</span>
        <span class="n">Message</span> <span class="o">=&gt;</span> <span class="s">&quot;Undefined subaction.&quot;</span><span class="p">,</span>
    <span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
<p>A <code class="docutils literal notranslate"><span class="pre">Run</span></code> a webkérés által meghívott alapértelmezett függvény. Megpróbáljuk ezt a függvényt annyira egyszerűvé tenni, amennyire csak lehetséges, és lehetővé tenni a segítő függvényeknek a kemény munka elvégzését.</p>
<div class="highlight-Perl notranslate"><div class="highlight"><pre><span></span><span class="k">sub</span> <span class="nf">_Add</span> <span class="p">{</span>
    <span class="k">my</span> <span class="p">(</span> <span class="nv">$Self</span><span class="p">,</span> <span class="nv">%Param</span> <span class="p">)</span> <span class="o">=</span> <span class="nv">@_</span><span class="p">;</span>

    <span class="k">my</span> <span class="nv">%GetParam</span><span class="p">;</span>
    <span class="k">for</span> <span class="k">my</span> <span class="nv">$Needed</span> <span class="p">(</span><span class="sx">qw(ObjectType FieldType FieldOrder)</span><span class="p">)</span> <span class="p">{</span>
        <span class="nv">$GetParam</span><span class="p">{</span><span class="nv">$Needed</span><span class="p">}</span> <span class="o">=</span> <span class="nv">$Self</span><span class="o">-&gt;</span><span class="p">{</span><span class="n">ParamObject</span><span class="p">}</span><span class="o">-&gt;</span><span class="n">GetParam</span><span class="p">(</span> <span class="n">Param</span> <span class="o">=&gt;</span> <span class="nv">$Needed</span> <span class="p">);</span>
        <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nv">$Needed</span> <span class="p">)</span> <span class="p">{</span>

            <span class="k">return</span> <span class="nv">$Self</span><span class="o">-&gt;</span><span class="p">{</span><span class="n">LayoutObject</span><span class="p">}</span><span class="o">-&gt;</span><span class="n">ErrorScreen</span><span class="p">(</span>
                <span class="n">Message</span> <span class="o">=&gt;</span> <span class="s">&quot;Need $Needed&quot;</span><span class="p">,</span>
            <span class="p">);</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="c1"># get the object type and field type display name</span>
    <span class="k">my</span> <span class="nv">$ObjectTypeName</span> <span class="o">=</span> <span class="nv">$Self</span><span class="o">-&gt;</span><span class="p">{</span><span class="n">ObjectTypeConfig</span><span class="p">}</span><span class="o">-&gt;</span><span class="p">{</span> <span class="nv">$GetParam</span><span class="p">{</span><span class="n">ObjectType</span><span class="p">}</span> <span class="p">}</span><span class="o">-&gt;</span><span class="p">{</span><span class="n">DisplayName</span><span class="p">}</span> <span class="o">||</span> <span class="s">&#39;&#39;</span><span class="p">;</span>
    <span class="k">my</span> <span class="nv">$FieldTypeName</span>  <span class="o">=</span> <span class="nv">$Self</span><span class="o">-&gt;</span><span class="p">{</span><span class="n">FieldTypeConfig</span><span class="p">}</span><span class="o">-&gt;</span><span class="p">{</span> <span class="nv">$GetParam</span><span class="p">{</span><span class="n">FieldType</span><span class="p">}</span> <span class="p">}</span><span class="o">-&gt;</span><span class="p">{</span><span class="n">DisplayName</span><span class="p">}</span>   <span class="o">||</span> <span class="s">&#39;&#39;</span><span class="p">;</span>

    <span class="k">return</span> <span class="nv">$Self</span><span class="o">-&gt;</span><span class="n">_ShowScreen</span><span class="p">(</span>
        <span class="nv">%Param</span><span class="p">,</span>
        <span class="nv">%GetParam</span><span class="p">,</span>
        <span class="n">Mode</span>           <span class="o">=&gt;</span> <span class="s">&#39;Add&#39;</span><span class="p">,</span>
        <span class="n">ObjectTypeName</span> <span class="o">=&gt;</span> <span class="nv">$ObjectTypeName</span><span class="p">,</span>
        <span class="n">FieldTypeName</span>  <span class="o">=&gt;</span> <span class="nv">$FieldTypeName</span><span class="p">,</span>
    <span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Az <code class="docutils literal notranslate"><span class="pre">_Add</span></code> függvény is nagyon egyszerű, csak lekér néhány paramétert a webkérésből, és meghívja a <code class="docutils literal notranslate"><span class="pre">_ShowScreen()</span></code> függvényt. Normális esetben ezt a függvényt nem szükséges módosítani.</p>
<div class="highlight-Perl notranslate"><div class="highlight"><pre><span></span><span class="k">sub</span> <span class="nf">_AddAction</span> <span class="p">{</span>
    <span class="k">my</span> <span class="p">(</span> <span class="nv">$Self</span><span class="p">,</span> <span class="nv">%Param</span> <span class="p">)</span> <span class="o">=</span> <span class="nv">@_</span><span class="p">;</span>

    <span class="k">my</span> <span class="nv">%Errors</span><span class="p">;</span>
    <span class="k">my</span> <span class="nv">%GetParam</span><span class="p">;</span>

    <span class="k">for</span> <span class="k">my</span> <span class="nv">$Needed</span> <span class="p">(</span><span class="sx">qw(Name Label FieldOrder)</span><span class="p">)</span> <span class="p">{</span>
        <span class="nv">$GetParam</span><span class="p">{</span><span class="nv">$Needed</span><span class="p">}</span> <span class="o">=</span> <span class="nv">$Self</span><span class="o">-&gt;</span><span class="p">{</span><span class="n">ParamObject</span><span class="p">}</span><span class="o">-&gt;</span><span class="n">GetParam</span><span class="p">(</span> <span class="n">Param</span> <span class="o">=&gt;</span> <span class="nv">$Needed</span> <span class="p">);</span>
        <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nv">$GetParam</span><span class="p">{</span><span class="nv">$Needed</span><span class="p">}</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nv">$Errors</span><span class="p">{</span> <span class="nv">$Needed</span> <span class="o">.</span> <span class="s">&#39;ServerError&#39;</span> <span class="p">}</span>        <span class="o">=</span> <span class="s">&#39;ServerError&#39;</span><span class="p">;</span>
            <span class="nv">$Errors</span><span class="p">{</span> <span class="nv">$Needed</span> <span class="o">.</span> <span class="s">&#39;ServerErrorMessage&#39;</span> <span class="p">}</span> <span class="o">=</span> <span class="s">&#39;This field is required.&#39;</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span> <span class="nv">$GetParam</span><span class="p">{</span><span class="n">Name</span><span class="p">}</span> <span class="p">)</span> <span class="p">{</span>

        <span class="c1"># check if name is alphanumeric</span>
        <span class="k">if</span> <span class="p">(</span> <span class="nv">$GetParam</span><span class="p">{</span><span class="n">Name</span><span class="p">}</span> <span class="o">!~</span> <span class="sr">m{\A ( ?: [a-zA-Z] | \d )+ \z}xms</span> <span class="p">)</span> <span class="p">{</span>

            <span class="c1"># add server error error class</span>
            <span class="nv">$Errors</span><span class="p">{</span><span class="n">NameServerError</span><span class="p">}</span> <span class="o">=</span> <span class="s">&#39;ServerError&#39;</span><span class="p">;</span>
            <span class="nv">$Errors</span><span class="p">{</span><span class="n">NameServerErrorMessage</span><span class="p">}</span> <span class="o">=</span>
                <span class="s">&#39;The field does not contain only ASCII letters and numbers.&#39;</span><span class="p">;</span>
        <span class="p">}</span>

        <span class="c1"># check if name is duplicated</span>
        <span class="k">my</span> <span class="nv">%DynamicFieldsList</span> <span class="o">=</span> <span class="nv">%</span><span class="p">{</span>
            <span class="nv">$Self</span><span class="o">-&gt;</span><span class="p">{</span><span class="n">DynamicFieldObject</span><span class="p">}</span><span class="o">-&gt;</span><span class="n">DynamicFieldList</span><span class="p">(</span>
                <span class="n">Valid</span>      <span class="o">=&gt;</span> <span class="mi">0</span><span class="p">,</span>
                <span class="n">ResultType</span> <span class="o">=&gt;</span> <span class="s">&#39;HASH&#39;</span><span class="p">,</span>
                <span class="p">)</span>
        <span class="p">};</span>

        <span class="nv">%DynamicFieldsList</span> <span class="o">=</span> <span class="nb">reverse</span> <span class="nv">%DynamicFieldsList</span><span class="p">;</span>

        <span class="k">if</span> <span class="p">(</span> <span class="nv">$DynamicFieldsList</span><span class="p">{</span> <span class="nv">$GetParam</span><span class="p">{</span><span class="n">Name</span><span class="p">}</span> <span class="p">}</span> <span class="p">)</span> <span class="p">{</span>

            <span class="c1"># add server error error class</span>
            <span class="nv">$Errors</span><span class="p">{</span><span class="n">NameServerError</span><span class="p">}</span>        <span class="o">=</span> <span class="s">&#39;ServerError&#39;</span><span class="p">;</span>
            <span class="nv">$Errors</span><span class="p">{</span><span class="n">NameServerErrorMessage</span><span class="p">}</span> <span class="o">=</span> <span class="s">&#39;There is another field with the same name.&#39;</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span> <span class="nv">$GetParam</span><span class="p">{</span><span class="n">FieldOrder</span><span class="p">}</span> <span class="p">)</span> <span class="p">{</span>

        <span class="c1"># check if field order is numeric and positive</span>
        <span class="k">if</span> <span class="p">(</span> <span class="nv">$GetParam</span><span class="p">{</span><span class="n">FieldOrder</span><span class="p">}</span> <span class="o">!~</span> <span class="sr">m{\A ( ?: \d )+ \z}xms</span> <span class="p">)</span> <span class="p">{</span>

            <span class="c1"># add server error error class</span>
            <span class="nv">$Errors</span><span class="p">{</span><span class="n">FieldOrderServerError</span><span class="p">}</span>        <span class="o">=</span> <span class="s">&#39;ServerError&#39;</span><span class="p">;</span>
            <span class="nv">$Errors</span><span class="p">{</span><span class="n">FieldOrderServerErrorMessage</span><span class="p">}</span> <span class="o">=</span> <span class="s">&#39;The field must be numeric.&#39;</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="k">for</span> <span class="k">my</span> <span class="nv">$ConfigParam</span> <span class="p">(</span>
        <span class="sx">qw(</span>
<span class="sx">        ObjectType ObjectTypeName FieldType FieldTypeName DefaultValue ValidID ShowValue</span>
<span class="sx">        ValueMask</span>
<span class="sx">        )</span>
        <span class="p">)</span>
    <span class="p">{</span>
        <span class="nv">$GetParam</span><span class="p">{</span><span class="nv">$ConfigParam</span><span class="p">}</span> <span class="o">=</span> <span class="nv">$Self</span><span class="o">-&gt;</span><span class="p">{</span><span class="n">ParamObject</span><span class="p">}</span><span class="o">-&gt;</span><span class="n">GetParam</span><span class="p">(</span> <span class="n">Param</span> <span class="o">=&gt;</span> <span class="nv">$ConfigParam</span> <span class="p">);</span>
    <span class="p">}</span>

    <span class="c1"># uncorrectable errors</span>
    <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nv">$GetParam</span><span class="p">{</span><span class="n">ValidID</span><span class="p">}</span> <span class="p">)</span> <span class="p">{</span>

        <span class="k">return</span> <span class="nv">$Self</span><span class="o">-&gt;</span><span class="p">{</span><span class="n">LayoutObject</span><span class="p">}</span><span class="o">-&gt;</span><span class="n">ErrorScreen</span><span class="p">(</span>
            <span class="n">Message</span> <span class="o">=&gt;</span> <span class="s">&quot;Need ValidID&quot;</span><span class="p">,</span>
        <span class="p">);</span>
    <span class="p">}</span>

    <span class="c1"># return to add screen if errors</span>
    <span class="k">if</span> <span class="p">(</span><span class="nv">%Errors</span><span class="p">)</span> <span class="p">{</span>

        <span class="k">return</span> <span class="nv">$Self</span><span class="o">-&gt;</span><span class="n">_ShowScreen</span><span class="p">(</span>
            <span class="nv">%Param</span><span class="p">,</span>
            <span class="nv">%Errors</span><span class="p">,</span>
            <span class="nv">%GetParam</span><span class="p">,</span>
            <span class="n">Mode</span> <span class="o">=&gt;</span> <span class="s">&#39;Add&#39;</span><span class="p">,</span>
        <span class="p">);</span>
    <span class="p">}</span>

    <span class="c1"># set specific config</span>
    <span class="k">my</span> <span class="nv">$FieldConfig</span> <span class="o">=</span> <span class="p">{</span>
        <span class="n">DefaultValue</span> <span class="o">=&gt;</span> <span class="nv">$GetParam</span><span class="p">{</span><span class="n">DefaultValue</span><span class="p">},</span>
        <span class="n">ShowValue</span>    <span class="o">=&gt;</span> <span class="nv">$GetParam</span><span class="p">{</span><span class="n">ShowValue</span><span class="p">},</span>
        <span class="n">ValueMask</span>    <span class="o">=&gt;</span> <span class="nv">$GetParam</span><span class="p">{</span><span class="n">ValueMask</span><span class="p">}</span> <span class="o">||</span> <span class="nv">$Self</span><span class="o">-&gt;</span><span class="p">{</span><span class="n">DefaultValueMask</span><span class="p">},</span>
    <span class="p">};</span>

    <span class="c1"># create a new field</span>
    <span class="k">my</span> <span class="nv">$FieldID</span> <span class="o">=</span> <span class="nv">$Self</span><span class="o">-&gt;</span><span class="p">{</span><span class="n">DynamicFieldObject</span><span class="p">}</span><span class="o">-&gt;</span><span class="n">DynamicFieldAdd</span><span class="p">(</span>
        <span class="n">Name</span>       <span class="o">=&gt;</span> <span class="nv">$GetParam</span><span class="p">{</span><span class="n">Name</span><span class="p">},</span>
        <span class="n">Label</span>      <span class="o">=&gt;</span> <span class="nv">$GetParam</span><span class="p">{</span><span class="n">Label</span><span class="p">},</span>
        <span class="n">FieldOrder</span> <span class="o">=&gt;</span> <span class="nv">$GetParam</span><span class="p">{</span><span class="n">FieldOrder</span><span class="p">},</span>
        <span class="n">FieldType</span>  <span class="o">=&gt;</span> <span class="nv">$GetParam</span><span class="p">{</span><span class="n">FieldType</span><span class="p">},</span>
        <span class="n">ObjectType</span> <span class="o">=&gt;</span> <span class="nv">$GetParam</span><span class="p">{</span><span class="n">ObjectType</span><span class="p">},</span>
        <span class="n">Config</span>     <span class="o">=&gt;</span> <span class="nv">$FieldConfig</span><span class="p">,</span>
        <span class="n">ValidID</span>    <span class="o">=&gt;</span> <span class="nv">$GetParam</span><span class="p">{</span><span class="n">ValidID</span><span class="p">},</span>
        <span class="n">UserID</span>     <span class="o">=&gt;</span> <span class="nv">$Self</span><span class="o">-&gt;</span><span class="p">{</span><span class="n">UserID</span><span class="p">},</span>
    <span class="p">);</span>

    <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nv">$FieldID</span> <span class="p">)</span> <span class="p">{</span>

        <span class="k">return</span> <span class="nv">$Self</span><span class="o">-&gt;</span><span class="p">{</span><span class="n">LayoutObject</span><span class="p">}</span><span class="o">-&gt;</span><span class="n">ErrorScreen</span><span class="p">(</span>
            <span class="n">Message</span> <span class="o">=&gt;</span> <span class="s">&quot;Could not create the new field&quot;</span><span class="p">,</span>
        <span class="p">);</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="nv">$Self</span><span class="o">-&gt;</span><span class="p">{</span><span class="n">LayoutObject</span><span class="p">}</span><span class="o">-&gt;</span><span class="n">Redirect</span><span class="p">(</span>
        <span class="n">OP</span> <span class="o">=&gt;</span> <span class="s">&quot;Action=AdminDynamicField&quot;</span><span class="p">,</span>
    <span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Az <code class="docutils literal notranslate"><span class="pre">_AddAction</span></code> függvény kéri le a beállítási paramétereket egy új dinamikus mezőből, és ellenőrzi, hogy a dinamikus mező neve csak betűket és számokat tartalmaz-e. Ez a függvény képes ellenőrizni bármilyen egyéb paramétert is.</p>
<p>A <code class="docutils literal notranslate"><span class="pre">Name</span></code>, <code class="docutils literal notranslate"><span class="pre">Label</span></code>, <code class="docutils literal notranslate"><span class="pre">FieldOrder</span></code>, <code class="docutils literal notranslate"><span class="pre">Validity</span></code> közös paraméterek az összes dinamikus mezőnél, és ezek kötelezők. Minden egyes dinamikus mezőnek megvan a saját különleges beállítása, amelynek tartalmaznia kell legalább a <code class="docutils literal notranslate"><span class="pre">DefaultValue</span></code> paramétert. Ebben az esetben a <code class="docutils literal notranslate"><span class="pre">ShowValue</span></code> és a <code class="docutils literal notranslate"><span class="pre">ValueMask</span></code> paraméterekkel is rendelkezik a jelszómezőnél.</p>
<p>Ha a mező rendelkezik egy rögzített listájú értékek tárolásának képességével, akkor azokat a <code class="docutils literal notranslate"><span class="pre">PossibleValues</span></code> paraméterben kell tárolni a különleges beállítási kivonaton belül.</p>
<p>Mint más adminisztrátori modulokban, ha egy paraméter nem érvényes, akkor ez a függvény visszatér a hozzáadás képernyőre, kiemelve a hibás űrlapmezőket.</p>
<p>Ha az összes paraméter helyes, akkor létrehoz egy új dinamikus mezőt.</p>
<div class="highlight-Perl notranslate"><div class="highlight"><pre><span></span><span class="k">sub</span> <span class="nf">_Change</span> <span class="p">{</span>
    <span class="k">my</span> <span class="p">(</span> <span class="nv">$Self</span><span class="p">,</span> <span class="nv">%Param</span> <span class="p">)</span> <span class="o">=</span> <span class="nv">@_</span><span class="p">;</span>

    <span class="k">my</span> <span class="nv">%GetParam</span><span class="p">;</span>
    <span class="k">for</span> <span class="k">my</span> <span class="nv">$Needed</span> <span class="p">(</span><span class="sx">qw(ObjectType FieldType)</span><span class="p">)</span> <span class="p">{</span>
        <span class="nv">$GetParam</span><span class="p">{</span><span class="nv">$Needed</span><span class="p">}</span> <span class="o">=</span> <span class="nv">$Self</span><span class="o">-&gt;</span><span class="p">{</span><span class="n">ParamObject</span><span class="p">}</span><span class="o">-&gt;</span><span class="n">GetParam</span><span class="p">(</span> <span class="n">Param</span> <span class="o">=&gt;</span> <span class="nv">$Needed</span> <span class="p">);</span>
        <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nv">$Needed</span> <span class="p">)</span> <span class="p">{</span>

            <span class="k">return</span> <span class="nv">$Self</span><span class="o">-&gt;</span><span class="p">{</span><span class="n">LayoutObject</span><span class="p">}</span><span class="o">-&gt;</span><span class="n">ErrorScreen</span><span class="p">(</span>
                <span class="n">Message</span> <span class="o">=&gt;</span> <span class="s">&quot;Need $Needed&quot;</span><span class="p">,</span>
            <span class="p">);</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="c1"># get the object type and field type display name</span>
    <span class="k">my</span> <span class="nv">$ObjectTypeName</span> <span class="o">=</span> <span class="nv">$Self</span><span class="o">-&gt;</span><span class="p">{</span><span class="n">ObjectTypeConfig</span><span class="p">}</span><span class="o">-&gt;</span><span class="p">{</span> <span class="nv">$GetParam</span><span class="p">{</span><span class="n">ObjectType</span><span class="p">}</span> <span class="p">}</span><span class="o">-&gt;</span><span class="p">{</span><span class="n">DisplayName</span><span class="p">}</span> <span class="o">||</span> <span class="s">&#39;&#39;</span><span class="p">;</span>
    <span class="k">my</span> <span class="nv">$FieldTypeName</span>  <span class="o">=</span> <span class="nv">$Self</span><span class="o">-&gt;</span><span class="p">{</span><span class="n">FieldTypeConfig</span><span class="p">}</span><span class="o">-&gt;</span><span class="p">{</span> <span class="nv">$GetParam</span><span class="p">{</span><span class="n">FieldType</span><span class="p">}</span> <span class="p">}</span><span class="o">-&gt;</span><span class="p">{</span><span class="n">DisplayName</span><span class="p">}</span>   <span class="o">||</span> <span class="s">&#39;&#39;</span><span class="p">;</span>

    <span class="k">my</span> <span class="nv">$FieldID</span> <span class="o">=</span> <span class="nv">$Self</span><span class="o">-&gt;</span><span class="p">{</span><span class="n">ParamObject</span><span class="p">}</span><span class="o">-&gt;</span><span class="n">GetParam</span><span class="p">(</span> <span class="n">Param</span> <span class="o">=&gt;</span> <span class="s">&#39;ID&#39;</span> <span class="p">);</span>

    <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nv">$FieldID</span> <span class="p">)</span> <span class="p">{</span>

        <span class="k">return</span> <span class="nv">$Self</span><span class="o">-&gt;</span><span class="p">{</span><span class="n">LayoutObject</span><span class="p">}</span><span class="o">-&gt;</span><span class="n">ErrorScreen</span><span class="p">(</span>
            <span class="n">Message</span> <span class="o">=&gt;</span> <span class="s">&quot;Need ID&quot;</span><span class="p">,</span>
        <span class="p">);</span>
    <span class="p">}</span>

    <span class="c1"># get dynamic field data</span>
    <span class="k">my</span> <span class="nv">$DynamicFieldData</span> <span class="o">=</span> <span class="nv">$Self</span><span class="o">-&gt;</span><span class="p">{</span><span class="n">DynamicFieldObject</span><span class="p">}</span><span class="o">-&gt;</span><span class="n">DynamicFieldGet</span><span class="p">(</span>
        <span class="n">ID</span> <span class="o">=&gt;</span> <span class="nv">$FieldID</span><span class="p">,</span>
    <span class="p">);</span>

    <span class="c1"># check for valid dynamic field configuration</span>
    <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="n">IsHashRefWithData</span><span class="p">(</span><span class="nv">$DynamicFieldData</span><span class="p">)</span> <span class="p">)</span> <span class="p">{</span>

        <span class="k">return</span> <span class="nv">$Self</span><span class="o">-&gt;</span><span class="p">{</span><span class="n">LayoutObject</span><span class="p">}</span><span class="o">-&gt;</span><span class="n">ErrorScreen</span><span class="p">(</span>
            <span class="n">Message</span> <span class="o">=&gt;</span> <span class="s">&quot;Could not get data for dynamic field $FieldID&quot;</span><span class="p">,</span>
        <span class="p">);</span>
    <span class="p">}</span>

    <span class="k">my</span> <span class="nv">%Config</span> <span class="o">=</span> <span class="p">();</span>

    <span class="c1"># extract configuration</span>
    <span class="k">if</span> <span class="p">(</span> <span class="n">IsHashRefWithData</span><span class="p">(</span> <span class="nv">$DynamicFieldData</span><span class="o">-&gt;</span><span class="p">{</span><span class="n">Config</span><span class="p">}</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nv">%Config</span> <span class="o">=</span> <span class="nv">%</span><span class="p">{</span> <span class="nv">$DynamicFieldData</span><span class="o">-&gt;</span><span class="p">{</span><span class="n">Config</span><span class="p">}</span> <span class="p">};</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="nv">$Self</span><span class="o">-&gt;</span><span class="n">_ShowScreen</span><span class="p">(</span>
        <span class="nv">%Param</span><span class="p">,</span>
        <span class="nv">%GetParam</span><span class="p">,</span>
        <span class="nv">%$</span><span class="p">{</span><span class="n">DynamicFieldData</span><span class="p">},</span>
        <span class="nv">%Config</span><span class="p">,</span>
        <span class="n">ID</span>             <span class="o">=&gt;</span> <span class="nv">$FieldID</span><span class="p">,</span>
        <span class="n">Mode</span>           <span class="o">=&gt;</span> <span class="s">&#39;Change&#39;</span><span class="p">,</span>
        <span class="n">ObjectTypeName</span> <span class="o">=&gt;</span> <span class="nv">$ObjectTypeName</span><span class="p">,</span>
        <span class="n">FieldTypeName</span>  <span class="o">=&gt;</span> <span class="nv">$FieldTypeName</span><span class="p">,</span>
    <span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
<p>A <code class="docutils literal notranslate"><span class="pre">_Change</span></code> függvény nagyon hasonló az <code class="docutils literal notranslate"><span class="pre">_Add</span></code> függvényhez, de mivel ezt a függvényt egy meglévő mező szerkesztéséhez használják, ellenőriznie kell a <code class="docutils literal notranslate"><span class="pre">FieldID</span></code> paramétert, és be kell gyűjtenie a jelenlegi dinamikus mező adatait.</p>
<div class="highlight-Perl notranslate"><div class="highlight"><pre><span></span><span class="k">sub</span> <span class="nf">_ChangeAction</span> <span class="p">{</span>
    <span class="k">my</span> <span class="p">(</span> <span class="nv">$Self</span><span class="p">,</span> <span class="nv">%Param</span> <span class="p">)</span> <span class="o">=</span> <span class="nv">@_</span><span class="p">;</span>

    <span class="k">my</span> <span class="nv">%Errors</span><span class="p">;</span>
    <span class="k">my</span> <span class="nv">%GetParam</span><span class="p">;</span>

    <span class="k">for</span> <span class="k">my</span> <span class="nv">$Needed</span> <span class="p">(</span><span class="sx">qw(Name Label FieldOrder)</span><span class="p">)</span> <span class="p">{</span>
        <span class="nv">$GetParam</span><span class="p">{</span><span class="nv">$Needed</span><span class="p">}</span> <span class="o">=</span> <span class="nv">$Self</span><span class="o">-&gt;</span><span class="p">{</span><span class="n">ParamObject</span><span class="p">}</span><span class="o">-&gt;</span><span class="n">GetParam</span><span class="p">(</span> <span class="n">Param</span> <span class="o">=&gt;</span> <span class="nv">$Needed</span> <span class="p">);</span>
        <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nv">$GetParam</span><span class="p">{</span><span class="nv">$Needed</span><span class="p">}</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nv">$Errors</span><span class="p">{</span> <span class="nv">$Needed</span> <span class="o">.</span> <span class="s">&#39;ServerError&#39;</span> <span class="p">}</span>        <span class="o">=</span> <span class="s">&#39;ServerError&#39;</span><span class="p">;</span>
            <span class="nv">$Errors</span><span class="p">{</span> <span class="nv">$Needed</span> <span class="o">.</span> <span class="s">&#39;ServerErrorMessage&#39;</span> <span class="p">}</span> <span class="o">=</span> <span class="s">&#39;This field is required.&#39;</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="k">my</span> <span class="nv">$FieldID</span> <span class="o">=</span> <span class="nv">$Self</span><span class="o">-&gt;</span><span class="p">{</span><span class="n">ParamObject</span><span class="p">}</span><span class="o">-&gt;</span><span class="n">GetParam</span><span class="p">(</span> <span class="n">Param</span> <span class="o">=&gt;</span> <span class="s">&#39;ID&#39;</span> <span class="p">);</span>
    <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nv">$FieldID</span> <span class="p">)</span> <span class="p">{</span>

        <span class="k">return</span> <span class="nv">$Self</span><span class="o">-&gt;</span><span class="p">{</span><span class="n">LayoutObject</span><span class="p">}</span><span class="o">-&gt;</span><span class="n">ErrorScreen</span><span class="p">(</span>
            <span class="n">Message</span> <span class="o">=&gt;</span> <span class="s">&quot;Need ID&quot;</span><span class="p">,</span>
        <span class="p">);</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span> <span class="nv">$GetParam</span><span class="p">{</span><span class="n">Name</span><span class="p">}</span> <span class="p">)</span> <span class="p">{</span>

        <span class="c1"># check if name is lowercase</span>
        <span class="k">if</span> <span class="p">(</span> <span class="nv">$GetParam</span><span class="p">{</span><span class="n">Name</span><span class="p">}</span> <span class="o">!~</span> <span class="sr">m{\A ( ?: [a-zA-Z] | \d )+ \z}xms</span> <span class="p">)</span> <span class="p">{</span>

            <span class="c1"># add server error error class</span>
            <span class="nv">$Errors</span><span class="p">{</span><span class="n">NameServerError</span><span class="p">}</span> <span class="o">=</span> <span class="s">&#39;ServerError&#39;</span><span class="p">;</span>
            <span class="nv">$Errors</span><span class="p">{</span><span class="n">NameServerErrorMessage</span><span class="p">}</span> <span class="o">=</span>
                <span class="s">&#39;The field does not contain only ASCII letters and numbers.&#39;</span><span class="p">;</span>
        <span class="p">}</span>

        <span class="c1"># check if name is duplicated</span>
        <span class="k">my</span> <span class="nv">%DynamicFieldsList</span> <span class="o">=</span> <span class="nv">%</span><span class="p">{</span>
            <span class="nv">$Self</span><span class="o">-&gt;</span><span class="p">{</span><span class="n">DynamicFieldObject</span><span class="p">}</span><span class="o">-&gt;</span><span class="n">DynamicFieldList</span><span class="p">(</span>
                <span class="n">Valid</span>      <span class="o">=&gt;</span> <span class="mi">0</span><span class="p">,</span>
                <span class="n">ResultType</span> <span class="o">=&gt;</span> <span class="s">&#39;HASH&#39;</span><span class="p">,</span>
                <span class="p">)</span>
        <span class="p">};</span>

        <span class="nv">%DynamicFieldsList</span> <span class="o">=</span> <span class="nb">reverse</span> <span class="nv">%DynamicFieldsList</span><span class="p">;</span>

        <span class="k">if</span> <span class="p">(</span>
            <span class="nv">$DynamicFieldsList</span><span class="p">{</span> <span class="nv">$GetParam</span><span class="p">{</span><span class="n">Name</span><span class="p">}</span> <span class="p">}</span> <span class="o">&amp;&amp;</span>
            <span class="nv">$DynamicFieldsList</span><span class="p">{</span> <span class="nv">$GetParam</span><span class="p">{</span><span class="n">Name</span><span class="p">}</span> <span class="p">}</span> <span class="ow">ne</span> <span class="nv">$FieldID</span>
            <span class="p">)</span>
        <span class="p">{</span>

            <span class="c1"># add server error class</span>
            <span class="nv">$Errors</span><span class="p">{</span><span class="n">NameServerError</span><span class="p">}</span>        <span class="o">=</span> <span class="s">&#39;ServerError&#39;</span><span class="p">;</span>
            <span class="nv">$Errors</span><span class="p">{</span><span class="n">NameServerErrorMessage</span><span class="p">}</span> <span class="o">=</span> <span class="s">&#39;There is another field with the same name.&#39;</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span> <span class="nv">$GetParam</span><span class="p">{</span><span class="n">FieldOrder</span><span class="p">}</span> <span class="p">)</span> <span class="p">{</span>

        <span class="c1"># check if field order is numeric and positive</span>
        <span class="k">if</span> <span class="p">(</span> <span class="nv">$GetParam</span><span class="p">{</span><span class="n">FieldOrder</span><span class="p">}</span> <span class="o">!~</span> <span class="sr">m{\A ( ?: \d )+ \z}xms</span> <span class="p">)</span> <span class="p">{</span>

            <span class="c1"># add server error error class</span>
            <span class="nv">$Errors</span><span class="p">{</span><span class="n">FieldOrderServerError</span><span class="p">}</span>        <span class="o">=</span> <span class="s">&#39;ServerError&#39;</span><span class="p">;</span>
            <span class="nv">$Errors</span><span class="p">{</span><span class="n">FieldOrderServerErrorMessage</span><span class="p">}</span> <span class="o">=</span> <span class="s">&#39;The field must be numeric.&#39;</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="k">for</span> <span class="k">my</span> <span class="nv">$ConfigParam</span> <span class="p">(</span>
        <span class="sx">qw(</span>
<span class="sx">        ObjectType ObjectTypeName FieldType FieldTypeName DefaultValue ValidID ShowValue</span>
<span class="sx">        ValueMask</span>
<span class="sx">        )</span>
        <span class="p">)</span>
    <span class="p">{</span>
        <span class="nv">$GetParam</span><span class="p">{</span><span class="nv">$ConfigParam</span><span class="p">}</span> <span class="o">=</span> <span class="nv">$Self</span><span class="o">-&gt;</span><span class="p">{</span><span class="n">ParamObject</span><span class="p">}</span><span class="o">-&gt;</span><span class="n">GetParam</span><span class="p">(</span> <span class="n">Param</span> <span class="o">=&gt;</span> <span class="nv">$ConfigParam</span> <span class="p">);</span>
    <span class="p">}</span>

    <span class="c1"># uncorrectable errors</span>
    <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nv">$GetParam</span><span class="p">{</span><span class="n">ValidID</span><span class="p">}</span> <span class="p">)</span> <span class="p">{</span>

        <span class="k">return</span> <span class="nv">$Self</span><span class="o">-&gt;</span><span class="p">{</span><span class="n">LayoutObject</span><span class="p">}</span><span class="o">-&gt;</span><span class="n">ErrorScreen</span><span class="p">(</span>
            <span class="n">Message</span> <span class="o">=&gt;</span> <span class="s">&quot;Need ValidID&quot;</span><span class="p">,</span>
        <span class="p">);</span>
    <span class="p">}</span>

    <span class="c1"># get dynamic field data</span>
    <span class="k">my</span> <span class="nv">$DynamicFieldData</span> <span class="o">=</span> <span class="nv">$Self</span><span class="o">-&gt;</span><span class="p">{</span><span class="n">DynamicFieldObject</span><span class="p">}</span><span class="o">-&gt;</span><span class="n">DynamicFieldGet</span><span class="p">(</span>
        <span class="n">ID</span> <span class="o">=&gt;</span> <span class="nv">$FieldID</span><span class="p">,</span>
    <span class="p">);</span>

    <span class="c1"># check for valid dynamic field configuration</span>
    <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="n">IsHashRefWithData</span><span class="p">(</span><span class="nv">$DynamicFieldData</span><span class="p">)</span> <span class="p">)</span> <span class="p">{</span>

        <span class="k">return</span> <span class="nv">$Self</span><span class="o">-&gt;</span><span class="p">{</span><span class="n">LayoutObject</span><span class="p">}</span><span class="o">-&gt;</span><span class="n">ErrorScreen</span><span class="p">(</span>
            <span class="n">Message</span> <span class="o">=&gt;</span> <span class="s">&quot;Could not get data for dynamic field $FieldID&quot;</span><span class="p">,</span>
        <span class="p">);</span>
    <span class="p">}</span>

    <span class="c1"># return to change screen if errors</span>
    <span class="k">if</span> <span class="p">(</span><span class="nv">%Errors</span><span class="p">)</span> <span class="p">{</span>

        <span class="k">return</span> <span class="nv">$Self</span><span class="o">-&gt;</span><span class="n">_ShowScreen</span><span class="p">(</span>
            <span class="nv">%Param</span><span class="p">,</span>
            <span class="nv">%Errors</span><span class="p">,</span>
            <span class="nv">%GetParam</span><span class="p">,</span>
            <span class="n">ID</span>   <span class="o">=&gt;</span> <span class="nv">$FieldID</span><span class="p">,</span>
            <span class="n">Mode</span> <span class="o">=&gt;</span> <span class="s">&#39;Change&#39;</span><span class="p">,</span>
        <span class="p">);</span>
    <span class="p">}</span>

    <span class="c1"># set specific config</span>
    <span class="k">my</span> <span class="nv">$FieldConfig</span> <span class="o">=</span> <span class="p">{</span>
        <span class="n">DefaultValue</span> <span class="o">=&gt;</span> <span class="nv">$GetParam</span><span class="p">{</span><span class="n">DefaultValue</span><span class="p">},</span>
        <span class="n">ShowValue</span>    <span class="o">=&gt;</span> <span class="nv">$GetParam</span><span class="p">{</span><span class="n">ShowValue</span><span class="p">},</span>
        <span class="n">ValueMask</span>    <span class="o">=&gt;</span> <span class="nv">$GetParam</span><span class="p">{</span><span class="n">ValueMask</span><span class="p">},</span>
    <span class="p">};</span>

    <span class="c1"># update dynamic field (FieldType and ObjectType cannot be changed; use old values)</span>
    <span class="k">my</span> <span class="nv">$UpdateSuccess</span> <span class="o">=</span> <span class="nv">$Self</span><span class="o">-&gt;</span><span class="p">{</span><span class="n">DynamicFieldObject</span><span class="p">}</span><span class="o">-&gt;</span><span class="n">DynamicFieldUpdate</span><span class="p">(</span>
        <span class="n">ID</span>         <span class="o">=&gt;</span> <span class="nv">$FieldID</span><span class="p">,</span>
        <span class="n">Name</span>       <span class="o">=&gt;</span> <span class="nv">$GetParam</span><span class="p">{</span><span class="n">Name</span><span class="p">},</span>
        <span class="n">Label</span>      <span class="o">=&gt;</span> <span class="nv">$GetParam</span><span class="p">{</span><span class="n">Label</span><span class="p">},</span>
        <span class="n">FieldOrder</span> <span class="o">=&gt;</span> <span class="nv">$GetParam</span><span class="p">{</span><span class="n">FieldOrder</span><span class="p">},</span>
        <span class="n">FieldType</span>  <span class="o">=&gt;</span> <span class="nv">$DynamicFieldData</span><span class="o">-&gt;</span><span class="p">{</span><span class="n">FieldType</span><span class="p">},</span>
        <span class="n">ObjectType</span> <span class="o">=&gt;</span> <span class="nv">$DynamicFieldData</span><span class="o">-&gt;</span><span class="p">{</span><span class="n">ObjectType</span><span class="p">},</span>
        <span class="n">Config</span>     <span class="o">=&gt;</span> <span class="nv">$FieldConfig</span><span class="p">,</span>
        <span class="n">ValidID</span>    <span class="o">=&gt;</span> <span class="nv">$GetParam</span><span class="p">{</span><span class="n">ValidID</span><span class="p">},</span>
        <span class="n">UserID</span>     <span class="o">=&gt;</span> <span class="nv">$Self</span><span class="o">-&gt;</span><span class="p">{</span><span class="n">UserID</span><span class="p">},</span>
    <span class="p">);</span>

    <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nv">$UpdateSuccess</span> <span class="p">)</span> <span class="p">{</span>

        <span class="k">return</span> <span class="nv">$Self</span><span class="o">-&gt;</span><span class="p">{</span><span class="n">LayoutObject</span><span class="p">}</span><span class="o">-&gt;</span><span class="n">ErrorScreen</span><span class="p">(</span>
            <span class="n">Message</span> <span class="o">=&gt;</span> <span class="s">&quot;Could not update the field $GetParam{Name}&quot;</span><span class="p">,</span>
        <span class="p">);</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="nv">$Self</span><span class="o">-&gt;</span><span class="p">{</span><span class="n">LayoutObject</span><span class="p">}</span><span class="o">-&gt;</span><span class="n">Redirect</span><span class="p">(</span>
        <span class="n">OP</span> <span class="o">=&gt;</span> <span class="s">&quot;Action=AdminDynamicField&quot;</span><span class="p">,</span>
    <span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
<p>A <code class="docutils literal notranslate"><span class="pre">_ChangeAction()</span></code> nagyon hasonló az <code class="docutils literal notranslate"><span class="pre">_AddAction()</span></code> függvényhez, de át van írva egy meglévő mező frissítéséhez egy új létrehozása helyett.</p>
<div class="highlight-Perl notranslate"><div class="highlight"><pre><span></span><span class="k">sub</span> <span class="nf">_ShowScreen</span> <span class="p">{</span>
    <span class="k">my</span> <span class="p">(</span> <span class="nv">$Self</span><span class="p">,</span> <span class="nv">%Param</span> <span class="p">)</span> <span class="o">=</span> <span class="nv">@_</span><span class="p">;</span>

    <span class="nv">$Param</span><span class="p">{</span><span class="n">DisplayFieldName</span><span class="p">}</span> <span class="o">=</span> <span class="s">&#39;New&#39;</span><span class="p">;</span>

    <span class="k">if</span> <span class="p">(</span> <span class="nv">$Param</span><span class="p">{</span><span class="n">Mode</span><span class="p">}</span> <span class="ow">eq</span> <span class="s">&#39;Change&#39;</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nv">$Param</span><span class="p">{</span><span class="n">ShowWarning</span><span class="p">}</span>      <span class="o">=</span> <span class="s">&#39;ShowWarning&#39;</span><span class="p">;</span>
        <span class="nv">$Param</span><span class="p">{</span><span class="n">DisplayFieldName</span><span class="p">}</span> <span class="o">=</span> <span class="nv">$Param</span><span class="p">{</span><span class="n">Name</span><span class="p">};</span>
    <span class="p">}</span>

    <span class="c1"># header</span>
    <span class="k">my</span> <span class="nv">$Output</span> <span class="o">=</span> <span class="nv">$Self</span><span class="o">-&gt;</span><span class="p">{</span><span class="n">LayoutObject</span><span class="p">}</span><span class="o">-&gt;</span><span class="n">Header</span><span class="p">();</span>
    <span class="nv">$Output</span> <span class="o">.=</span> <span class="nv">$Self</span><span class="o">-&gt;</span><span class="p">{</span><span class="n">LayoutObject</span><span class="p">}</span><span class="o">-&gt;</span><span class="n">NavigationBar</span><span class="p">();</span>

    <span class="c1"># get all fields</span>
    <span class="k">my</span> <span class="nv">$DynamicFieldList</span> <span class="o">=</span> <span class="nv">$Self</span><span class="o">-&gt;</span><span class="p">{</span><span class="n">DynamicFieldObject</span><span class="p">}</span><span class="o">-&gt;</span><span class="n">DynamicFieldListGet</span><span class="p">(</span>
        <span class="n">Valid</span> <span class="o">=&gt;</span> <span class="mi">0</span><span class="p">,</span>
    <span class="p">);</span>

    <span class="c1"># get the list of order numbers (is already sorted).</span>
    <span class="k">my</span> <span class="nv">@DynamicfieldOrderList</span><span class="p">;</span>
    <span class="k">for</span> <span class="k">my</span> <span class="nv">$Dynamicfield</span> <span class="p">(</span> <span class="nv">@</span><span class="p">{</span><span class="nv">$DynamicFieldList</span><span class="p">}</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nb">push</span> <span class="nv">@DynamicfieldOrderList</span><span class="p">,</span> <span class="nv">$Dynamicfield</span><span class="o">-&gt;</span><span class="p">{</span><span class="n">FieldOrder</span><span class="p">};</span>
    <span class="p">}</span>

    <span class="c1"># when adding we need to create an extra order number for the new field</span>
    <span class="k">if</span> <span class="p">(</span> <span class="nv">$Param</span><span class="p">{</span><span class="n">Mode</span><span class="p">}</span> <span class="ow">eq</span> <span class="s">&#39;Add&#39;</span> <span class="p">)</span> <span class="p">{</span>

        <span class="c1"># get the last element from the order list and add 1</span>
        <span class="k">my</span> <span class="nv">$LastOrderNumber</span> <span class="o">=</span> <span class="nv">$DynamicfieldOrderList</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">];</span>
        <span class="nv">$LastOrderNumber</span><span class="o">++</span><span class="p">;</span>

        <span class="c1"># add this new order number to the end of the list</span>
        <span class="nb">push</span> <span class="nv">@DynamicfieldOrderList</span><span class="p">,</span> <span class="nv">$LastOrderNumber</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">my</span> <span class="nv">$DynamicFieldOrderSrtg</span> <span class="o">=</span> <span class="nv">$Self</span><span class="o">-&gt;</span><span class="p">{</span><span class="n">LayoutObject</span><span class="p">}</span><span class="o">-&gt;</span><span class="n">BuildSelection</span><span class="p">(</span>
        <span class="n">Data</span>          <span class="o">=&gt;</span> <span class="o">\</span><span class="nv">@DynamicfieldOrderList</span><span class="p">,</span>
        <span class="n">Name</span>          <span class="o">=&gt;</span> <span class="s">&#39;FieldOrder&#39;</span><span class="p">,</span>
        <span class="n">SelectedValue</span> <span class="o">=&gt;</span> <span class="nv">$Param</span><span class="p">{</span><span class="n">FieldOrder</span><span class="p">}</span> <span class="o">||</span> <span class="mi">1</span><span class="p">,</span>
        <span class="n">PossibleNone</span>  <span class="o">=&gt;</span> <span class="mi">0</span><span class="p">,</span>
        <span class="n">Class</span>         <span class="o">=&gt;</span> <span class="s">&#39;W50pc Validate_Number&#39;</span><span class="p">,</span>
    <span class="p">);</span>

    <span class="k">my</span> <span class="nv">%ValidList</span> <span class="o">=</span> <span class="nv">$Self</span><span class="o">-&gt;</span><span class="p">{</span><span class="n">ValidObject</span><span class="p">}</span><span class="o">-&gt;</span><span class="n">ValidList</span><span class="p">();</span>

    <span class="c1"># create the Validity select</span>
    <span class="k">my</span> <span class="nv">$ValidityStrg</span> <span class="o">=</span> <span class="nv">$Self</span><span class="o">-&gt;</span><span class="p">{</span><span class="n">LayoutObject</span><span class="p">}</span><span class="o">-&gt;</span><span class="n">BuildSelection</span><span class="p">(</span>
        <span class="n">Data</span>         <span class="o">=&gt;</span> <span class="o">\</span><span class="nv">%ValidList</span><span class="p">,</span>
        <span class="n">Name</span>         <span class="o">=&gt;</span> <span class="s">&#39;ValidID&#39;</span><span class="p">,</span>
        <span class="n">SelectedID</span>   <span class="o">=&gt;</span> <span class="nv">$Param</span><span class="p">{</span><span class="n">ValidID</span><span class="p">}</span> <span class="o">||</span> <span class="mi">1</span><span class="p">,</span>
        <span class="n">PossibleNone</span> <span class="o">=&gt;</span> <span class="mi">0</span><span class="p">,</span>
        <span class="n">Translation</span>  <span class="o">=&gt;</span> <span class="mi">1</span><span class="p">,</span>
        <span class="n">Class</span>        <span class="o">=&gt;</span> <span class="s">&#39;W50pc&#39;</span><span class="p">,</span>
    <span class="p">);</span>

    <span class="c1"># define config field specific settings</span>
    <span class="k">my</span> <span class="nv">$DefaultValue</span> <span class="o">=</span> <span class="p">(</span> <span class="nb">defined</span> <span class="nv">$Param</span><span class="p">{</span><span class="n">DefaultValue</span><span class="p">}</span> <span class="p">?</span> <span class="nv">$Param</span><span class="p">{</span><span class="n">DefaultValue</span><span class="p">}</span> <span class="p">:</span> <span class="s">&#39;&#39;</span> <span class="p">);</span>

    <span class="c1"># create the Show value select</span>
    <span class="k">my</span> <span class="nv">$ShowValueStrg</span> <span class="o">=</span> <span class="nv">$Self</span><span class="o">-&gt;</span><span class="p">{</span><span class="n">LayoutObject</span><span class="p">}</span><span class="o">-&gt;</span><span class="n">BuildSelection</span><span class="p">(</span>
        <span class="n">Data</span> <span class="o">=&gt;</span> <span class="p">[</span> <span class="s">&#39;No&#39;</span><span class="p">,</span> <span class="s">&#39;Yes&#39;</span> <span class="p">],</span>
        <span class="n">Name</span> <span class="o">=&gt;</span> <span class="s">&#39;ShowValue&#39;</span><span class="p">,</span>
        <span class="n">SelectedValue</span> <span class="o">=&gt;</span> <span class="nv">$Param</span><span class="p">{</span><span class="n">ShowValue</span><span class="p">}</span> <span class="o">||</span> <span class="s">&#39;No&#39;</span><span class="p">,</span>
        <span class="n">PossibleNone</span>  <span class="o">=&gt;</span> <span class="mi">0</span><span class="p">,</span>
        <span class="n">Translation</span>   <span class="o">=&gt;</span> <span class="mi">1</span><span class="p">,</span>
        <span class="n">Class</span>         <span class="o">=&gt;</span> <span class="s">&#39;W50pc&#39;</span><span class="p">,</span>
    <span class="p">);</span>

    <span class="c1"># generate output</span>
    <span class="nv">$Output</span> <span class="o">.=</span> <span class="nv">$Self</span><span class="o">-&gt;</span><span class="p">{</span><span class="n">LayoutObject</span><span class="p">}</span><span class="o">-&gt;</span><span class="n">Output</span><span class="p">(</span>
        <span class="n">TemplateFile</span> <span class="o">=&gt;</span> <span class="s">&#39;AdminDynamicFieldPassword&#39;</span><span class="p">,</span>
        <span class="n">Data</span>         <span class="o">=&gt;</span> <span class="p">{</span>
            <span class="nv">%Param</span><span class="p">,</span>
            <span class="n">ValidityStrg</span>          <span class="o">=&gt;</span> <span class="nv">$ValidityStrg</span><span class="p">,</span>
            <span class="n">DynamicFieldOrderSrtg</span> <span class="o">=&gt;</span> <span class="nv">$DynamicFieldOrderSrtg</span><span class="p">,</span>
            <span class="n">DefaultValue</span>          <span class="o">=&gt;</span> <span class="nv">$DefaultValue</span><span class="p">,</span>
            <span class="n">ShowValueStrg</span>         <span class="o">=&gt;</span> <span class="nv">$ShowValueStrg</span><span class="p">,</span>
            <span class="n">ValueMask</span>             <span class="o">=&gt;</span> <span class="nv">$Param</span><span class="p">{</span><span class="n">ValueMask</span><span class="p">}</span> <span class="o">||</span> <span class="nv">$Self</span><span class="o">-&gt;</span><span class="p">{</span><span class="n">DefaultValueMask</span><span class="p">},</span>
        <span class="p">},</span>
    <span class="p">);</span>

    <span class="nv">$Output</span> <span class="o">.=</span> <span class="nv">$Self</span><span class="o">-&gt;</span><span class="p">{</span><span class="n">LayoutObject</span><span class="p">}</span><span class="o">-&gt;</span><span class="n">Footer</span><span class="p">();</span>

    <span class="k">return</span> <span class="nv">$Output</span><span class="p">;</span>
<span class="p">}</span>

<span class="mi">1</span><span class="p">;</span>
</pre></div>
</div>
<p>A <code class="docutils literal notranslate"><span class="pre">_ShowScreen</span></code> függvényt használják egy sablonból történő HTML elemek és blokkok beállítására és meghatározására az adminisztrátori párbeszédablak HTML kódjának előállításához.</p>
</div>
<div class="section" id="dynamic-field-template-for-admin-dialog-example">
<h3>Dinamikus mező sablon az adminisztrátori párbeszédablak példához<a class="headerlink" href="#dynamic-field-template-for-admin-dialog-example" title="Hivatkozás erre a fejezetcímre">¶</a></h3>
<p>A sablon az a hely, ahol a párbeszédablak HTML kódja el van tárolva.</p>
<p>Ebben a szakaszban a jelszó dinamikus mezőhöz egy adminisztrátori párbeszédablak sablon van megjelenítve és elmagyarázva.</p>
<div class="highlight-Perl notranslate"><div class="highlight"><pre><span></span><span class="c1"># --</span>
<span class="c1"># Copyright (C) 2001-2020 OTRS AG, https://otrs.com/</span>
<span class="c1"># --</span>
<span class="c1"># This software comes with ABSOLUTELY NO WARRANTY. For details, see</span>
<span class="c1"># the enclosed file COPYING for license information (GPL). If you</span>
<span class="c1"># did not receive this file, see https://www.gnu.org/licenses/gpl-3.0.txt.</span>
<span class="c1"># --</span>
</pre></div>
</div>
<p>Ez egy gyakori fejléc, amely megtalálható a szokásos OTRS modulokban.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>&lt;div class=&quot;MainBox ARIARoleMain LayoutFixedSidebar SidebarFirst&quot;&gt;
    &lt;h1&gt;[% Translate(&quot;Dynamic Fields&quot;) | html %] - [% Translate(Data.ObjectTypeName) | html %]: [% Translate(Data.Mode) | html %] [% Translate(Data.FieldTypeName) | html %] [% Translate(&quot;Field&quot;) | html %]&lt;/h1&gt;

    &lt;div class=&quot;Clear&quot;&gt;&lt;/div&gt;

    &lt;div class=&quot;SidebarColumn&quot;&gt;
        &lt;div class=&quot;WidgetSimple&quot;&gt;
            &lt;div class=&quot;Header&quot;&gt;
                &lt;h2&gt;[% Translate(&quot;Actions&quot;) | html %]&lt;/h2&gt;
            &lt;/div&gt;
            &lt;div class=&quot;Content&quot;&gt;
                &lt;ul class=&quot;ActionList&quot;&gt;
                    &lt;li&gt;
                        &lt;a href=&quot;[% Env(&quot;Baselink&quot;) %]Action=AdminDynamicField&quot; class=&quot;CallForAction&quot;&gt;&lt;span&gt;[% Translate(&quot;Go back to overview&quot;) | html %]&lt;/span&gt;&lt;/a&gt;
                    &lt;/li&gt;
                &lt;/ul&gt;
            &lt;/div&gt;
        &lt;/div&gt;
    &lt;/div&gt;
</pre></div>
</div>
<p>A kód ezen része rendelkezik a fő dobozzal és a műveletek oldalsávval is. Nincs szükség módosításokra ebben a szakaszban.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>&lt;div class=&quot;ContentColumn&quot;&gt;
    &lt;form action=&quot;[% Env(&quot;CGIHandle&quot;) %]&quot; method=&quot;post&quot; class=&quot;Validate PreventMultipleSubmits&quot;&gt;
        &lt;input type=&quot;hidden&quot; name=&quot;Action&quot; value=&quot;AdminDynamicFieldPassword&quot; /&gt;
        &lt;input type=&quot;hidden&quot; name=&quot;Subaction&quot; value=&quot;[% Data.Mode | html %]Action&quot; /&gt;
        &lt;input type=&quot;hidden&quot; name=&quot;ObjectType&quot; value=&quot;[% Data.ObjectType | html %]&quot; /&gt;
        &lt;input type=&quot;hidden&quot; name=&quot;FieldType&quot; value=&quot;[% Data.FieldType | html %]&quot; /&gt;
        &lt;input type=&quot;hidden&quot; name=&quot;ID&quot; value=&quot;[% Data.ID | html %]&quot; /&gt;
</pre></div>
</div>
<p>A kód ezen szakaszában van meghatározva a párbeszédablak jobboldali része. Figyelje meg, hogy a rejtett <code class="docutils literal notranslate"><span class="pre">Action</span></code> beviteli mező értékének egyeznie kell az adminisztrátori párbeszédablak nevével.</p>
<div class="highlight-HTML notranslate"><div class="highlight"><pre><span></span><span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;WidgetSimple&quot;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;Header&quot;</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">h2</span><span class="p">&gt;</span>[% Translate(&quot;General&quot;) | html %]<span class="p">&lt;/</span><span class="nt">h2</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;Content&quot;</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;LayoutGrid ColumnsWithSpacing&quot;</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;Size1of2&quot;</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">fieldset</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;TableLike&quot;</span><span class="p">&gt;</span>
                    <span class="p">&lt;</span><span class="nt">label</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;Mandatory&quot;</span> <span class="na">for</span><span class="o">=</span><span class="s">&quot;Name&quot;</span><span class="p">&gt;&lt;</span><span class="nt">span</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;Marker&quot;</span><span class="p">&gt;</span>*<span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;</span> [% Translate(&quot;Name&quot;) | html %]:<span class="p">&lt;/</span><span class="nt">label</span><span class="p">&gt;</span>
                    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;Field&quot;</span><span class="p">&gt;</span>
                        <span class="p">&lt;</span><span class="nt">input</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;Name&quot;</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;W50pc [% Data.NameServerError | html %] [% Data.ShowWarning | html %]  Validate_Alphanumeric&quot;</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;text&quot;</span> <span class="na">maxlength</span><span class="o">=</span><span class="s">&quot;200&quot;</span> <span class="na">value</span><span class="o">=</span><span class="s">&quot;[% Data.Name | html %]&quot;</span> <span class="na">name</span><span class="o">=</span><span class="s">&quot;Name&quot;</span><span class="p">/&gt;</span>
                        <span class="p">&lt;</span><span class="nt">div</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;NameError&quot;</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;TooltipErrorMessage&quot;</span><span class="p">&gt;&lt;</span><span class="nt">p</span><span class="p">&gt;</span>[% Translate(&quot;This field is required, and the value should be alphabetic and numeric characters only.&quot;) | html %]<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
                        <span class="p">&lt;</span><span class="nt">div</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;NameServerError&quot;</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;TooltipErrorMessage&quot;</span><span class="p">&gt;&lt;</span><span class="nt">p</span><span class="p">&gt;</span>[% Translate(Data.NameServerErrorMessage) | html %]<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
                        <span class="p">&lt;</span><span class="nt">p</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;FieldExplanation&quot;</span><span class="p">&gt;</span>[% Translate(&quot;Must be unique and only accept alphabetic and numeric characters.&quot;) | html %]<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
                        <span class="p">&lt;</span><span class="nt">p</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;Warning Hidden&quot;</span><span class="p">&gt;</span>[% Translate(&quot;Changing this value will require manual changes in the system.&quot;) | html %]<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
                    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
                    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;Clear&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>

                    <span class="p">&lt;</span><span class="nt">label</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;Mandatory&quot;</span> <span class="na">for</span><span class="o">=</span><span class="s">&quot;Label&quot;</span><span class="p">&gt;&lt;</span><span class="nt">span</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;Marker&quot;</span><span class="p">&gt;</span>*<span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;</span> [% Translate(&quot;Label&quot;) | html %]:<span class="p">&lt;/</span><span class="nt">label</span><span class="p">&gt;</span>
                    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;Field&quot;</span><span class="p">&gt;</span>
                        <span class="p">&lt;</span><span class="nt">input</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;Label&quot;</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;W50pc [% Data.LabelServerError | html %] Validate_Required&quot;</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;text&quot;</span> <span class="na">maxlength</span><span class="o">=</span><span class="s">&quot;200&quot;</span> <span class="na">value</span><span class="o">=</span><span class="s">&quot;[% Data.Label | html %]&quot;</span> <span class="na">name</span><span class="o">=</span><span class="s">&quot;Label&quot;</span><span class="p">/&gt;</span>
                        <span class="p">&lt;</span><span class="nt">div</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;LabelError&quot;</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;TooltipErrorMessage&quot;</span><span class="p">&gt;&lt;</span><span class="nt">p</span><span class="p">&gt;</span>[% Translate(&quot;This field is required.&quot;) | html %]<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
                        <span class="p">&lt;</span><span class="nt">div</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;LabelServerError&quot;</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;TooltipErrorMessage&quot;</span><span class="p">&gt;&lt;</span><span class="nt">p</span><span class="p">&gt;</span>[% Translate(Data.LabelServerErrorMessage) | html %]<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
                        <span class="p">&lt;</span><span class="nt">p</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;FieldExplanation&quot;</span><span class="p">&gt;</span>[% Translate(&quot;This is the name to be shown on the screens where the field is active.&quot;) | html %]<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
                    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
                    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;Clear&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>

                    <span class="p">&lt;</span><span class="nt">label</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;Mandatory&quot;</span> <span class="na">for</span><span class="o">=</span><span class="s">&quot;FieldOrder&quot;</span><span class="p">&gt;&lt;</span><span class="nt">span</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;Marker&quot;</span><span class="p">&gt;</span>*<span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;</span> [% Translate(&quot;Field order&quot;) | html %]:<span class="p">&lt;/</span><span class="nt">label</span><span class="p">&gt;</span>
                    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;Field&quot;</span><span class="p">&gt;</span>
                        [% Data.DynamicFieldOrderSrtg %]
                        <span class="p">&lt;</span><span class="nt">div</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;FieldOrderError&quot;</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;TooltipErrorMessage&quot;</span><span class="p">&gt;&lt;</span><span class="nt">p</span><span class="p">&gt;</span>[% Translate(&quot;This field is required and must be numeric.&quot;) | html %]<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
                        <span class="p">&lt;</span><span class="nt">div</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;FieldOrderServerError&quot;</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;TooltipErrorMessage&quot;</span><span class="p">&gt;&lt;</span><span class="nt">p</span><span class="p">&gt;</span>[% Translate(Data.FieldOrderServerErrorMessage) | html %]<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
                        <span class="p">&lt;</span><span class="nt">p</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;FieldExplanation&quot;</span><span class="p">&gt;</span>[% Translate(&quot;This is the order in which this field will be shown on the screens where is active.&quot;) | html %]<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
                    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
                    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;Clear&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
                <span class="p">&lt;/</span><span class="nt">fieldset</span><span class="p">&gt;</span>
            <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;Size1of2&quot;</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">fieldset</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;TableLike&quot;</span><span class="p">&gt;</span>
                    <span class="p">&lt;</span><span class="nt">label</span> <span class="na">for</span><span class="o">=</span><span class="s">&quot;ValidID&quot;</span><span class="p">&gt;</span>[% Translate(&quot;Validity&quot;) | html %]:<span class="p">&lt;/</span><span class="nt">label</span><span class="p">&gt;</span>
                    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;Field&quot;</span><span class="p">&gt;</span>
                        [% Data.ValidityStrg %]
                    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
                    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;Clear&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>

                    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;SpacingTop&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
                    <span class="p">&lt;</span><span class="nt">label</span> <span class="na">for</span><span class="o">=</span><span class="s">&quot;FieldTypeName&quot;</span><span class="p">&gt;</span>[% Translate(&quot;Field type&quot;) | html %]:<span class="p">&lt;/</span><span class="nt">label</span><span class="p">&gt;</span>
                    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;Field&quot;</span><span class="p">&gt;</span>
                        <span class="p">&lt;</span><span class="nt">input</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;FieldTypeName&quot;</span> <span class="na">readonly</span><span class="o">=</span><span class="s">&quot;readonly&quot;</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;W50pc&quot;</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;text&quot;</span> <span class="na">maxlength</span><span class="o">=</span><span class="s">&quot;200&quot;</span> <span class="na">value</span><span class="o">=</span><span class="s">&quot;[% Data.FieldTypeName | html %]&quot;</span> <span class="na">name</span><span class="o">=</span><span class="s">&quot;FieldTypeName&quot;</span><span class="p">/&gt;</span>
                        <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;Clear&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
                    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>

                    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;SpacingTop&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
                    <span class="p">&lt;</span><span class="nt">label</span> <span class="na">for</span><span class="o">=</span><span class="s">&quot;ObjectTypeName&quot;</span><span class="p">&gt;</span>[% Translate(&quot;Object type&quot;) | html %]:<span class="p">&lt;/</span><span class="nt">label</span><span class="p">&gt;</span>
                    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;Field&quot;</span><span class="p">&gt;</span>
                        <span class="p">&lt;</span><span class="nt">input</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;ObjectTypeName&quot;</span> <span class="na">readonly</span><span class="o">=</span><span class="s">&quot;readonly&quot;</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;W50pc&quot;</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;text&quot;</span> <span class="na">maxlength</span><span class="o">=</span><span class="s">&quot;200&quot;</span> <span class="na">value</span><span class="o">=</span><span class="s">&quot;[% Data.ObjectTypeName | html %]&quot;</span> <span class="na">name</span><span class="o">=</span><span class="s">&quot;ObjectTypeName&quot;</span><span class="p">/&gt;</span>
                        <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;Clear&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
                    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
                <span class="p">&lt;/</span><span class="nt">fieldset</span><span class="p">&gt;</span>
            <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
        <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</pre></div>
</div>
<p>Ez az első felületi elem tartalmazza a szokásos űrlapattribútumokat a dinamikus mezőkhöz. A többi dinamikus mezővel való következetességért javasolt a kód ezen részének változatlanul hagyása.</p>
<div class="highlight-HTML notranslate"><div class="highlight"><pre><span></span><span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;WidgetSimple&quot;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;Header&quot;</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">h2</span><span class="p">&gt;</span>[% Translate(Data.FieldTypeName) | html %] [% Translate(&quot;Field Settings&quot;) | html %]<span class="p">&lt;/</span><span class="nt">h2</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;Content&quot;</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">fieldset</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;TableLike&quot;</span><span class="p">&gt;</span>

            <span class="p">&lt;</span><span class="nt">label</span> <span class="na">for</span><span class="o">=</span><span class="s">&quot;DefaultValue&quot;</span><span class="p">&gt;</span>[% Translate(&quot;Default value&quot;) | html %]:<span class="p">&lt;/</span><span class="nt">label</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;Field&quot;</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">input</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;DefaultValue&quot;</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;W50pc&quot;</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;text&quot;</span> <span class="na">maxlength</span><span class="o">=</span><span class="s">&quot;200&quot;</span> <span class="na">value</span><span class="o">=</span><span class="s">&quot;[% Data.DefaultValue | html %]&quot;</span> <span class="na">name</span><span class="o">=</span><span class="s">&quot;DefaultValue&quot;</span><span class="p">/&gt;</span>
                <span class="p">&lt;</span><span class="nt">p</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;FieldExplanation&quot;</span><span class="p">&gt;</span>[% Translate(&quot;This is the default value for this field.&quot;) | html %]<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
            <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;Clear&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>

            <span class="p">&lt;</span><span class="nt">label</span> <span class="na">for</span><span class="o">=</span><span class="s">&quot;ShowValue&quot;</span><span class="p">&gt;</span>[% Translate(&quot;Show value&quot;) | html %]:<span class="p">&lt;/</span><span class="nt">label</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;Field&quot;</span><span class="p">&gt;</span>
                [% Data.ShowValueStrg %]
                <span class="p">&lt;</span><span class="nt">p</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;FieldExplanation&quot;</span><span class="p">&gt;</span>
                    [% Translate(&quot;To reveal the field value in non edit screens ( e.g. Ticket Zoom Screen )&quot;) | html %]
                <span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
            <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;Clear&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>

            <span class="p">&lt;</span><span class="nt">label</span> <span class="na">for</span><span class="o">=</span><span class="s">&quot;ValueMask&quot;</span><span class="p">&gt;</span>[% Translate(&quot;Hidden value mask&quot;) | html %]:<span class="p">&lt;/</span><span class="nt">label</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;Field&quot;</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">input</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;ValueMask&quot;</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;W50pc&quot;</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;text&quot;</span> <span class="na">maxlength</span><span class="o">=</span><span class="s">&quot;200&quot;</span> <span class="na">value</span><span class="o">=</span><span class="s">&quot;[% Data.ValueMask | html %]&quot;</span> <span class="na">name</span><span class="o">=</span><span class="s">&quot;ValueMask&quot;</span><span class="p">/&gt;</span>
                <span class="p">&lt;</span><span class="nt">p</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;FieldExplanation&quot;</span><span class="p">&gt;</span>
                    [% Translate(&quot;This is the alternate value to show if Show value is set to \&quot;No\&quot; ( Default: **** ).&quot;) | html %]
                <span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
            <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;Clear&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>

        <span class="p">&lt;/</span><span class="nt">fieldset</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</pre></div>
</div>
<p>A második felületi elem a dinamikus mezőre jellemző űrlapattribútumokkal rendelkezik. Ez az a hely, ahol az új attribútumok beállíthatók, és használhatnak JavaScript és AJAX technológiákat, hogy egyszerűbbé és barátságosabbá tegyék a végfelhasználó számára.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>            &lt;fieldset class=&quot;TableLike&quot;&gt;
                &lt;div class=&quot;Field SpacingTop&quot;&gt;
                    &lt;button type=&quot;submit&quot; class=&quot;Primary&quot; value=&quot;[% Translate(&quot;Save&quot;) | html %]&quot;&gt;[% Translate(&quot;Save&quot;) | html %]&lt;/button&gt;
                    [% Translate(&quot;or&quot;) | html %]
                    &lt;a href=&quot;[% Env(&quot;Baselink&quot;) %]Action=AdminDynamicField&quot;&gt;[% Translate(&quot;Cancel&quot;) | html %]&lt;/a&gt;
                &lt;/div&gt;
                &lt;div class=&quot;Clear&quot;&gt;&lt;/div&gt;
            &lt;/fieldset&gt;
        &lt;/form&gt;
    &lt;/div&gt;
&lt;/div&gt;
[% WRAPPER JSOnDocumentComplete %]
&lt;script type=&quot;text/javascript&quot;&gt;//&lt;![CDATA[
$(&#39;.ShowWarning&#39;).bind(&#39;change keyup&#39;, function (Event) {
    $(&#39;p.Warning&#39;).removeClass(&#39;Hidden&#39;);
});

Core.Agent.Admin.DynamicField.ValidationInit();
//]]&gt;&lt;/script&gt;
[% END %]
</pre></div>
</div>
<p>A fájl utolsó része tartalmazza a <em>Mentés</em> gombot és a <em>Mégse</em> hivatkozást, valamint az egyéb szükséges JavaScript kódot.</p>
</div>
<div class="section" id="dynamic-field-driver-example">
<h3>Dinamikus mező illesztőprogram példa<a class="headerlink" href="#dynamic-field-driver-example" title="Hivatkozás erre a fejezetcímre">¶</a></h3>
<p>Az illesztőprogram <em>maga a</em> dinamikus mező. Számos olyan függvényt tartalmaz, amelyet széles körben használnak az OTRS keretrendszerben. Egy illesztőprogram örökölhet néhány függvényt az alaposztályokból, például a <code class="docutils literal notranslate"><span class="pre">TextArea</span></code> illesztőprogram a <code class="docutils literal notranslate"><span class="pre">Base.pm</span></code> és a <code class="docutils literal notranslate"><span class="pre">BaseText.pm</span></code> fájlokból örökli a függvények legnagyobb részét, és csak azokat a függvényeket valósítja meg, amelyek eltérő logikát vagy eredményeket igényelnek. A jelölőnégyzet mező illesztőprogram csak a <code class="docutils literal notranslate"><span class="pre">Base.pm</span></code> fájlból örököl, mivel az összes többi függvény nagyon eltérő bármely más alap illesztőprogramtól.</p>
<div class="admonition seealso">
<p class="first admonition-title">Lásd még</p>
<p class="last">Nézze meg a <code class="docutils literal notranslate"><span class="pre">/Kernel/System/DynmicField/Backend.pm</span></code> modul Perl On-line Dokumentációját (POD) az összes attribútum listája és a lehetséges visszatérési adatok megismeréséhez az egyes függvényeknél.</p>
</div>
<p>Ebben a szakaszban a jelszó dinamikus mező illesztőprogram van bemutatva és elmagyarázva. Ez az illesztőprogram örököl néhány függvényt a <code class="docutils literal notranslate"><span class="pre">Base.pm</span></code> és a <code class="docutils literal notranslate"><span class="pre">BaseText.pm</span></code> fájlokból, és csak azokat a függvényeket valósítja meg, amelyek eltérő eredményeket igényelnek.</p>
<div class="highlight-Perl notranslate"><div class="highlight"><pre><span></span><span class="c1"># --</span>
<span class="c1"># Copyright (C) 2001-2020 OTRS AG, https://otrs.com/</span>
<span class="c1"># --</span>
<span class="c1"># This software comes with ABSOLUTELY NO WARRANTY. For details, see</span>
<span class="c1"># the enclosed file COPYING for license information (GPL). If you</span>
<span class="c1"># did not receive this file, see https://www.gnu.org/licenses/gpl-3.0.txt.</span>
<span class="c1"># --</span>

<span class="k">package</span> <span class="nn">Kernel::System::DynamicField::Driver::Password</span><span class="p">;</span>

<span class="k">use</span> <span class="nn">strict</span><span class="p">;</span>
<span class="k">use</span> <span class="nn">warnings</span><span class="p">;</span>

<span class="k">use</span> <span class="nn">Kernel::System::VariableCheck</span> <span class="sx">qw(:all)</span><span class="p">;</span>
<span class="k">use</span> <span class="nn">Kernel::System::DynamicFieldValue</span><span class="p">;</span>

<span class="k">use</span> <span class="nn">base</span> <span class="sx">qw(Kernel::System::DynamicField::Driver::BaseText)</span><span class="p">;</span>

<span class="k">our</span> <span class="nv">@ObjectDependencies</span> <span class="o">=</span> <span class="p">(</span>
    <span class="s">&#39;Kernel::Config&#39;</span><span class="p">,</span>
    <span class="s">&#39;Kernel::System::DynamicFieldValue&#39;</span><span class="p">,</span>
    <span class="s">&#39;Kernel::System::Main&#39;</span><span class="p">,</span>
<span class="p">);</span>
</pre></div>
</div>
<p>Ez egy gyakori fejléc, amely megtalálható a szokásos OTRS modulokban. Az osztály/csomag neve a <code class="docutils literal notranslate"><span class="pre">package</span></code> kulcsszón keresztül van deklarálva. Figyelje meg, hogy a <code class="docutils literal notranslate"><span class="pre">BaseText</span></code> osztályt használják alaposztályként.</p>
<div class="highlight-Perl notranslate"><div class="highlight"><pre><span></span><span class="k">sub</span> <span class="nf">new</span> <span class="p">{</span>
    <span class="k">my</span> <span class="p">(</span> <span class="nv">$Type</span><span class="p">,</span> <span class="nv">%Param</span> <span class="p">)</span> <span class="o">=</span> <span class="nv">@_</span><span class="p">;</span>

    <span class="c1"># allocate new hash for object</span>
    <span class="k">my</span> <span class="nv">$Self</span> <span class="o">=</span> <span class="p">{};</span>
    <span class="nb">bless</span><span class="p">(</span> <span class="nv">$Self</span><span class="p">,</span> <span class="nv">$Type</span> <span class="p">);</span>

    <span class="c1"># set field behaviors</span>
    <span class="nv">$Self</span><span class="o">-&gt;</span><span class="p">{</span><span class="n">Behaviors</span><span class="p">}</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s">&#39;IsACLReducible&#39;</span>               <span class="o">=&gt;</span> <span class="mi">0</span><span class="p">,</span>
        <span class="s">&#39;IsNotificationEventCondition&#39;</span> <span class="o">=&gt;</span> <span class="mi">1</span><span class="p">,</span>
        <span class="s">&#39;IsSortable&#39;</span>                   <span class="o">=&gt;</span> <span class="mi">0</span><span class="p">,</span>
        <span class="s">&#39;IsFiltrable&#39;</span>                  <span class="o">=&gt;</span> <span class="mi">0</span><span class="p">,</span>
        <span class="s">&#39;IsStatsCondition&#39;</span>             <span class="o">=&gt;</span> <span class="mi">1</span><span class="p">,</span>
        <span class="s">&#39;IsCustomerInterfaceCapable&#39;</span>   <span class="o">=&gt;</span> <span class="mi">1</span><span class="p">,</span>
    <span class="p">};</span>

    <span class="c1"># get the Dynamic Field Backend custom extensions</span>
    <span class="k">my</span> <span class="nv">$DynamicFieldDriverExtensions</span>
        <span class="o">=</span> <span class="nv">$</span><span class="nn">Kernel::</span><span class="nv">OM</span><span class="o">-&gt;</span><span class="n">Get</span><span class="p">(</span><span class="s">&#39;Kernel::Config&#39;</span><span class="p">)</span><span class="o">-&gt;</span><span class="n">Get</span><span class="p">(</span><span class="s">&#39;DynamicFields::Extension::Driver::Password&#39;</span><span class="p">);</span>

    <span class="n">EXTENSION:</span>
    <span class="k">for</span> <span class="k">my</span> <span class="nv">$ExtensionKey</span> <span class="p">(</span> <span class="nb">sort</span> <span class="nb">keys</span> <span class="nv">%</span><span class="p">{</span><span class="nv">$DynamicFieldDriverExtensions</span><span class="p">}</span> <span class="p">)</span> <span class="p">{</span>

        <span class="c1"># skip invalid extensions</span>
        <span class="k">next</span> <span class="n">EXTENSION</span> <span class="k">if</span> <span class="o">!</span><span class="n">IsHashRefWithData</span><span class="p">(</span> <span class="nv">$DynamicFieldDriverExtensions</span><span class="o">-&gt;</span><span class="p">{</span><span class="nv">$ExtensionKey</span><span class="p">}</span> <span class="p">);</span>

        <span class="c1"># create a extension config shortcut</span>
        <span class="k">my</span> <span class="nv">$Extension</span> <span class="o">=</span> <span class="nv">$DynamicFieldDriverExtensions</span><span class="o">-&gt;</span><span class="p">{</span><span class="nv">$ExtensionKey</span><span class="p">};</span>

        <span class="c1"># check if extension has a new module</span>
        <span class="k">if</span> <span class="p">(</span> <span class="nv">$Extension</span><span class="o">-&gt;</span><span class="p">{</span><span class="n">Module</span><span class="p">}</span> <span class="p">)</span> <span class="p">{</span>

            <span class="c1"># check if module can be loaded</span>
            <span class="k">if</span> <span class="p">(</span>
                <span class="o">!</span><span class="nv">$</span><span class="nn">Kernel::</span><span class="nv">OM</span><span class="o">-&gt;</span><span class="n">Get</span><span class="p">(</span><span class="s">&#39;Kernel::System::Main&#39;</span><span class="p">)</span><span class="o">-&gt;</span><span class="n">RequireBaseClass</span><span class="p">(</span> <span class="nv">$Extension</span><span class="o">-&gt;</span><span class="p">{</span><span class="n">Module</span><span class="p">}</span> <span class="p">)</span>
                <span class="p">)</span>
            <span class="p">{</span>
                <span class="nb">die</span> <span class="s">&quot;Can&#39;t load dynamic fields backend module&quot;</span>
                    <span class="o">.</span> <span class="s">&quot; $Extension-&gt;{Module}! $@&quot;</span><span class="p">;</span>
            <span class="p">}</span>
        <span class="p">}</span>

        <span class="c1"># check if extension contains more behaviors</span>
        <span class="k">if</span> <span class="p">(</span> <span class="n">IsHashRefWithData</span><span class="p">(</span> <span class="nv">$Extension</span><span class="o">-&gt;</span><span class="p">{</span><span class="n">Behaviors</span><span class="p">}</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>

            <span class="nv">%</span><span class="p">{</span> <span class="nv">$Self</span><span class="o">-&gt;</span><span class="p">{</span><span class="n">Behaviors</span><span class="p">}</span> <span class="p">}</span> <span class="o">=</span> <span class="p">(</span>
                <span class="nv">%</span><span class="p">{</span> <span class="nv">$Self</span><span class="o">-&gt;</span><span class="p">{</span><span class="n">Behaviors</span><span class="p">}</span> <span class="p">},</span>
                <span class="nv">%</span><span class="p">{</span> <span class="nv">$Extension</span><span class="o">-&gt;</span><span class="p">{</span><span class="n">Behaviors</span><span class="p">}</span> <span class="p">}</span>
            <span class="p">);</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="nv">$Self</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>A <code class="docutils literal notranslate"><span class="pre">new</span></code> konstruktor hozza létre az osztály új példányát. A kódolási irányelvek szerint más osztályoknak azon objektumait kell a <code class="docutils literal notranslate"><span class="pre">new</span></code> konstruktorban létrehozni, amelyek ebben a modulban szükségesek.</p>
<p>Fontos a viselkedéseket helyesen meghatározni, mivel a mező lehet használható vagy lehet nem használható bizonyos képernyőkön. Azokat a függvényeket esetleg nem szükséges megvalósítani, amelyek olyan viselkedésektől függenek, amelyek nem aktívak ennél a bizonyos mezőnél.</p>
<div class="admonition note">
<p class="first admonition-title">Megjegyzés</p>
<p class="last">Az illesztőprogramokat kizárólag a <code class="docutils literal notranslate"><span class="pre">BackendObject</span></code> hozza létre, és nem közvetlenül bármely egyéb modulból.</p>
</div>
<div class="highlight-Perl notranslate"><div class="highlight"><pre><span></span><span class="k">sub</span> <span class="nf">EditFieldRender</span> <span class="p">{</span>
    <span class="k">my</span> <span class="p">(</span> <span class="nv">$Self</span><span class="p">,</span> <span class="nv">%Param</span> <span class="p">)</span> <span class="o">=</span> <span class="nv">@_</span><span class="p">;</span>

    <span class="c1"># take config from field config</span>
    <span class="k">my</span> <span class="nv">$FieldConfig</span> <span class="o">=</span> <span class="nv">$Param</span><span class="p">{</span><span class="n">DynamicFieldConfig</span><span class="p">}</span><span class="o">-&gt;</span><span class="p">{</span><span class="n">Config</span><span class="p">};</span>
    <span class="k">my</span> <span class="nv">$FieldName</span>   <span class="o">=</span> <span class="s">&#39;DynamicField_&#39;</span> <span class="o">.</span> <span class="nv">$Param</span><span class="p">{</span><span class="n">DynamicFieldConfig</span><span class="p">}</span><span class="o">-&gt;</span><span class="p">{</span><span class="n">Name</span><span class="p">};</span>
    <span class="k">my</span> <span class="nv">$FieldLabel</span>  <span class="o">=</span> <span class="nv">$Param</span><span class="p">{</span><span class="n">DynamicFieldConfig</span><span class="p">}</span><span class="o">-&gt;</span><span class="p">{</span><span class="n">Label</span><span class="p">};</span>

    <span class="k">my</span> <span class="nv">$Value</span> <span class="o">=</span> <span class="s">&#39;&#39;</span><span class="p">;</span>

    <span class="c1"># set the field value or default</span>
    <span class="k">if</span> <span class="p">(</span> <span class="nv">$Param</span><span class="p">{</span><span class="n">UseDefaultValue</span><span class="p">}</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nv">$Value</span> <span class="o">=</span> <span class="p">(</span> <span class="nb">defined</span> <span class="nv">$FieldConfig</span><span class="o">-&gt;</span><span class="p">{</span><span class="n">DefaultValue</span><span class="p">}</span> <span class="p">?</span> <span class="nv">$FieldConfig</span><span class="o">-&gt;</span><span class="p">{</span><span class="n">DefaultValue</span><span class="p">}</span> <span class="p">:</span> <span class="s">&#39;&#39;</span> <span class="p">);</span>
    <span class="p">}</span>
    <span class="nv">$Value</span> <span class="o">=</span> <span class="nv">$Param</span><span class="p">{</span><span class="n">Value</span><span class="p">}</span> <span class="k">if</span> <span class="nb">defined</span> <span class="nv">$Param</span><span class="p">{</span><span class="n">Value</span><span class="p">};</span>

    <span class="c1"># extract the dynamic field value from the web request</span>
    <span class="k">my</span> <span class="nv">$FieldValue</span> <span class="o">=</span> <span class="nv">$Self</span><span class="o">-&gt;</span><span class="n">EditFieldValueGet</span><span class="p">(</span>
        <span class="nv">%Param</span><span class="p">,</span>
    <span class="p">);</span>

    <span class="c1"># set values from ParamObject if present</span>
    <span class="k">if</span> <span class="p">(</span> <span class="nb">defined</span> <span class="nv">$FieldValue</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nv">$Value</span> <span class="o">=</span> <span class="nv">$FieldValue</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="c1"># check and set class if necessary</span>
    <span class="k">my</span> <span class="nv">$FieldClass</span> <span class="o">=</span> <span class="s">&#39;DynamicFieldText W50pc&#39;</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span> <span class="nb">defined</span> <span class="nv">$Param</span><span class="p">{</span><span class="n">Class</span><span class="p">}</span> <span class="o">&amp;&amp;</span> <span class="nv">$Param</span><span class="p">{</span><span class="n">Class</span><span class="p">}</span> <span class="ow">ne</span> <span class="s">&#39;&#39;</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nv">$FieldClass</span> <span class="o">.=</span> <span class="s">&#39; &#39;</span> <span class="o">.</span> <span class="nv">$Param</span><span class="p">{</span><span class="n">Class</span><span class="p">};</span>
    <span class="p">}</span>

    <span class="c1"># set field as mandatory</span>
    <span class="nv">$FieldClass</span> <span class="o">.=</span> <span class="s">&#39; Validate_Required&#39;</span> <span class="k">if</span> <span class="nv">$Param</span><span class="p">{</span><span class="n">Mandatory</span><span class="p">};</span>

    <span class="c1"># set error css class</span>
    <span class="nv">$FieldClass</span> <span class="o">.=</span> <span class="s">&#39; ServerError&#39;</span> <span class="k">if</span> <span class="nv">$Param</span><span class="p">{</span><span class="n">ServerError</span><span class="p">};</span>

    <span class="k">my</span> <span class="nv">$HTMLString</span> <span class="o">=</span> <span class="s">&lt;&lt;&quot;</span><span class="dl">EOF</span><span class="s">&quot;;</span>
<span class="s">&lt;input type=&quot;password&quot; class=&quot;$FieldClass&quot; id=&quot;$FieldName&quot; name=&quot;$FieldName&quot; title=&quot;$FieldLabel&quot; value=&quot;$Value&quot; /&gt;</span>
<span class="dl">EOF</span>

    <span class="k">if</span> <span class="p">(</span> <span class="nv">$Param</span><span class="p">{</span><span class="n">Mandatory</span><span class="p">}</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">my</span> <span class="nv">$DivID</span> <span class="o">=</span> <span class="nv">$FieldName</span> <span class="o">.</span> <span class="s">&#39;Error&#39;</span><span class="p">;</span>

        <span class="c1"># for client side validation</span>
        <span class="nv">$HTMLString</span> <span class="o">.=</span> <span class="s">&lt;&lt;&quot;</span><span class="dl">EOF</span><span class="s">&quot;;</span>
<span class="s">    &lt;div id=&quot;$DivID&quot; class=&quot;TooltipErrorMessage&quot;&gt;</span>
<span class="s">        &lt;p&gt;</span>
<span class="s">            \$Text{&quot;This field is required.&quot;}</span>
<span class="s">        &lt;/p&gt;</span>
<span class="s">    &lt;/div&gt;</span>
<span class="dl">EOF</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span> <span class="nv">$Param</span><span class="p">{</span><span class="n">ServerError</span><span class="p">}</span> <span class="p">)</span> <span class="p">{</span>

        <span class="k">my</span> <span class="nv">$ErrorMessage</span> <span class="o">=</span> <span class="nv">$Param</span><span class="p">{</span><span class="n">ErrorMessage</span><span class="p">}</span> <span class="o">||</span> <span class="s">&#39;This field is required.&#39;</span><span class="p">;</span>
        <span class="k">my</span> <span class="nv">$DivID</span> <span class="o">=</span> <span class="nv">$FieldName</span> <span class="o">.</span> <span class="s">&#39;ServerError&#39;</span><span class="p">;</span>

        <span class="c1"># for server side validation</span>
        <span class="nv">$HTMLString</span> <span class="o">.=</span> <span class="s">&lt;&lt;&quot;</span><span class="dl">EOF</span><span class="s">&quot;;</span>
<span class="s">    &lt;div id=&quot;$DivID&quot; class=&quot;TooltipErrorMessage&quot;&gt;</span>
<span class="s">        &lt;p&gt;</span>
<span class="s">            \$Text{&quot;$ErrorMessage&quot;}</span>
<span class="s">        &lt;/p&gt;</span>
<span class="s">    &lt;/div&gt;</span>
<span class="dl">EOF</span>
    <span class="p">}</span>

    <span class="c1"># call EditLabelRender on the common Driver</span>
    <span class="k">my</span> <span class="nv">$LabelString</span> <span class="o">=</span> <span class="nv">$Self</span><span class="o">-&gt;</span><span class="n">EditLabelRender</span><span class="p">(</span>
        <span class="nv">%Param</span><span class="p">,</span>
        <span class="n">DynamicFieldConfig</span> <span class="o">=&gt;</span> <span class="nv">$Param</span><span class="p">{</span><span class="n">DynamicFieldConfig</span><span class="p">},</span>
        <span class="n">Mandatory</span>          <span class="o">=&gt;</span> <span class="nv">$Param</span><span class="p">{</span><span class="n">Mandatory</span><span class="p">}</span> <span class="o">||</span> <span class="s">&#39;0&#39;</span><span class="p">,</span>
        <span class="n">FieldName</span>          <span class="o">=&gt;</span> <span class="nv">$FieldName</span><span class="p">,</span>
    <span class="p">);</span>

    <span class="k">my</span> <span class="nv">$Data</span> <span class="o">=</span> <span class="p">{</span>
        <span class="n">Field</span> <span class="o">=&gt;</span> <span class="nv">$HTMLString</span><span class="p">,</span>
        <span class="n">Label</span> <span class="o">=&gt;</span> <span class="nv">$LabelString</span><span class="p">,</span>
    <span class="p">};</span>

    <span class="k">return</span> <span class="nv">$Data</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Ez a függvény felelős a mező és annak címkéje HTML ábrázolásának létrehozásáért, és olyan szerkesztő képernyőkön használják, mint például az <code class="docutils literal notranslate"><span class="pre">AgentTicketPhone</span></code>, <code class="docutils literal notranslate"><span class="pre">AgentTicketNote</span></code>, stb.</p>
<div class="highlight-Perl notranslate"><div class="highlight"><pre><span></span><span class="k">sub</span> <span class="nf">DisplayValueRender</span> <span class="p">{</span>
    <span class="k">my</span> <span class="p">(</span> <span class="nv">$Self</span><span class="p">,</span> <span class="nv">%Param</span> <span class="p">)</span> <span class="o">=</span> <span class="nv">@_</span><span class="p">;</span>

    <span class="c1"># set HTMLOutput as default if not specified</span>
    <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nb">defined</span> <span class="nv">$Param</span><span class="p">{</span><span class="n">HTMLOutput</span><span class="p">}</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nv">$Param</span><span class="p">{</span><span class="n">HTMLOutput</span><span class="p">}</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">my</span> <span class="nv">$Value</span><span class="p">;</span>
    <span class="k">my</span> <span class="nv">$Title</span><span class="p">;</span>

    <span class="c1"># check if field is set to show password or not</span>
    <span class="k">if</span> <span class="p">(</span>
        <span class="nb">defined</span> <span class="nv">$Param</span><span class="p">{</span><span class="n">DynamicFieldConfig</span><span class="p">}</span><span class="o">-&gt;</span><span class="p">{</span><span class="n">Config</span><span class="p">}</span><span class="o">-&gt;</span><span class="p">{</span><span class="n">ShowValue</span><span class="p">}</span>
        <span class="o">&amp;&amp;</span> <span class="nv">$Param</span><span class="p">{</span><span class="n">DynamicFieldConfig</span><span class="p">}</span><span class="o">-&gt;</span><span class="p">{</span><span class="n">Config</span><span class="p">}</span><span class="o">-&gt;</span><span class="p">{</span><span class="n">ShowValue</span><span class="p">}</span> <span class="ow">eq</span> <span class="s">&#39;Yes&#39;</span>
        <span class="p">)</span>
    <span class="p">{</span>

        <span class="c1"># get raw Title and Value strings from field value</span>
        <span class="nv">$Value</span> <span class="o">=</span> <span class="nb">defined</span> <span class="nv">$Param</span><span class="p">{</span><span class="n">Value</span><span class="p">}</span> <span class="p">?</span> <span class="nv">$Param</span><span class="p">{</span><span class="n">Value</span><span class="p">}</span> <span class="p">:</span> <span class="s">&#39;&#39;</span><span class="p">;</span>
        <span class="nv">$Title</span> <span class="o">=</span> <span class="nv">$Value</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">else</span> <span class="p">{</span>

        <span class="c1"># show the mask and not the value</span>
        <span class="nv">$Value</span> <span class="o">=</span> <span class="nv">$Param</span><span class="p">{</span><span class="n">DynamicFieldConfig</span><span class="p">}</span><span class="o">-&gt;</span><span class="p">{</span><span class="n">Config</span><span class="p">}</span><span class="o">-&gt;</span><span class="p">{</span><span class="n">ValueMask</span><span class="p">}</span> <span class="o">||</span> <span class="s">&#39;&#39;</span><span class="p">;</span>
        <span class="nv">$Title</span> <span class="o">=</span> <span class="s">&#39;The value of this field is hidden.&#39;</span>
    <span class="p">}</span>

    <span class="c1"># HTMLOutput transformations</span>
    <span class="k">if</span> <span class="p">(</span> <span class="nv">$Param</span><span class="p">{</span><span class="n">HTMLOutput</span><span class="p">}</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nv">$Value</span> <span class="o">=</span> <span class="nv">$Param</span><span class="p">{</span><span class="n">LayoutObject</span><span class="p">}</span><span class="o">-&gt;</span><span class="n">Ascii2Html</span><span class="p">(</span>
            <span class="n">Text</span> <span class="o">=&gt;</span> <span class="nv">$Value</span><span class="p">,</span>
            <span class="n">Max</span> <span class="o">=&gt;</span> <span class="nv">$Param</span><span class="p">{</span><span class="n">ValueMaxChars</span><span class="p">}</span> <span class="o">||</span> <span class="s">&#39;&#39;</span><span class="p">,</span>
        <span class="p">);</span>

        <span class="nv">$Title</span> <span class="o">=</span> <span class="nv">$Param</span><span class="p">{</span><span class="n">LayoutObject</span><span class="p">}</span><span class="o">-&gt;</span><span class="n">Ascii2Html</span><span class="p">(</span>
            <span class="n">Text</span> <span class="o">=&gt;</span> <span class="nv">$Title</span><span class="p">,</span>
            <span class="n">Max</span> <span class="o">=&gt;</span> <span class="nv">$Param</span><span class="p">{</span><span class="n">TitleMaxChars</span><span class="p">}</span> <span class="o">||</span> <span class="s">&#39;&#39;</span><span class="p">,</span>
        <span class="p">);</span>
    <span class="p">}</span>
    <span class="k">else</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span> <span class="nv">$Param</span><span class="p">{</span><span class="n">ValueMaxChars</span><span class="p">}</span> <span class="o">&amp;&amp;</span> <span class="nb">length</span><span class="p">(</span><span class="nv">$Value</span><span class="p">)</span> <span class="o">&gt;</span> <span class="nv">$Param</span><span class="p">{</span><span class="n">ValueMaxChars</span><span class="p">}</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nv">$Value</span> <span class="o">=</span> <span class="nb">substr</span><span class="p">(</span> <span class="nv">$Value</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="nv">$Param</span><span class="p">{</span><span class="n">ValueMaxChars</span><span class="p">}</span> <span class="p">)</span> <span class="o">.</span> <span class="s">&#39;...&#39;</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">if</span> <span class="p">(</span> <span class="nv">$Param</span><span class="p">{</span><span class="n">TitleMaxChars</span><span class="p">}</span> <span class="o">&amp;&amp;</span> <span class="nb">length</span><span class="p">(</span><span class="nv">$Title</span><span class="p">)</span> <span class="o">&gt;</span> <span class="nv">$Param</span><span class="p">{</span><span class="n">TitleMaxChars</span><span class="p">}</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nv">$Title</span> <span class="o">=</span> <span class="nb">substr</span><span class="p">(</span> <span class="nv">$Title</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="nv">$Param</span><span class="p">{</span><span class="n">TitleMaxChars</span><span class="p">}</span> <span class="p">)</span> <span class="o">.</span> <span class="s">&#39;...&#39;</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="c1"># create return structure</span>
    <span class="k">my</span> <span class="nv">$Data</span> <span class="o">=</span> <span class="p">{</span>
        <span class="n">Value</span> <span class="o">=&gt;</span> <span class="nv">$Value</span><span class="p">,</span>
        <span class="n">Title</span> <span class="o">=&gt;</span> <span class="nv">$Title</span><span class="p">,</span>
    <span class="p">};</span>

    <span class="k">return</span> <span class="nv">$Data</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>A <code class="docutils literal notranslate"><span class="pre">DisplayValueRender()</span></code> függvény egyszerű szövegként adja vissza a mező értékét és annak feliratát (mindkettő lefordítható). Ennél a bizonyos példánál azt ellenőrizzük, hogy a jelszót meg kell-e mutatni, vagy egy beállítási paraméter által előre meghatározott maszkot kell-e megjeleníteni a dinamikus mezőben.</p>
<div class="highlight-Perl notranslate"><div class="highlight"><pre><span></span><span class="k">sub</span> <span class="nf">ReadableValueRender</span> <span class="p">{</span>
    <span class="k">my</span> <span class="p">(</span> <span class="nv">$Self</span><span class="p">,</span> <span class="nv">%Param</span> <span class="p">)</span> <span class="o">=</span> <span class="nv">@_</span><span class="p">;</span>

    <span class="k">my</span> <span class="nv">$Value</span><span class="p">;</span>
    <span class="k">my</span> <span class="nv">$Title</span><span class="p">;</span>

    <span class="c1"># check if field is set to show password or not</span>
    <span class="k">if</span> <span class="p">(</span>
        <span class="nb">defined</span> <span class="nv">$Param</span><span class="p">{</span><span class="n">DynamicFieldConfig</span><span class="p">}</span><span class="o">-&gt;</span><span class="p">{</span><span class="n">Config</span><span class="p">}</span><span class="o">-&gt;</span><span class="p">{</span><span class="n">ShowValue</span><span class="p">}</span>
        <span class="o">&amp;&amp;</span> <span class="nv">$Param</span><span class="p">{</span><span class="n">DynamicFieldConfig</span><span class="p">}</span><span class="o">-&gt;</span><span class="p">{</span><span class="n">Config</span><span class="p">}</span><span class="o">-&gt;</span><span class="p">{</span><span class="n">ShowValue</span><span class="p">}</span> <span class="ow">eq</span> <span class="s">&#39;Yes&#39;</span>
        <span class="p">)</span>
    <span class="p">{</span>

        <span class="c1"># get raw Title and Value strings from field value</span>
        <span class="nv">$Value</span> <span class="o">=</span> <span class="nv">$Param</span><span class="p">{</span><span class="n">Value</span><span class="p">}</span> <span class="sr">//</span> <span class="s">&#39;&#39;</span><span class="p">;</span>
        <span class="nv">$Title</span> <span class="o">=</span> <span class="nv">$Value</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">else</span> <span class="p">{</span>

        <span class="c1"># show the mask and not the value</span>
        <span class="nv">$Value</span> <span class="o">=</span> <span class="nv">$Param</span><span class="p">{</span><span class="n">DynamicFieldConfig</span><span class="p">}</span><span class="o">-&gt;</span><span class="p">{</span><span class="n">Config</span><span class="p">}</span><span class="o">-&gt;</span><span class="p">{</span><span class="n">ValueMask</span><span class="p">}</span> <span class="o">||</span> <span class="s">&#39;&#39;</span><span class="p">;</span>
        <span class="nv">$Title</span> <span class="o">=</span> <span class="s">&#39;The value of this field is hidden.&#39;</span>
    <span class="p">}</span>

    <span class="c1"># cut strings if needed</span>
    <span class="k">if</span> <span class="p">(</span> <span class="nv">$Param</span><span class="p">{</span><span class="n">ValueMaxChars</span><span class="p">}</span> <span class="o">&amp;&amp;</span> <span class="nb">length</span><span class="p">(</span><span class="nv">$Value</span><span class="p">)</span> <span class="o">&gt;</span> <span class="nv">$Param</span><span class="p">{</span><span class="n">ValueMaxChars</span><span class="p">}</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nv">$Value</span> <span class="o">=</span> <span class="nb">substr</span><span class="p">(</span> <span class="nv">$Value</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="nv">$Param</span><span class="p">{</span><span class="n">ValueMaxChars</span><span class="p">}</span> <span class="p">)</span> <span class="o">.</span> <span class="s">&#39;...&#39;</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">if</span> <span class="p">(</span> <span class="nv">$Param</span><span class="p">{</span><span class="n">TitleMaxChars</span><span class="p">}</span> <span class="o">&amp;&amp;</span> <span class="nb">length</span><span class="p">(</span><span class="nv">$Title</span><span class="p">)</span> <span class="o">&gt;</span> <span class="nv">$Param</span><span class="p">{</span><span class="n">TitleMaxChars</span><span class="p">}</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nv">$Title</span> <span class="o">=</span> <span class="nb">substr</span><span class="p">(</span> <span class="nv">$Title</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="nv">$Param</span><span class="p">{</span><span class="n">TitleMaxChars</span><span class="p">}</span> <span class="p">)</span> <span class="o">.</span> <span class="s">&#39;...&#39;</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="c1"># create return structure</span>
    <span class="k">my</span> <span class="nv">$Data</span> <span class="o">=</span> <span class="p">{</span>
        <span class="n">Value</span> <span class="o">=&gt;</span> <span class="nv">$Value</span><span class="p">,</span>
        <span class="n">Title</span> <span class="o">=&gt;</span> <span class="nv">$Title</span><span class="p">,</span>
    <span class="p">};</span>

    <span class="k">return</span> <span class="nv">$Data</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Ez a függvény hasonló a <code class="docutils literal notranslate"><span class="pre">DisplayValueRender()</span></code> függvényhez, de olyan helyeken használják, ahol nincs <code class="docutils literal notranslate"><span class="pre">LayoutObject</span></code>.</p>
</div>
<div class="section" id="other-functions">
<h3>Egyéb függvények<a class="headerlink" href="#other-functions" title="Hivatkozás erre a fejezetcímre">¶</a></h3>
<p>A következők olyan egyéb függvények, amelyek talán szükségesek lehetnek, ha egy új dinamikus mező nem örököl más osztályokból. Ezen függvények teljes kódjának megtekintéséhez nézzen bele közvetlenül a <code class="docutils literal notranslate"><span class="pre">Kernel/System/DynamicField/Driver/Base.pm</span></code> és a <code class="docutils literal notranslate"><span class="pre">Kernel/System/DynamicField/Driver/BaseText.pm</span></code> fájlokba.</p>
<div class="highlight-Perl notranslate"><div class="highlight"><pre><span></span><span class="k">sub</span> <span class="nf">ValueGet</span> <span class="p">{</span> <span class="o">...</span> <span class="p">}</span>
</pre></div>
</div>
<p>Ez a függvény lekéri az értéket a mezőből egy adott objektumnál. Ebben az esetben az első szövegértéket adjuk vissza, mivel a mező egyszerre csak egy szövegértéket tárol.</p>
<div class="highlight-Perl notranslate"><div class="highlight"><pre><span></span><span class="k">sub</span> <span class="nf">ValueSet</span> <span class="p">{</span> <span class="o">...</span> <span class="p">}</span>
</pre></div>
</div>
<p>Ez a függvényt egy dinamikus mező érték tárolásához használják. Ebben az esetben a mező csak egy szöveg típusú értéket tárol. Más mezők tárolhatnak egynél több értéket is a <code class="docutils literal notranslate"><span class="pre">ValueText</span></code>, a <code class="docutils literal notranslate"><span class="pre">ValueDateTime</span></code> vagy a <code class="docutils literal notranslate"><span class="pre">ValueInt</span></code> formátumnál.</p>
<div class="highlight-Perl notranslate"><div class="highlight"><pre><span></span><span class="k">sub</span> <span class="nf">ValueDelete</span> <span class="p">{</span> <span class="o">...</span> <span class="p">}</span>
</pre></div>
</div>
<p>Ezt a függvényt egy mező értékének törléséhez használják, amely egy bizonyos objektumazonosítóhoz van csatolva. Például ha egy objektum példánynak törlésére készülnek, akkor nincs oka a mezőérték tárolásának az adatbázisban annál a bizonyos objektumpéldánynál.</p>
<div class="highlight-Perl notranslate"><div class="highlight"><pre><span></span><span class="k">sub</span> <span class="nf">AllValuesDelete</span> <span class="p">{</span> <span class="o">...</span> <span class="p">}</span>
</pre></div>
</div>
<p>Ezt a függvényt az összes érték törléséhez használják egy bizonyos dinamikus mezőből. Ez a függvény nagyon hasznos, amikor egy dinamikus mező törlésre fog kerülni.</p>
<div class="highlight-Perl notranslate"><div class="highlight"><pre><span></span><span class="k">sub</span> <span class="nf">ValueValidate</span> <span class="p">{</span> <span class="o">...</span> <span class="p">}</span>
</pre></div>
</div>
<p>Ezt a függvényt annak ellenőrzéséhez használják, hogy az érték megegyezik-e a típusának.</p>
<div class="highlight-Perl notranslate"><div class="highlight"><pre><span></span><span class="k">sub</span> <span class="nf">SearchSQLGet</span> <span class="p">{</span> <span class="o">...</span> <span class="p">}</span>
</pre></div>
</div>
<p>Ezt a függvényt a <code class="docutils literal notranslate"><span class="pre">TicketSearch</span></code> alapmodul használja egy jegy kereséséhez szükséges belső lekérdezés felépítéséhez, ezt a mezőt alapul véve keresési paraméterként.</p>
<div class="highlight-Perl notranslate"><div class="highlight"><pre><span></span><span class="k">sub</span> <span class="nf">SearchSQLOrderFieldGet</span> <span class="p">{</span> <span class="o">...</span> <span class="p">}</span>
</pre></div>
</div>
<p>Ez a függvény szintén egy segítő a <code class="docutils literal notranslate"><span class="pre">TicketSearch</span></code> modulhoz. A <code class="docutils literal notranslate"><span class="pre">$Param{TableAlias}</span></code> paramétert meg kell tartani, és a <code class="docutils literal notranslate"><span class="pre">value_text</span></code> lecserélhető a <code class="docutils literal notranslate"><span class="pre">value_date</span></code> vagy a <code class="docutils literal notranslate"><span class="pre">value_int</span></code> paraméterrel a mezőtől függően.</p>
<div class="highlight-Perl notranslate"><div class="highlight"><pre><span></span><span class="k">sub</span> <span class="nf">EditFieldValueGet</span> <span class="p">{</span> <span class="o">...</span> <span class="p">}</span>
</pre></div>
</div>
<p>Ezt a függvényt az OTRS szerkesztőképernyőin használják, és a célja a mező értékének lekérése vagy egy sablonból (mint például az általános ügyintéző profilból), vagy egy webkérésből. Ez a függvény megkapja a webkérést a <code class="docutils literal notranslate"><span class="pre">$Param{ParamObject}</span></code> paraméterben, amely az előtétprogram-modul vagy a képernyő <code class="docutils literal notranslate"><span class="pre">ParamObject</span></code> objektumának egy másolata.</p>
<p>Két visszatérési formátum létezik ennél a függvénynél. A normál, amely egyszerűen a nyers érték, vagy egy szerkezet, amely a mezőnév =&gt; mezőérték páros. Például egy dátum dinamikus mező normális esetben a dátumot szövegként adja vissza, és ha egy szerkezetet kell visszaadnia, akkor a kivonatban egy párost ad vissza a dátum minden egyes részéhez.</p>
<p>Ha az eredménynek egy szerkezetnek kell lennie, akkor normális esetben ezt arra használják, hogy az értékét egy sablonban tárolja, mint például egy általános ügyintéző profilban. Például egy dátummező számos HTML összetevőt használ a mező felépítéséhez, mint például a használt jelölőnégyzetet és kiválasztókat az évhez, hónaphoz, naphoz, stb.</p>
<div class="highlight-Perl notranslate"><div class="highlight"><pre><span></span><span class="k">sub</span> <span class="nf">EditFieldValueValidate</span> <span class="p">{</span> <span class="o">...</span> <span class="p">}</span>
</pre></div>
</div>
<p>Ennek a függvénynek biztosítania kell legalább egy metódust az ellenőrzéshez, ha a mező üres, és hibát kell visszaadnia, ha a mező üres és kötelező, de végrehajthat további ellenőrzéseket is a másfajta mezőknél, mint például ha a kiválasztott lehetőség érvényes, vagy ha egy dátumnak csak a múltban kell lennie, stb. Egy egyéni hibaüzenetet is biztosíthat.</p>
<div class="highlight-Perl notranslate"><div class="highlight"><pre><span></span><span class="k">sub</span> <span class="nf">SearchFieldRender</span> <span class="p">{</span> <span class="o">...</span> <span class="p">}</span>
</pre></div>
</div>
<p>Ezt a függvényt a jegykeresés párbeszédablak használja, és hasonló a <code class="docutils literal notranslate"><span class="pre">EditFieldRander()</span></code> függvényhez, de normális esetben egy keresési képernyőn kisebb változtatásokat kell elvégezni az összes mezőnél. Például ebben az esetben egy HTML szöveges beviteli mező használunk egy jelszóbeviteli mező helyett. Más mezőkben (például legördülő lista) többválasztósként jelenik meg azért, hogy egyszerre több érték keresését tegye lehetővé a felhasználónak.</p>
<div class="highlight-Perl notranslate"><div class="highlight"><pre><span></span><span class="k">sub</span> <span class="nf">SearchFieldValueGet</span> <span class="p">{</span> <span class="o">...</span> <span class="p">}</span>
</pre></div>
</div>
<p>Nagyon hasonló az <code class="docutils literal notranslate"><span class="pre">EditFieldValueGet()</span></code> függvényhez, de eltérő név előtagot használ a keresési párbeszédablak képernyőhöz átírva.</p>
<div class="highlight-Perl notranslate"><div class="highlight"><pre><span></span><span class="k">sub</span> <span class="nf">SearchFieldParameterBuild</span> <span class="p">{</span> <span class="o">...</span> <span class="p">}</span>
</pre></div>
</div>
<p>Ezt a függvényt is a jegykeresés párbeszédablak használja a helyes operátor és érték beállításához, hogy elvégezze a keresést ezen a mezőn. Azt is visszaadja, hogy az értéket hogyan kell megjeleníteni a használt keresési attribútumokban a találatok oldalon.</p>
<div class="highlight-Perl notranslate"><div class="highlight"><pre><span></span><span class="k">sub</span> <span class="nf">StatsFieldParameterBuild</span> <span class="p">{</span> <span class="o">...</span> <span class="p">}</span>
</pre></div>
</div>
<p>Ezt a függvényt a statisztikák moduljai használják. Tartalmazza a mező meghatározást a statisztikák formátumában. A rögzített értékekkel rendelkező mezőknél tartalmazza az összes lehetséges értéket is, és ha azok lefordíthatók, akkor nézze meg a <code class="docutils literal notranslate"><span class="pre">BaseSelect</span></code> illesztőprogram kódját példaként arra, hogy azokat hogyan kell megvalósítani.</p>
<div class="highlight-Perl notranslate"><div class="highlight"><pre><span></span><span class="k">sub</span> <span class="nf">StatsSearchFieldParameterBuild</span> <span class="p">{</span> <span class="o">...</span> <span class="p">}</span>
</pre></div>
</div>
<p>Ez a függvény nagyon hasonló a <code class="docutils literal notranslate"><span class="pre">SearchFieldParameterBuild()</span></code> függvényhez. A különbség az, hogy az utóbbi a keresési profilból kapja meg az értéket, és ez pedig közvetlenül a paramétereiből kapja meg az értéket.</p>
<p>Ezt a függvényt a statisztikák modul használja.</p>
<div class="highlight-Perl notranslate"><div class="highlight"><pre><span></span><span class="k">sub</span> <span class="nf">TemplateValueTypeGet</span> <span class="p">{</span> <span class="o">...</span> <span class="p">}</span>
</pre></div>
</div>
<p>Ezt a függvényt annak megismeréséhez használják, hogy a dinamikus mező értékei hogyan vannak eltárolva egy olyan profilnál, amelyet le kell kérni skalár vagy tömb formában, és meghatározza a mező helyes nevét is a profilban.</p>
<div class="highlight-Perl notranslate"><div class="highlight"><pre><span></span><span class="k">sub</span> <span class="nf">RandomValueSet</span> <span class="p">{</span> <span class="o">...</span> <span class="p">}</span>
</pre></div>
</div>
<p>Ezt a függvényt az <code class="docutils literal notranslate"><span class="pre">otrs.FillDB.pl</span></code> parancsfájl használja, hogy feltöltse az adatbázist néhány teszt és véletlenszerű adattal. A függvény által beszúrt érték nem igazán fontos. Az egyetlen megkötés az, hogy az értéknek kompatibilisnek kell lennie a mezőérték típusával.</p>
<div class="highlight-Perl notranslate"><div class="highlight"><pre><span></span><span class="k">sub</span> <span class="nf">ObjectMatch</span> <span class="p">{</span> <span class="o">...</span> <span class="p">}</span>
</pre></div>
</div>
<p>Az értesítési modulok használják. Ez a függvény 1-et ad vissza, ha a mező jelen van a <code class="docutils literal notranslate"><span class="pre">$Param{ObjectAttributes}</span></code> paraméterben, és ha megegyezik a megadott értékkel.</p>
</div>
</div>
</div>


           </div>
           
          </div>
          

<script>
// Start Google Analytics Tracking
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');
ga('create', 'UA-28118796-2', 'auto');
ga('send', 'pageview');
// End Google Analytics Tracking
</script>

<footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="dynamic-fields-extend.html" class="btn btn-neutral float-right" title="Egy dinamikus mező funkcionalitás kiterjesztés létrehozása" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="dynamic-fields-extend-options.html" class="btn btn-neutral" title="Hogyan lehet kiterjeszteni a dinamikus mezőket" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2001-2020 OTRS AG, https://otrs.com/

    </p>
  </div> 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../../../" src="../../../../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../../../../_static/jquery.js"></script>
        <script type="text/javascript" src="../../../../_static/underscore.js"></script>
        <script type="text/javascript" src="../../../../_static/doctools.js"></script>
        <script type="text/javascript" src="../../../../_static/translations.js"></script>
    

  

  <script type="text/javascript" src="../../../../_static/js/theme.js"></script>

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>