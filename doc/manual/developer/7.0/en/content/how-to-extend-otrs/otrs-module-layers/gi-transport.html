

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Network Transport &mdash; OTRS Developer Manual 7.0 documentation</title>
  

  
  
  
  

  

  
  
    

  

  <link rel="stylesheet" href="../../../_static/css/otrs.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="Mapping" href="gi-mapping.html" />
    <link rel="prev" title="Ticket Menu Module" href="ticket-menu.html" /> 

  
  <script src="../../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          
    
    
    <a href="https://doc.otrs.com/doc" class="icon fa-rocket DocumentationOverview"> OTRS Documentation</a>

    

          
            <a href="../../index.html" class="icon icon-home"> OTRS Developer Manual
          

          
            
            <img src="../../../_static/otrs-logo.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                7.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          


        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../get-started.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../how-it-works.html">OTRS Internals - How it Works</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../how-to-extend-otrs.html">How to Extend OTRS</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../writing-otrs-application.html">Writing A New OTRS Front End Module</a></li>
<li class="toctree-l2"><a class="reference internal" href="../writing-new-otrs-frontend-component.html">Writing A New OTRS Front End Component</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../otrs-module-layers.html">Using the power of the OTRS module layers</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="agent-auth.html">Agent Authentication Module</a></li>
<li class="toctree-l3"><a class="reference internal" href="auth-sync.html">Authentication Synchronization Module</a></li>
<li class="toctree-l3"><a class="reference internal" href="customer-auth.html">Customer Authentication Module</a></li>
<li class="toctree-l3"><a class="reference internal" href="customer-user-preferences.html">Customer User Preferences Module</a></li>
<li class="toctree-l3"><a class="reference internal" href="queue-preferences.html">Queue Preferences Module</a></li>
<li class="toctree-l3"><a class="reference internal" href="service-preferences.html">Service Preferences Module</a></li>
<li class="toctree-l3"><a class="reference internal" href="sla-preferences.html">SLA Preferences Module</a></li>
<li class="toctree-l3"><a class="reference internal" href="log.html">Log Module</a></li>
<li class="toctree-l3"><a class="reference internal" href="outputfilter.html">Output Filter</a></li>
<li class="toctree-l3"><a class="reference internal" href="stats.html">Stats Module</a></li>
<li class="toctree-l3"><a class="reference internal" href="ticketnumber-generator.html">Ticket Number Generator Modules</a></li>
<li class="toctree-l3"><a class="reference internal" href="ticketevent.html">Ticket Event Module</a></li>
<li class="toctree-l3"><a class="reference internal" href="dashboard.html">Dashboard Module</a></li>
<li class="toctree-l3"><a class="reference internal" href="notify.html">Notification Module</a></li>
<li class="toctree-l3"><a class="reference internal" href="ticket-menu.html">Ticket Menu Module</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Network Transport</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#transport-back-end">Transport Back End</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="gi-mapping.html">Mapping</a></li>
<li class="toctree-l3"><a class="reference internal" href="gi-invoker.html">Invoker</a></li>
<li class="toctree-l3"><a class="reference internal" href="gi-operation.html">Operation</a></li>
<li class="toctree-l3"><a class="reference internal" href="daemon/daemon-modules.html">OTRS Daemon</a></li>
<li class="toctree-l3"><a class="reference internal" href="daemon/scheduler-task-worker-modules.html">OTRS Scheduler</a></li>
<li class="toctree-l3"><a class="reference internal" href="dynamic-fields/dynamic-fields-overview.html">Overview</a></li>
<li class="toctree-l3"><a class="reference internal" href="dynamic-fields/dynamic-fields-framework.html">Dynamic Fields Framework</a></li>
<li class="toctree-l3"><a class="reference internal" href="dynamic-fields/dynamic-fields-interaction.html">Dynamic Field Interaction With Front End Modules</a></li>
<li class="toctree-l3"><a class="reference internal" href="dynamic-fields/dynamic-fields-extend-options.html">How To Extend The Dynamic Fields</a></li>
<li class="toctree-l3"><a class="reference internal" href="dynamic-fields/dynamic-fields-new-field.html">Creating A New Dynamic Field</a></li>
<li class="toctree-l3"><a class="reference internal" href="dynamic-fields/dynamic-fields-extend.html">Creating a Dynamic Field Functionality Extension</a></li>
<li class="toctree-l3"><a class="reference internal" href="ticket-postmaster-modules.html">Ticket Postmaster Module</a></li>
<li class="toctree-l3"><a class="reference internal" href="process-management-modules.html">Process Management</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../how-to-publish-otrs-extensions.html">How to Publish Your OTRS Extensions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../documentation.html">Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../contributing.html">Contributing to OTRS</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../additional-resources.html">Additional Resources</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">OTRS Developer Manual</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../../how-to-extend-otrs.html">How to Extend OTRS</a> &raquo;</li>
        
          <li><a href="../otrs-module-layers.html">Using the power of the OTRS module layers</a> &raquo;</li>
        
      <li>Network Transport</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            
              <a href="https://github.com/OTRS/doc-developer/blob/rel-7_0/content/how-to-extend-otrs/otrs-module-layers/gi-transport.rst" class="fa fa-github"> Edit on GitHub</a>
            
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="network-transport">
<h1>Network Transport<a class="headerlink" href="#network-transport" title="Permalink to this headline">Â¶</a></h1>
<p>The network transport is used as method to send and receive information between OTRS and a remote system. The generic interface configuration allows a web service to use different network transport modules for
provider and requester, but the most common scenario is that the same transport module is used for both.</p>
<dl class="docutils">
<dt>OTRS as provider</dt>
<dd>OTRS uses the network transport modules to get the data from the remote system and the operation to be executed. After the operation is performed OTRS uses them again to send the response back to the remote system.</dd>
<dt>OTRS as requester</dt>
<dd>OTRS uses the network transport modules to send petitions to the remote system to perform a remote action along with the required data. OTRS waits for the remote system response and send it back to the requester module.</dd>
</dl>
<p>In both ways network transport modules deal with the data in the remote system format. It is not recommended to do any data transformation in this modules, as the mapping layer is the responsible to perform any data transformation needed during the communication. An exception of this is the data conversion that is required specifically by for the transport e.g. XML or JSON from / to Perl conversions.</p>
<div class="section" id="transport-back-end">
<h2>Transport Back End<a class="headerlink" href="#transport-back-end" title="Permalink to this headline">Â¶</a></h2>
<p>Next we will show how to develop a new transport back end. Each transport back end has to implement these subroutines:</p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">new</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">ProviderProcessRequest</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">ProviderGenerateResponse</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">RequesterPerformRequest</span></code></li>
</ul>
<p>We should implement each one of this methods in order to be able to communicate correctly with a remote system in both ways. All network transport back ends are handled by the transport module (<code class="docutils literal notranslate"><span class="pre">Kernel/GenericInterface/Transport.pm</span></code>).</p>
<p>Currently generic interface implements the HTTP SOAP and HTTP REST transports. If the planned web service can use HTTP SOAP or HTTP SOAP there is no need to create a new network transport module, instead we recommend to take a look into HTTP SOAP or HTTP REST configurations to check their settings and how it can be tuned according to the remote system.</p>
<div class="section" id="network-transport-code-example">
<h3>Network Transport Code Example<a class="headerlink" href="#network-transport-code-example" title="Permalink to this headline">Â¶</a></h3>
<p>In case that the provided network transports does not match the web service needs, then in this section a sample network transport module is shown and each subroutine is explained. Normally transport modules uses CPAN modules as back ends. For example the HTTP SOAP transport modules uses <code class="docutils literal notranslate"><span class="pre">SOAP::Lite</span></code> module as back end.</p>
<p>For this example a custom package is used to return the data without doing a real network request to a remote system, instead this custom module acts as a loop-back interface.</p>
<div class="highlight-Perl notranslate"><div class="highlight"><pre><span></span><span class="c1"># --</span>
<span class="c1"># Copyright (C) 2001-2020 OTRS AG, https://otrs.com/</span>
<span class="c1"># --</span>
<span class="c1"># This software comes with ABSOLUTELY NO WARRANTY. For details, see</span>
<span class="c1"># the enclosed file COPYING for license information (GPL). If you</span>
<span class="c1"># did not receive this file, see https://www.gnu.org/licenses/gpl-3.0.txt.</span>
<span class="c1"># --</span>

<span class="k">package</span> <span class="nn">Kernel::GenericInterface::Transport::HTTP::Test</span><span class="p">;</span>

<span class="k">use</span> <span class="nn">strict</span><span class="p">;</span>
<span class="k">use</span> <span class="nn">warnings</span><span class="p">;</span>

<span class="k">use</span> <span class="nn">HTTP::Request::Common</span><span class="p">;</span>
<span class="k">use</span> <span class="nn">LWP::UserAgent</span><span class="p">;</span>
<span class="k">use</span> <span class="nn">LWP::Protocol</span><span class="p">;</span>

<span class="c1"># prevent &#39;Used once&#39; warning for Kernel::OM</span>
<span class="k">use</span> <span class="nn">Kernel::System::ObjectManager</span><span class="p">;</span>

<span class="k">our</span> <span class="nv">$ObjectManagerDisabled</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
</pre></div>
</div>
<p>This is common header that can be found in common OTRS modules. The class/package name is declared via the <code class="docutils literal notranslate"><span class="pre">package</span></code> keyword. Transports can not be instantiated by the object manager.</p>
<div class="highlight-Perl notranslate"><div class="highlight"><pre><span></span><span class="k">sub</span> <span class="nf">new</span> <span class="p">{</span>
    <span class="k">my</span> <span class="p">(</span> <span class="nv">$Type</span><span class="p">,</span> <span class="nv">%Param</span> <span class="p">)</span> <span class="o">=</span> <span class="nv">@_</span><span class="p">;</span>

    <span class="k">my</span> <span class="nv">$Self</span> <span class="o">=</span> <span class="p">{};</span>
    <span class="nb">bless</span><span class="p">(</span> <span class="nv">$Self</span><span class="p">,</span> <span class="nv">$Type</span> <span class="p">);</span>

    <span class="k">for</span> <span class="k">my</span> <span class="nv">$Needed</span> <span class="p">(</span><span class="sx">qw( DebuggerObject TransportConfig)</span><span class="p">)</span> <span class="p">{</span>
        <span class="nv">$Self</span><span class="o">-&gt;</span><span class="p">{</span><span class="nv">$Needed</span><span class="p">}</span> <span class="o">=</span> <span class="nv">$Param</span><span class="p">{</span><span class="nv">$Needed</span><span class="p">}</span> <span class="o">||</span> <span class="k">return</span> <span class="p">{</span>
            <span class="n">Success</span>      <span class="o">=&gt;</span> <span class="mi">0</span><span class="p">,</span>
            <span class="n">ErrorMessage</span> <span class="o">=&gt;</span> <span class="s">&quot;Got no $Needed!&quot;</span>
        <span class="p">};</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="nv">$Self</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The constructor <code class="docutils literal notranslate"><span class="pre">new</span></code> creates a new instance of the class. According to the coding guidelines only objects of other classes not handled by the object manager that are needed in this module have to be created in <code class="docutils literal notranslate"><span class="pre">new</span></code>.</p>
<div class="highlight-Perl notranslate"><div class="highlight"><pre><span></span><span class="k">sub</span> <span class="nf">ProviderProcessRequest</span> <span class="p">{</span>
    <span class="k">my</span> <span class="p">(</span> <span class="nv">$Self</span><span class="p">,</span> <span class="nv">%Param</span> <span class="p">)</span> <span class="o">=</span> <span class="nv">@_</span><span class="p">;</span>

    <span class="k">if</span> <span class="p">(</span> <span class="nv">$Self</span><span class="o">-&gt;</span><span class="p">{</span><span class="n">TransportConfig</span><span class="p">}</span><span class="o">-&gt;</span><span class="p">{</span><span class="n">Config</span><span class="p">}</span><span class="o">-&gt;</span><span class="p">{</span><span class="n">Fail</span><span class="p">}</span> <span class="p">)</span> <span class="p">{</span>

        <span class="k">return</span> <span class="p">{</span>
            <span class="n">Success</span>      <span class="o">=&gt;</span> <span class="mi">0</span><span class="p">,</span>
            <span class="n">ErrorMessage</span> <span class="o">=&gt;</span> <span class="s">&quot;HTTP status code: 500&quot;</span><span class="p">,</span>
            <span class="n">Data</span>         <span class="o">=&gt;</span> <span class="p">{},</span>
        <span class="p">};</span>
    <span class="p">}</span>

    <span class="k">my</span> <span class="nv">$ParamObject</span> <span class="o">=</span> <span class="nv">$</span><span class="nn">Kernel::</span><span class="nv">OM</span><span class="o">-&gt;</span><span class="n">Get</span><span class="p">(</span><span class="s">&#39;Kernel::System::Web::Request&#39;</span><span class="p">);</span>

    <span class="k">my</span> <span class="nv">%Result</span><span class="p">;</span>
    <span class="k">for</span> <span class="k">my</span> <span class="nv">$ParamName</span> <span class="p">(</span> <span class="nv">$ParamObject</span><span class="o">-&gt;</span><span class="n">GetParamNames</span><span class="p">()</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nv">$Result</span><span class="p">{</span><span class="nv">$ParamName</span><span class="p">}</span> <span class="o">=</span> <span class="nv">$ParamObject</span><span class="o">-&gt;</span><span class="n">GetParam</span><span class="p">(</span> <span class="n">Param</span> <span class="o">=&gt;</span> <span class="nv">$ParamName</span> <span class="p">);</span>
    <span class="p">}</span>

    <span class="c1"># special handling for empty post request</span>
    <span class="k">if</span> <span class="p">(</span> <span class="nb">scalar</span> <span class="nb">keys</span> <span class="nv">%Result</span> <span class="o">==</span> <span class="mi">1</span> <span class="o">&amp;&amp;</span> <span class="nb">exists</span> <span class="nv">$Result</span><span class="p">{</span><span class="n">POSTDATA</span><span class="p">}</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nv">$Result</span><span class="p">{</span><span class="n">POSTDATA</span><span class="p">}</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nv">%Result</span> <span class="o">=</span> <span class="p">();</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nv">%Result</span> <span class="p">)</span> <span class="p">{</span>

        <span class="k">return</span> <span class="nv">$Self</span><span class="o">-&gt;</span><span class="p">{</span><span class="n">DebuggerObject</span><span class="p">}</span><span class="o">-&gt;</span><span class="n">Error</span><span class="p">(</span>
            <span class="n">Summary</span> <span class="o">=&gt;</span> <span class="s">&#39;No request data found.&#39;</span><span class="p">,</span>
        <span class="p">);</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="p">{</span>
        <span class="n">Success</span>   <span class="o">=&gt;</span> <span class="mi">1</span><span class="p">,</span>
        <span class="n">Data</span>      <span class="o">=&gt;</span> <span class="o">\</span><span class="nv">%Result</span><span class="p">,</span>
        <span class="n">Operation</span> <span class="o">=&gt;</span> <span class="s">&#39;test_operation&#39;</span><span class="p">,</span>
    <span class="p">};</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">ProviderProcessRequest</span></code> function gets the request from the remote system (in this case the same OTRS) and extracts the data and the operation to perform from the request. For this example the operation is always <code class="docutils literal notranslate"><span class="pre">test_operation</span></code>.</p>
<p>The way this function parses the request to get the data and the operation name, depends completely on the protocol to be implemented and the external modules that are used for.</p>
<div class="highlight-Perl notranslate"><div class="highlight"><pre><span></span><span class="k">sub</span> <span class="nf">ProviderGenerateResponse</span> <span class="p">{</span>
    <span class="k">my</span> <span class="p">(</span> <span class="nv">$Self</span><span class="p">,</span> <span class="nv">%Param</span> <span class="p">)</span> <span class="o">=</span> <span class="nv">@_</span><span class="p">;</span>

    <span class="k">if</span> <span class="p">(</span> <span class="nv">$Self</span><span class="o">-&gt;</span><span class="p">{</span><span class="n">TransportConfig</span><span class="p">}</span><span class="o">-&gt;</span><span class="p">{</span><span class="n">Config</span><span class="p">}</span><span class="o">-&gt;</span><span class="p">{</span><span class="n">Fail</span><span class="p">}</span> <span class="p">)</span> <span class="p">{</span>

        <span class="k">return</span> <span class="p">{</span>
            <span class="n">Success</span>      <span class="o">=&gt;</span> <span class="mi">0</span><span class="p">,</span>
            <span class="n">ErrorMessage</span> <span class="o">=&gt;</span> <span class="s">&#39;Test response generation failed&#39;</span><span class="p">,</span>
        <span class="p">};</span>
    <span class="p">}</span>

    <span class="k">my</span> <span class="nv">$Response</span><span class="p">;</span>

    <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nv">$Param</span><span class="p">{</span><span class="n">Success</span><span class="p">}</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nv">$Response</span>
            <span class="o">=</span> <span class="nn">HTTP::Response</span><span class="o">-&gt;</span><span class="k">new</span><span class="p">(</span> <span class="mi">500</span> <span class="o">=&gt;</span> <span class="p">(</span> <span class="nv">$Param</span><span class="p">{</span><span class="n">ErrorMessage</span><span class="p">}</span> <span class="o">||</span> <span class="s">&#39;Internal Server Error&#39;</span> <span class="p">)</span> <span class="p">);</span>
        <span class="nv">$Response</span><span class="o">-&gt;</span><span class="n">protocol</span><span class="p">(</span><span class="s">&#39;HTTP/1.0&#39;</span><span class="p">);</span>
        <span class="nv">$Response</span><span class="o">-&gt;</span><span class="n">content_type</span><span class="p">(</span><span class="s">&quot;text/plain; charset=UTF-8&quot;</span><span class="p">);</span>
        <span class="nv">$Response</span><span class="o">-&gt;</span><span class="n">date</span><span class="p">(</span><span class="nb">time</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="k">else</span> <span class="p">{</span>

        <span class="c1"># generate a request string from the data</span>
        <span class="k">my</span> <span class="nv">$Request</span>
            <span class="o">=</span> <span class="nn">HTTP::Request::Common::</span><span class="n">POST</span><span class="p">(</span> <span class="s">&#39;http://testhost.local/&#39;</span><span class="p">,</span> <span class="n">Content</span> <span class="o">=&gt;</span> <span class="nv">$Param</span><span class="p">{</span><span class="n">Data</span><span class="p">}</span> <span class="p">);</span>

        <span class="nv">$Response</span> <span class="o">=</span> <span class="nn">HTTP::Response</span><span class="o">-&gt;</span><span class="k">new</span><span class="p">(</span> <span class="mi">200</span> <span class="o">=&gt;</span> <span class="s">&quot;OK&quot;</span> <span class="p">);</span>
        <span class="nv">$Response</span><span class="o">-&gt;</span><span class="n">protocol</span><span class="p">(</span><span class="s">&#39;HTTP/1.0&#39;</span><span class="p">);</span>
        <span class="nv">$Response</span><span class="o">-&gt;</span><span class="n">content_type</span><span class="p">(</span><span class="s">&quot;text/plain; charset=UTF-8&quot;</span><span class="p">);</span>
        <span class="nv">$Response</span><span class="o">-&gt;</span><span class="n">add_content_utf8</span><span class="p">(</span> <span class="nv">$Request</span><span class="o">-&gt;</span><span class="n">content</span><span class="p">()</span> <span class="p">);</span>
        <span class="nv">$Response</span><span class="o">-&gt;</span><span class="n">date</span><span class="p">(</span><span class="nb">time</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="nv">$Self</span><span class="o">-&gt;</span><span class="p">{</span><span class="n">DebuggerObject</span><span class="p">}</span><span class="o">-&gt;</span><span class="n">Debug</span><span class="p">(</span>
        <span class="n">Summary</span> <span class="o">=&gt;</span> <span class="s">&#39;Sending HTTP response&#39;</span><span class="p">,</span>
        <span class="n">Data</span>    <span class="o">=&gt;</span> <span class="nv">$Response</span><span class="o">-&gt;</span><span class="n">as_string</span><span class="p">(),</span>
    <span class="p">);</span>

    <span class="c1"># now send response to client</span>
    <span class="k">print</span> <span class="bp">STDOUT</span> <span class="nv">$Response</span><span class="o">-&gt;</span><span class="n">as_string</span><span class="p">();</span>

    <span class="k">return</span> <span class="p">{</span>
        <span class="n">Success</span> <span class="o">=&gt;</span> <span class="mi">1</span><span class="p">,</span>
    <span class="p">};</span>
<span class="p">}</span>
</pre></div>
</div>
<p>This function sends the response back to the remote system for the requested operation.</p>
<p>For this particular example we return a standard HTTP response success (200) or not (500), along with the required data on each case.</p>
<div class="highlight-Perl notranslate"><div class="highlight"><pre><span></span><span class="k">sub</span> <span class="nf">RequesterPerformRequest</span> <span class="p">{</span>
    <span class="k">my</span> <span class="p">(</span> <span class="nv">$Self</span><span class="p">,</span> <span class="nv">%Param</span> <span class="p">)</span> <span class="o">=</span> <span class="nv">@_</span><span class="p">;</span>

    <span class="k">if</span> <span class="p">(</span> <span class="nv">$Self</span><span class="o">-&gt;</span><span class="p">{</span><span class="n">TransportConfig</span><span class="p">}</span><span class="o">-&gt;</span><span class="p">{</span><span class="n">Config</span><span class="p">}</span><span class="o">-&gt;</span><span class="p">{</span><span class="n">Fail</span><span class="p">}</span> <span class="p">)</span> <span class="p">{</span>

        <span class="k">return</span> <span class="p">{</span>
            <span class="n">Success</span>      <span class="o">=&gt;</span> <span class="mi">0</span><span class="p">,</span>
            <span class="n">ErrorMessage</span> <span class="o">=&gt;</span> <span class="s">&quot;HTTP status code: 500&quot;</span><span class="p">,</span>
            <span class="n">Data</span>         <span class="o">=&gt;</span> <span class="p">{},</span>
        <span class="p">};</span>
    <span class="p">}</span>

    <span class="c1"># use custom protocol handler to avoid sending out real network requests</span>
    <span class="nn">LWP::Protocol::</span><span class="n">implementor</span><span class="p">(</span>
        <span class="n">testhttp</span> <span class="o">=&gt;</span> <span class="s">&#39;Kernel::GenericInterface::Transport::HTTP::Test::CustomHTTPProtocol&#39;</span>
    <span class="p">);</span>
    <span class="k">my</span> <span class="nv">$UserAgent</span> <span class="o">=</span> <span class="nn">LWP::UserAgent</span><span class="o">-&gt;</span><span class="k">new</span><span class="p">();</span>
    <span class="k">my</span> <span class="nv">$Response</span> <span class="o">=</span> <span class="nv">$UserAgent</span><span class="o">-&gt;</span><span class="n">post</span><span class="p">(</span> <span class="s">&#39;testhttp://localhost.local/&#39;</span><span class="p">,</span> <span class="n">Content</span> <span class="o">=&gt;</span> <span class="nv">$Param</span><span class="p">{</span><span class="n">Data</span><span class="p">}</span> <span class="p">);</span>

    <span class="k">return</span> <span class="p">{</span>
        <span class="n">Success</span> <span class="o">=&gt;</span> <span class="mi">1</span><span class="p">,</span>
        <span class="n">Data</span>    <span class="o">=&gt;</span> <span class="p">{</span>
            <span class="n">ResponseContent</span> <span class="o">=&gt;</span> <span class="nv">$Response</span><span class="o">-&gt;</span><span class="n">content</span><span class="p">(),</span>
        <span class="p">},</span>
    <span class="p">};</span>
<span class="p">}</span>
</pre></div>
</div>
<p>This is the only function that is used by OTRS as requester. It sends the request to the remote system and waits for its response.</p>
<p>For this example we use a custom protocol handler to avoid send the request to the real network. This custom protocol is specified below.</p>
<div class="highlight-Perl notranslate"><div class="highlight"><pre><span></span><span class="k">package</span> <span class="nn">Kernel::GenericInterface::Transport::HTTP::Test::CustomHTTPProtocol</span><span class="p">;</span>

<span class="k">use</span> <span class="nn">base</span> <span class="sx">qw(LWP::Protocol)</span><span class="p">;</span>

<span class="k">sub</span> <span class="nf">new</span> <span class="p">{</span>
    <span class="k">my</span> <span class="nv">$Class</span> <span class="o">=</span> <span class="nb">shift</span><span class="p">;</span>

    <span class="k">return</span> <span class="nv">$Class</span><span class="o">-&gt;</span><span class="nn">SUPER::</span><span class="k">new</span><span class="p">(</span><span class="nv">@_</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">sub</span> <span class="nf">request</span> <span class="p">{</span>    <span class="c1">## no critic</span>
    <span class="k">my</span> <span class="nv">$Self</span> <span class="o">=</span> <span class="nb">shift</span><span class="p">;</span>

    <span class="k">my</span> <span class="p">(</span> <span class="nv">$Request</span><span class="p">,</span> <span class="nv">$Proxy</span><span class="p">,</span> <span class="nv">$Arg</span><span class="p">,</span> <span class="nv">$Size</span><span class="p">,</span> <span class="nv">$Timeout</span> <span class="p">)</span> <span class="o">=</span> <span class="nv">@_</span><span class="p">;</span>

    <span class="k">my</span> <span class="nv">$Response</span> <span class="o">=</span> <span class="nn">HTTP::Response</span><span class="o">-&gt;</span><span class="k">new</span><span class="p">(</span> <span class="mi">200</span> <span class="o">=&gt;</span> <span class="s">&quot;OK&quot;</span> <span class="p">);</span>
    <span class="nv">$Response</span><span class="o">-&gt;</span><span class="n">protocol</span><span class="p">(</span><span class="s">&#39;HTTP/1.0&#39;</span><span class="p">);</span>
    <span class="nv">$Response</span><span class="o">-&gt;</span><span class="n">content_type</span><span class="p">(</span><span class="s">&quot;text/plain; charset=UTF-8&quot;</span><span class="p">);</span>
    <span class="nv">$Response</span><span class="o">-&gt;</span><span class="n">add_content_utf8</span><span class="p">(</span> <span class="nv">$Request</span><span class="o">-&gt;</span><span class="n">content</span><span class="p">()</span> <span class="p">);</span>
    <span class="nv">$Response</span><span class="o">-&gt;</span><span class="n">date</span><span class="p">(</span><span class="nb">time</span><span class="p">);</span>

    <span class="c1">#print $Request-&gt;as_string();</span>
    <span class="c1">#print $Response-&gt;as_string();</span>

    <span class="k">return</span> <span class="nv">$Response</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>This is the code for the custom protocol that we use. This approach is only useful for training or for testing environments where the remote systems are not available.</p>
<p>For a new module development we do not recommend to use this approach, a real protocol needs to be implemented.</p>
</div>
<div class="section" id="network-transport-configuration-example">
<h3>Network Transport Configuration Example<a class="headerlink" href="#network-transport-configuration-example" title="Permalink to this headline">Â¶</a></h3>
<p>There is the need to register this network transport module to be accessible in the OTRS GUI. This can be done using the XML configuration below.</p>
<div class="highlight-XML notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;ConfigItem</span> <span class="na">Name=</span><span class="s">&quot;GenericInterface::Transport::Module###HTTP::Test&quot;</span> <span class="na">Required=</span><span class="s">&quot;0&quot;</span> <span class="na">Valid=</span><span class="s">&quot;1&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;Description</span> <span class="na">Translatable=</span><span class="s">&quot;1&quot;</span><span class="nt">&gt;</span>GenericInterface module registration for the transport layer.<span class="nt">&lt;/Description&gt;</span>
    <span class="nt">&lt;Group&gt;</span>GenericInterface<span class="nt">&lt;/Group&gt;</span>
    <span class="nt">&lt;SubGroup&gt;</span>GenericInterface::Transport::ModuleRegistration<span class="nt">&lt;/SubGroup&gt;</span>
    <span class="nt">&lt;Setting&gt;</span>
        <span class="nt">&lt;Hash&gt;</span>
            <span class="nt">&lt;Item</span> <span class="na">Key=</span><span class="s">&quot;Name&quot;</span><span class="nt">&gt;</span>Test<span class="nt">&lt;/Item&gt;</span>
            <span class="nt">&lt;Item</span> <span class="na">Key=</span><span class="s">&quot;Protocol&quot;</span><span class="nt">&gt;</span>HTTP<span class="nt">&lt;/Item&gt;</span>
            <span class="nt">&lt;Item</span> <span class="na">Key=</span><span class="s">&quot;ConfigDialog&quot;</span><span class="nt">&gt;</span>AdminGenericInterfaceTransportHTTPTest<span class="nt">&lt;/Item&gt;</span>
        <span class="nt">&lt;/Hash&gt;</span>
    <span class="nt">&lt;/Setting&gt;</span>
<span class="nt">&lt;/ConfigItem&gt;</span>
</pre></div>
</div>
</div>
</div>
</div>


           </div>
           
          </div>
          

<script>
// Start Google Analytics Tracking
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');
ga('create', 'UA-28118796-2', 'auto');
ga('send', 'pageview');
// End Google Analytics Tracking
</script>

<footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="gi-mapping.html" class="btn btn-neutral float-right" title="Mapping" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="ticket-menu.html" class="btn btn-neutral" title="Ticket Menu Module" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2001-2020 OTRS AG, https://otrs.com/

    </p>
  </div> 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../../" src="../../../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../../../_static/jquery.js"></script>
        <script type="text/javascript" src="../../../_static/underscore.js"></script>
        <script type="text/javascript" src="../../../_static/doctools.js"></script>
    

  

  <script type="text/javascript" src="../../../_static/js/theme.js"></script>

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>