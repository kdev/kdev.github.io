

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Operation &mdash; OTRS Developer Manual 7.0 documentation</title>
  

  
  
  
  

  

  
  
    

  

  <link rel="stylesheet" href="../../../_static/css/otrs.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="OTRS Daemon" href="daemon/daemon-modules.html" />
    <link rel="prev" title="Invoker" href="gi-invoker.html" /> 

  
  <script src="../../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          
    
    
    <a href="https://doc.otrs.com/doc" class="icon fa-rocket DocumentationOverview"> OTRS Documentation</a>

    

          
            <a href="../../index.html" class="icon icon-home"> OTRS Developer Manual
          

          
            
            <img src="../../../_static/otrs-logo.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                7.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          


        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../get-started.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../how-it-works.html">OTRS Internals - How it Works</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../how-to-extend-otrs.html">How to Extend OTRS</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../writing-otrs-application.html">Writing A New OTRS Front End Module</a></li>
<li class="toctree-l2"><a class="reference internal" href="../writing-new-otrs-frontend-component.html">Writing A New OTRS Front End Component</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../otrs-module-layers.html">Using the power of the OTRS module layers</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="agent-auth.html">Agent Authentication Module</a></li>
<li class="toctree-l3"><a class="reference internal" href="auth-sync.html">Authentication Synchronization Module</a></li>
<li class="toctree-l3"><a class="reference internal" href="customer-auth.html">Customer Authentication Module</a></li>
<li class="toctree-l3"><a class="reference internal" href="customer-user-preferences.html">Customer User Preferences Module</a></li>
<li class="toctree-l3"><a class="reference internal" href="queue-preferences.html">Queue Preferences Module</a></li>
<li class="toctree-l3"><a class="reference internal" href="service-preferences.html">Service Preferences Module</a></li>
<li class="toctree-l3"><a class="reference internal" href="sla-preferences.html">SLA Preferences Module</a></li>
<li class="toctree-l3"><a class="reference internal" href="log.html">Log Module</a></li>
<li class="toctree-l3"><a class="reference internal" href="outputfilter.html">Output Filter</a></li>
<li class="toctree-l3"><a class="reference internal" href="stats.html">Stats Module</a></li>
<li class="toctree-l3"><a class="reference internal" href="ticketnumber-generator.html">Ticket Number Generator Modules</a></li>
<li class="toctree-l3"><a class="reference internal" href="ticketevent.html">Ticket Event Module</a></li>
<li class="toctree-l3"><a class="reference internal" href="dashboard.html">Dashboard Module</a></li>
<li class="toctree-l3"><a class="reference internal" href="notify.html">Notification Module</a></li>
<li class="toctree-l3"><a class="reference internal" href="ticket-menu.html">Ticket Menu Module</a></li>
<li class="toctree-l3"><a class="reference internal" href="gi-transport.html">Network Transport</a></li>
<li class="toctree-l3"><a class="reference internal" href="gi-mapping.html">Mapping</a></li>
<li class="toctree-l3"><a class="reference internal" href="gi-invoker.html">Invoker</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Operation</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#operation-back-end">Operation Back End</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="daemon/daemon-modules.html">OTRS Daemon</a></li>
<li class="toctree-l3"><a class="reference internal" href="daemon/scheduler-task-worker-modules.html">OTRS Scheduler</a></li>
<li class="toctree-l3"><a class="reference internal" href="dynamic-fields/dynamic-fields-overview.html">Overview</a></li>
<li class="toctree-l3"><a class="reference internal" href="dynamic-fields/dynamic-fields-framework.html">Dynamic Fields Framework</a></li>
<li class="toctree-l3"><a class="reference internal" href="dynamic-fields/dynamic-fields-interaction.html">Dynamic Field Interaction With Front End Modules</a></li>
<li class="toctree-l3"><a class="reference internal" href="dynamic-fields/dynamic-fields-extend-options.html">How To Extend The Dynamic Fields</a></li>
<li class="toctree-l3"><a class="reference internal" href="dynamic-fields/dynamic-fields-new-field.html">Creating A New Dynamic Field</a></li>
<li class="toctree-l3"><a class="reference internal" href="dynamic-fields/dynamic-fields-extend.html">Creating a Dynamic Field Functionality Extension</a></li>
<li class="toctree-l3"><a class="reference internal" href="ticket-postmaster-modules.html">Ticket Postmaster Module</a></li>
<li class="toctree-l3"><a class="reference internal" href="process-management-modules.html">Process Management</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../how-to-publish-otrs-extensions.html">How to Publish Your OTRS Extensions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../documentation.html">Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../contributing.html">Contributing to OTRS</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../additional-resources.html">Additional Resources</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">OTRS Developer Manual</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../../how-to-extend-otrs.html">How to Extend OTRS</a> &raquo;</li>
        
          <li><a href="../otrs-module-layers.html">Using the power of the OTRS module layers</a> &raquo;</li>
        
      <li>Operation</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            
              <a href="https://github.com/OTRS/doc-developer/blob/rel-7_0/content/how-to-extend-otrs/otrs-module-layers/gi-operation.rst" class="fa fa-github"> Edit on GitHub</a>
            
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="operation">
<h1>Operation<a class="headerlink" href="#operation" title="Permalink to this headline">¶</a></h1>
<p>The operation is used to perform an action within OTRS. This action is requested by the external system and can include special parameters in order to correctly execute the action. After the action is performed, OTRS sends a defined confirmation to the external system.</p>
<div class="section" id="operation-back-end">
<h2>Operation Back End<a class="headerlink" href="#operation-back-end" title="Permalink to this headline">¶</a></h2>
<p>Next we will show how to develop a new operation, each operation has to implement these subroutines:</p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">new</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">Run</span></code></li>
</ul>
<p>We should implement each one of this methods in order to be able to execute the action handled by the provider (<code class="docutils literal notranslate"><span class="pre">Kernel/GenericInterface/Provider.pm</span></code>).</p>
<div class="section" id="operation-code-example">
<h3>Operation Code Example<a class="headerlink" href="#operation-code-example" title="Permalink to this headline">¶</a></h3>
<p>In this section a sample operation module is shown and each subroutine is explained.</p>
<div class="highlight-Perl notranslate"><div class="highlight"><pre><span></span><span class="c1"># --</span>
<span class="c1"># Copyright (C) 2001-2020 OTRS AG, https://otrs.com/</span>
<span class="c1"># --</span>
<span class="c1"># This software comes with ABSOLUTELY NO WARRANTY. For details, see</span>
<span class="c1"># the enclosed file COPYING for license information (GPL). If you</span>
<span class="c1"># did not receive this file, see https://www.gnu.org/licenses/gpl-3.0.txt.</span>
<span class="c1"># --</span>

<span class="k">package</span> <span class="nn">Kernel::GenericInterface::Operation::Test::Test</span><span class="p">;</span>

<span class="k">use</span> <span class="nn">strict</span><span class="p">;</span>
<span class="k">use</span> <span class="nn">warnings</span><span class="p">;</span>

<span class="k">use</span> <span class="nn">Kernel::System::VariableCheck</span> <span class="sx">qw(IsHashRefWithData)</span><span class="p">;</span>

<span class="k">our</span> <span class="nv">$ObjectManagerDisabled</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
</pre></div>
</div>
<p>This is common header that can be found in common OTRS modules. The class/package name is declared via the <code class="docutils literal notranslate"><span class="pre">package</span></code> keyword.</p>
<p>We also include <code class="docutils literal notranslate"><span class="pre">VariableCheck</span></code> module to perform certain validation over some variables. Operations can not be instantiated by the object manager.</p>
<div class="highlight-Perl notranslate"><div class="highlight"><pre><span></span><span class="k">sub</span> <span class="nf">new</span> <span class="p">{</span>
    <span class="k">my</span> <span class="p">(</span> <span class="nv">$Type</span><span class="p">,</span> <span class="nv">%Param</span> <span class="p">)</span> <span class="o">=</span> <span class="nv">@_</span><span class="p">;</span>

    <span class="k">my</span> <span class="nv">$Self</span> <span class="o">=</span> <span class="p">{};</span>
    <span class="nb">bless</span><span class="p">(</span> <span class="nv">$Self</span><span class="p">,</span> <span class="nv">$Type</span> <span class="p">);</span>

    <span class="c1"># check needed objects</span>
    <span class="k">for</span> <span class="k">my</span> <span class="nv">$Needed</span> <span class="p">(</span><span class="sx">qw(DebuggerObject)</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nv">$Param</span><span class="p">{</span><span class="nv">$Needed</span><span class="p">}</span> <span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span> <span class="p">{</span>
                <span class="n">Success</span>      <span class="o">=&gt;</span> <span class="mi">0</span><span class="p">,</span>
                <span class="n">ErrorMessage</span> <span class="o">=&gt;</span> <span class="s">&quot;Got no $Needed!&quot;</span>
            <span class="p">};</span>
        <span class="p">}</span>

        <span class="nv">$Self</span><span class="o">-&gt;</span><span class="p">{</span><span class="nv">$Needed</span><span class="p">}</span> <span class="o">=</span> <span class="nv">$Param</span><span class="p">{</span><span class="nv">$Needed</span><span class="p">};</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="nv">$Self</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The constructor <code class="docutils literal notranslate"><span class="pre">new</span></code> creates a new instance of the class. According to the coding guidelines only objects of other classes not handled by the object manager that are needed in this module have to be created in <code class="docutils literal notranslate"><span class="pre">new</span></code>.</p>
<div class="highlight-Perl notranslate"><div class="highlight"><pre><span></span><span class="k">sub</span> <span class="nf">Run</span> <span class="p">{</span>
    <span class="k">my</span> <span class="p">(</span> <span class="nv">$Self</span><span class="p">,</span> <span class="nv">%Param</span> <span class="p">)</span> <span class="o">=</span> <span class="nv">@_</span><span class="p">;</span>

    <span class="c1"># check data - only accept undef or hash ref</span>
    <span class="k">if</span> <span class="p">(</span> <span class="nb">defined</span> <span class="nv">$Param</span><span class="p">{</span><span class="n">Data</span><span class="p">}</span> <span class="o">&amp;&amp;</span> <span class="nb">ref</span> <span class="nv">$Param</span><span class="p">{</span><span class="n">Data</span><span class="p">}</span> <span class="ow">ne</span> <span class="s">&#39;HASH&#39;</span> <span class="p">)</span> <span class="p">{</span>

        <span class="k">return</span> <span class="nv">$Self</span><span class="o">-&gt;</span><span class="p">{</span><span class="n">DebuggerObject</span><span class="p">}</span><span class="o">-&gt;</span><span class="n">Error</span><span class="p">(</span>
            <span class="n">Summary</span> <span class="o">=&gt;</span> <span class="s">&#39;Got Data but it is not a hash ref in Operation Test backend)!&#39;</span>
        <span class="p">);</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span> <span class="nb">defined</span> <span class="nv">$Param</span><span class="p">{</span><span class="n">Data</span><span class="p">}</span> <span class="o">&amp;&amp;</span> <span class="nv">$Param</span><span class="p">{</span><span class="n">Data</span><span class="p">}</span><span class="o">-&gt;</span><span class="p">{</span><span class="n">TestError</span><span class="p">}</span> <span class="p">)</span> <span class="p">{</span>

        <span class="k">return</span> <span class="p">{</span>
            <span class="n">Success</span>      <span class="o">=&gt;</span> <span class="mi">0</span><span class="p">,</span>
            <span class="n">ErrorMessage</span> <span class="o">=&gt;</span> <span class="s">&quot;Error message for error code: $Param{Data}-&gt;{TestError}&quot;</span><span class="p">,</span>
            <span class="n">Data</span>         <span class="o">=&gt;</span> <span class="p">{</span>
                <span class="n">ErrorData</span> <span class="o">=&gt;</span> <span class="nv">$Param</span><span class="p">{</span><span class="n">Data</span><span class="p">}</span><span class="o">-&gt;</span><span class="p">{</span><span class="n">ErrorData</span><span class="p">},</span>
            <span class="p">},</span>
        <span class="p">};</span>
    <span class="p">}</span>

    <span class="c1"># copy data</span>
    <span class="k">my</span> <span class="nv">$ReturnData</span><span class="p">;</span>

    <span class="k">if</span> <span class="p">(</span> <span class="nb">ref</span> <span class="nv">$Param</span><span class="p">{</span><span class="n">Data</span><span class="p">}</span> <span class="ow">eq</span> <span class="s">&#39;HASH&#39;</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nv">$ReturnData</span> <span class="o">=</span> <span class="o">\</span><span class="nv">%</span><span class="p">{</span> <span class="nv">$Param</span><span class="p">{</span><span class="n">Data</span><span class="p">}</span> <span class="p">};</span>
    <span class="p">}</span>
    <span class="k">else</span> <span class="p">{</span>
        <span class="nv">$ReturnData</span> <span class="o">=</span> <span class="nb">undef</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="c1"># return result</span>
    <span class="k">return</span> <span class="p">{</span>
        <span class="n">Success</span> <span class="o">=&gt;</span> <span class="mi">1</span><span class="p">,</span>
        <span class="n">Data</span>    <span class="o">=&gt;</span> <span class="nv">$ReturnData</span><span class="p">,</span>
    <span class="p">};</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">Run</span></code> function is the main part of each operation. It receives all internal mapped data from remote system needed by the provider to execute the action, it performs the action and returns the result to the provider to be external mapped and deliver back to the remote system.</p>
<p>This particular example returns the same data as came from the remote system, unless <code class="docutils literal notranslate"><span class="pre">TestError</span></code> parameter is passed. In this case it returns an error.</p>
</div>
<div class="section" id="operation-configuration-example">
<h3>Operation Configuration Example<a class="headerlink" href="#operation-configuration-example" title="Permalink to this headline">¶</a></h3>
<p>There is the need to register this operation module to be accessible in the OTRS GUI. This can be done using the XML configuration below.</p>
<div class="highlight-XML notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;ConfigItem</span> <span class="na">Name=</span><span class="s">&quot;GenericInterface::Operation::Module###Test::Test&quot;</span> <span class="na">Required=</span><span class="s">&quot;0&quot;</span> <span class="na">Valid=</span><span class="s">&quot;1&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;Description</span> <span class="na">Translatable=</span><span class="s">&quot;1&quot;</span><span class="nt">&gt;</span>GenericInterface module registration for the operation layer.<span class="nt">&lt;/Description&gt;</span>
    <span class="nt">&lt;Group&gt;</span>GenericInterface<span class="nt">&lt;/Group&gt;</span>
    <span class="nt">&lt;SubGroup&gt;</span>GenericInterface::Operation::ModuleRegistration<span class="nt">&lt;/SubGroup&gt;</span>
    <span class="nt">&lt;Setting&gt;</span>
        <span class="nt">&lt;Hash&gt;</span>
            <span class="nt">&lt;Item</span> <span class="na">Key=</span><span class="s">&quot;Name&quot;</span><span class="nt">&gt;</span>Test<span class="nt">&lt;/Item&gt;</span>
            <span class="nt">&lt;Item</span> <span class="na">Key=</span><span class="s">&quot;Controller&quot;</span><span class="nt">&gt;</span>Test<span class="nt">&lt;/Item&gt;</span>
            <span class="nt">&lt;Item</span> <span class="na">Key=</span><span class="s">&quot;ConfigDialog&quot;</span><span class="nt">&gt;</span>AdminGenericInterfaceOperationDefault<span class="nt">&lt;/Item&gt;</span>
        <span class="nt">&lt;/Hash&gt;</span>
    <span class="nt">&lt;/Setting&gt;</span>
<span class="nt">&lt;/ConfigItem&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="unit-test-example">
<h3>Unit Test Example<a class="headerlink" href="#unit-test-example" title="Permalink to this headline">¶</a></h3>
<p>Unit test for generic interface operations does not differs from other unit tests but it is needed to consider testing locally, but also simulating a remote connection. It is a good practice to test both separately since results could be slightly different.</p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last">To learn more about unit tests, please take a look to the <a class="reference internal" href="../../contributing/unit-tests.html"><span class="doc">Unit Tests</span></a> chapter.</p>
</div>
<p>The following is just the starting point for a unit test:</p>
<div class="highlight-Perl notranslate"><div class="highlight"><pre><span></span><span class="c1"># --</span>
<span class="c1"># Copyright (C) 2001-2020 OTRS AG, https://otrs.com/</span>
<span class="c1"># --</span>
<span class="c1"># This software comes with ABSOLUTELY NO WARRANTY. For details, see</span>
<span class="c1"># the enclosed file COPYING for license information (GPL). If you</span>
<span class="c1"># did not receive this file, see https://www.gnu.org/licenses/gpl-3.0.txt.</span>
<span class="c1"># --</span>

<span class="c1">## no critic (Modules::RequireExplicitPackage)</span>
<span class="k">use</span> <span class="nn">strict</span><span class="p">;</span>
<span class="k">use</span> <span class="nn">warnings</span><span class="p">;</span>
<span class="k">use</span> <span class="nn">utf8</span><span class="p">;</span>

<span class="k">use</span> <span class="nn">vars</span> <span class="p">(</span><span class="sx">qw($Self)</span><span class="p">);</span>

<span class="k">use</span> <span class="nn">Kernel::GenericInterface::Debugger</span><span class="p">;</span>
<span class="k">use</span> <span class="nn">Kernel::GenericInterface::Operation::Test::Test</span><span class="p">;</span>

<span class="k">use</span> <span class="nn">Kernel::System::VariableCheck</span> <span class="sx">qw(:all)</span><span class="p">;</span>

<span class="c1"># Skip SSL certificate verification (RestoreDatabase must not be used in this test).</span>
<span class="nv">$</span><span class="nn">Kernel::</span><span class="nv">OM</span><span class="o">-&gt;</span><span class="n">ObjectParamAdd</span><span class="p">(</span>
    <span class="s">&#39;Kernel::System::UnitTest::Helper&#39;</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="n">SkipSSLVerify</span> <span class="o">=&gt;</span> <span class="mi">1</span><span class="p">,</span>
    <span class="p">},</span>
<span class="p">);</span>
<span class="k">my</span> <span class="nv">$Helper</span> <span class="o">=</span> <span class="nv">$</span><span class="nn">Kernel::</span><span class="nv">OM</span><span class="o">-&gt;</span><span class="n">Get</span><span class="p">(</span><span class="s">&#39;Kernel::System::UnitTest::Helper&#39;</span><span class="p">);</span>

<span class="c1"># get a random number</span>
<span class="k">my</span> <span class="nv">$RandomID</span> <span class="o">=</span> <span class="nv">$Helper</span><span class="o">-&gt;</span><span class="n">GetRandomNumber</span><span class="p">();</span>

<span class="c1"># create a new user for current test</span>
<span class="k">my</span> <span class="nv">$UserLogin</span> <span class="o">=</span> <span class="nv">$Helper</span><span class="o">-&gt;</span><span class="n">TestUserCreate</span><span class="p">(</span>
    <span class="n">Groups</span> <span class="o">=&gt;</span> <span class="p">[</span><span class="s">&#39;users&#39;</span><span class="p">],</span>
<span class="p">);</span>
<span class="k">my</span> <span class="nv">$Password</span> <span class="o">=</span> <span class="nv">$UserLogin</span><span class="p">;</span>

<span class="k">my</span> <span class="nv">$UserID</span> <span class="o">=</span> <span class="nv">$</span><span class="nn">Kernel::</span><span class="nv">OM</span><span class="o">-&gt;</span><span class="n">Get</span><span class="p">(</span><span class="s">&#39;Kernel::System::User&#39;</span><span class="p">)</span><span class="o">-&gt;</span><span class="n">UserLookup</span><span class="p">(</span>
    <span class="n">UserLogin</span> <span class="o">=&gt;</span> <span class="nv">$UserLogin</span><span class="p">,</span>
<span class="p">);</span>

<span class="c1"># set web-service name</span>
<span class="k">my</span> <span class="nv">$WebserviceName</span> <span class="o">=</span> <span class="s">&#39;-Test-&#39;</span> <span class="o">.</span> <span class="nv">$RandomID</span><span class="p">;</span>

<span class="c1"># create web-service object</span>
<span class="k">my</span> <span class="nv">$WebserviceObject</span> <span class="o">=</span> <span class="nv">$</span><span class="nn">Kernel::</span><span class="nv">OM</span><span class="o">-&gt;</span><span class="n">Get</span><span class="p">(</span><span class="s">&#39;Kernel::System::GenericInterface::Webservice&#39;</span><span class="p">);</span>
<span class="nv">$Self</span><span class="o">-&gt;</span><span class="n">Is</span><span class="p">(</span>
    <span class="s">&#39;Kernel::System::GenericInterface::Webservice&#39;</span><span class="p">,</span>
    <span class="nb">ref</span> <span class="nv">$WebserviceObject</span><span class="p">,</span>
    <span class="s">&quot;Create web service object&quot;</span><span class="p">,</span>
<span class="p">);</span>

<span class="k">my</span> <span class="nv">$WebserviceID</span> <span class="o">=</span> <span class="nv">$WebserviceObject</span><span class="o">-&gt;</span><span class="n">WebserviceAdd</span><span class="p">(</span>
    <span class="n">Name</span>   <span class="o">=&gt;</span> <span class="nv">$WebserviceName</span><span class="p">,</span>
    <span class="n">Config</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="n">Debugger</span> <span class="o">=&gt;</span> <span class="p">{</span>
            <span class="n">DebugThreshold</span> <span class="o">=&gt;</span> <span class="s">&#39;debug&#39;</span><span class="p">,</span>
        <span class="p">},</span>
        <span class="n">Provider</span> <span class="o">=&gt;</span> <span class="p">{</span>
            <span class="n">Transport</span> <span class="o">=&gt;</span> <span class="p">{</span>
                <span class="n">Type</span> <span class="o">=&gt;</span> <span class="s">&#39;&#39;</span><span class="p">,</span>
            <span class="p">},</span>
        <span class="p">},</span>
    <span class="p">},</span>
    <span class="n">ValidID</span> <span class="o">=&gt;</span> <span class="mi">1</span><span class="p">,</span>
    <span class="n">UserID</span>  <span class="o">=&gt;</span> <span class="mi">1</span><span class="p">,</span>
<span class="p">);</span>
<span class="nv">$Self</span><span class="o">-&gt;</span><span class="n">True</span><span class="p">(</span>
    <span class="nv">$WebserviceID</span><span class="p">,</span>
    <span class="s">&quot;Added Web Service&quot;</span><span class="p">,</span>
<span class="p">);</span>

<span class="c1"># get remote host with some precautions for certain unit test systems</span>
<span class="k">my</span> <span class="nv">$Host</span> <span class="o">=</span> <span class="nv">$Helper</span><span class="o">-&gt;</span><span class="n">GetTestHTTPHostname</span><span class="p">();</span>

<span class="k">my</span> <span class="nv">$ConfigObject</span> <span class="o">=</span> <span class="nv">$</span><span class="nn">Kernel::</span><span class="nv">OM</span><span class="o">-&gt;</span><span class="n">Get</span><span class="p">(</span><span class="s">&#39;Kernel::Config&#39;</span><span class="p">);</span>

<span class="c1"># prepare web-service config</span>
<span class="k">my</span> <span class="nv">$RemoteSystem</span> <span class="o">=</span>
    <span class="nv">$ConfigObject</span><span class="o">-&gt;</span><span class="n">Get</span><span class="p">(</span><span class="s">&#39;HttpType&#39;</span><span class="p">)</span>
    <span class="o">.</span> <span class="s">&#39;://&#39;</span>
    <span class="o">.</span> <span class="nv">$Host</span>
    <span class="o">.</span> <span class="s">&#39;/&#39;</span>
    <span class="o">.</span> <span class="nv">$ConfigObject</span><span class="o">-&gt;</span><span class="n">Get</span><span class="p">(</span><span class="s">&#39;ScriptAlias&#39;</span><span class="p">)</span>
    <span class="o">.</span> <span class="s">&#39;/nph-genericinterface.pl/WebserviceID/&#39;</span>
    <span class="o">.</span> <span class="nv">$WebserviceID</span><span class="p">;</span>

<span class="k">my</span> <span class="nv">$WebserviceConfig</span> <span class="o">=</span> <span class="p">{</span>
    <span class="n">Description</span> <span class="o">=&gt;</span>
        <span class="s">&#39;Test for Ticket Connector using SOAP transport backend.&#39;</span><span class="p">,</span>
    <span class="n">Debugger</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="n">DebugThreshold</span> <span class="o">=&gt;</span> <span class="s">&#39;debug&#39;</span><span class="p">,</span>
        <span class="n">TestMode</span>       <span class="o">=&gt;</span> <span class="mi">1</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="n">Provider</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="n">Transport</span> <span class="o">=&gt;</span> <span class="p">{</span>
            <span class="n">Type</span>   <span class="o">=&gt;</span> <span class="s">&#39;HTTP::SOAP&#39;</span><span class="p">,</span>
            <span class="n">Config</span> <span class="o">=&gt;</span> <span class="p">{</span>
                <span class="n">MaxLength</span> <span class="o">=&gt;</span> <span class="mi">10000000</span><span class="p">,</span>
                <span class="n">NameSpace</span> <span class="o">=&gt;</span> <span class="s">&#39;http://otrs.org/SoapTestInterface/&#39;</span><span class="p">,</span>
                <span class="n">Endpoint</span>  <span class="o">=&gt;</span> <span class="nv">$RemoteSystem</span><span class="p">,</span>
            <span class="p">},</span>
        <span class="p">},</span>
        <span class="n">Operation</span> <span class="o">=&gt;</span> <span class="p">{</span>
            <span class="n">Test</span> <span class="o">=&gt;</span> <span class="p">{</span>
                <span class="n">Type</span> <span class="o">=&gt;</span> <span class="s">&#39;Test::Test&#39;</span><span class="p">,</span>
            <span class="p">},</span>
        <span class="p">},</span>
    <span class="p">},</span>
    <span class="n">Requester</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="n">Transport</span> <span class="o">=&gt;</span> <span class="p">{</span>
            <span class="n">Type</span>   <span class="o">=&gt;</span> <span class="s">&#39;HTTP::SOAP&#39;</span><span class="p">,</span>
            <span class="n">Config</span> <span class="o">=&gt;</span> <span class="p">{</span>
                <span class="n">NameSpace</span> <span class="o">=&gt;</span> <span class="s">&#39;http://otrs.org/SoapTestInterface/&#39;</span><span class="p">,</span>
                <span class="n">Encoding</span>  <span class="o">=&gt;</span> <span class="s">&#39;UTF-8&#39;</span><span class="p">,</span>
                <span class="n">Endpoint</span>  <span class="o">=&gt;</span> <span class="nv">$RemoteSystem</span><span class="p">,</span>
            <span class="p">},</span>
        <span class="p">},</span>
        <span class="n">Invoker</span> <span class="o">=&gt;</span> <span class="p">{</span>
            <span class="n">Test</span> <span class="o">=&gt;</span> <span class="p">{</span>
                <span class="n">Type</span> <span class="o">=&gt;</span> <span class="s">&#39;Test::TestSimple&#39;</span>
                <span class="p">,</span>    <span class="c1"># requester needs to be Test::TestSimple in order to simulate a request to a remote system</span>
            <span class="p">},</span>
        <span class="p">},</span>
    <span class="p">},</span>
<span class="p">};</span>

<span class="c1"># update web-service with real config</span>
<span class="c1"># the update is needed because we are using</span>
<span class="c1"># the WebserviceID for the Endpoint in config</span>
<span class="k">my</span> <span class="nv">$WebserviceUpdate</span> <span class="o">=</span> <span class="nv">$WebserviceObject</span><span class="o">-&gt;</span><span class="n">WebserviceUpdate</span><span class="p">(</span>
    <span class="n">ID</span>      <span class="o">=&gt;</span> <span class="nv">$WebserviceID</span><span class="p">,</span>
    <span class="n">Name</span>    <span class="o">=&gt;</span> <span class="nv">$WebserviceName</span><span class="p">,</span>
    <span class="n">Config</span>  <span class="o">=&gt;</span> <span class="nv">$WebserviceConfig</span><span class="p">,</span>
    <span class="n">ValidID</span> <span class="o">=&gt;</span> <span class="mi">1</span><span class="p">,</span>
    <span class="n">UserID</span>  <span class="o">=&gt;</span> <span class="nv">$UserID</span><span class="p">,</span>
<span class="p">);</span>
<span class="nv">$Self</span><span class="o">-&gt;</span><span class="n">True</span><span class="p">(</span>
    <span class="nv">$WebserviceUpdate</span><span class="p">,</span>
    <span class="s">&quot;Updated Web Service $WebserviceID - $WebserviceName&quot;</span><span class="p">,</span>
<span class="p">);</span>

<span class="c1"># debugger object</span>
<span class="k">my</span> <span class="nv">$DebuggerObject</span> <span class="o">=</span> <span class="nn">Kernel::GenericInterface::Debugger</span><span class="o">-&gt;</span><span class="k">new</span><span class="p">(</span>
    <span class="n">DebuggerConfig</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="n">DebugThreshold</span> <span class="o">=&gt;</span> <span class="s">&#39;debug&#39;</span><span class="p">,</span>
        <span class="n">TestMode</span>       <span class="o">=&gt;</span> <span class="mi">1</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="n">WebserviceID</span>      <span class="o">=&gt;</span> <span class="nv">$WebserviceID</span><span class="p">,</span>
    <span class="n">CommunicationType</span> <span class="o">=&gt;</span> <span class="s">&#39;Provider&#39;</span><span class="p">,</span>
<span class="p">);</span>
<span class="nv">$Self</span><span class="o">-&gt;</span><span class="n">Is</span><span class="p">(</span>
    <span class="nb">ref</span> <span class="nv">$DebuggerObject</span><span class="p">,</span>
    <span class="s">&#39;Kernel::GenericInterface::Debugger&#39;</span><span class="p">,</span>
    <span class="s">&#39;DebuggerObject instantiate correctly&#39;</span><span class="p">,</span>
<span class="p">);</span>

<span class="c1"># define test cases</span>
<span class="k">my</span> <span class="nv">@Tests</span> <span class="o">=</span> <span class="p">(</span>
    <span class="p">{</span>
        <span class="n">Name</span>           <span class="o">=&gt;</span> <span class="s">&#39;Test case name&#39;</span><span class="p">,</span>
        <span class="n">SuccessRequest</span> <span class="o">=&gt;</span> <span class="mi">1</span><span class="p">,</span>                  <span class="c1"># 1 or 0</span>
        <span class="n">RequestData</span>    <span class="o">=&gt;</span> <span class="p">{</span>

            <span class="c1"># ... add test data</span>
        <span class="p">},</span>
        <span class="n">ExpectedReturnLocalData</span> <span class="o">=&gt;</span> <span class="p">{</span>
            <span class="n">Data</span> <span class="o">=&gt;</span> <span class="p">{</span>

                <span class="c1"># ... add expected local results</span>
            <span class="p">},</span>
            <span class="n">Success</span> <span class="o">=&gt;</span> <span class="mi">1</span><span class="p">,</span>                     <span class="c1"># 1 or 0</span>
        <span class="p">},</span>
        <span class="n">ExpectedReturnRemoteData</span> <span class="o">=&gt;</span> <span class="p">{</span>
            <span class="n">Data</span> <span class="o">=&gt;</span> <span class="p">{</span>

                <span class="c1"># ... add expected remote results</span>
            <span class="p">},</span>
            <span class="n">Success</span> <span class="o">=&gt;</span> <span class="mi">1</span><span class="p">,</span>                     <span class="c1"># 1 or 0</span>
        <span class="p">},</span>
        <span class="n">Operation</span> <span class="o">=&gt;</span> <span class="s">&#39;Test&#39;</span><span class="p">,</span>
    <span class="p">},</span>

    <span class="c1"># ... add more test cases</span>
<span class="p">);</span>

<span class="n">TEST:</span>
<span class="k">for</span> <span class="k">my</span> <span class="nv">$Test</span> <span class="p">(</span><span class="nv">@Tests</span><span class="p">)</span> <span class="p">{</span>

    <span class="c1"># create local object</span>
    <span class="k">my</span> <span class="nv">$LocalObject</span> <span class="o">=</span> <span class="s">&quot;Kernel::GenericInterface::Operation::Test::$Test-&gt;{Operation}&quot;</span><span class="o">-&gt;</span><span class="k">new</span><span class="p">(</span>
        <span class="n">DebuggerObject</span> <span class="o">=&gt;</span> <span class="nv">$DebuggerObject</span><span class="p">,</span>
        <span class="n">WebserviceID</span>   <span class="o">=&gt;</span> <span class="nv">$WebserviceID</span><span class="p">,</span>
    <span class="p">);</span>

    <span class="nv">$Self</span><span class="o">-&gt;</span><span class="n">Is</span><span class="p">(</span>
        <span class="s">&quot;Kernel::GenericInterface::Operation::Test::$Test-&gt;{Operation}&quot;</span><span class="p">,</span>
        <span class="nb">ref</span> <span class="nv">$LocalObject</span><span class="p">,</span>
        <span class="s">&quot;$Test-&gt;{Name} - Create local object&quot;</span><span class="p">,</span>
    <span class="p">);</span>

    <span class="k">my</span> <span class="nv">%Auth</span> <span class="o">=</span> <span class="p">(</span>
        <span class="n">UserLogin</span> <span class="o">=&gt;</span> <span class="nv">$UserLogin</span><span class="p">,</span>
        <span class="n">Password</span>  <span class="o">=&gt;</span> <span class="nv">$Password</span><span class="p">,</span>
    <span class="p">);</span>
    <span class="k">if</span> <span class="p">(</span> <span class="n">IsHashRefWithData</span><span class="p">(</span> <span class="nv">$Test</span><span class="o">-&gt;</span><span class="p">{</span><span class="n">Auth</span><span class="p">}</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nv">%Auth</span> <span class="o">=</span> <span class="nv">%</span><span class="p">{</span> <span class="nv">$Test</span><span class="o">-&gt;</span><span class="p">{</span><span class="n">Auth</span><span class="p">}</span> <span class="p">};</span>
    <span class="p">}</span>

    <span class="c1"># start requester with our web-service</span>
    <span class="k">my</span> <span class="nv">$LocalResult</span> <span class="o">=</span> <span class="nv">$LocalObject</span><span class="o">-&gt;</span><span class="n">Run</span><span class="p">(</span>
        <span class="n">WebserviceID</span> <span class="o">=&gt;</span> <span class="nv">$WebserviceID</span><span class="p">,</span>
        <span class="n">Invoker</span>      <span class="o">=&gt;</span> <span class="nv">$Test</span><span class="o">-&gt;</span><span class="p">{</span><span class="n">Operation</span><span class="p">},</span>
        <span class="n">Data</span>         <span class="o">=&gt;</span> <span class="p">{</span>
            <span class="nv">%Auth</span><span class="p">,</span>
            <span class="nv">%</span><span class="p">{</span> <span class="nv">$Test</span><span class="o">-&gt;</span><span class="p">{</span><span class="n">RequestData</span><span class="p">}</span> <span class="p">},</span>
        <span class="p">},</span>
    <span class="p">);</span>

    <span class="c1"># check result</span>
    <span class="nv">$Self</span><span class="o">-&gt;</span><span class="n">Is</span><span class="p">(</span>
        <span class="s">&#39;HASH&#39;</span><span class="p">,</span>
        <span class="nb">ref</span> <span class="nv">$LocalResult</span><span class="p">,</span>
        <span class="s">&quot;$Test-&gt;{Name} - Local result structure is valid&quot;</span><span class="p">,</span>
    <span class="p">);</span>

    <span class="c1"># create requester object</span>
    <span class="k">my</span> <span class="nv">$RequesterObject</span> <span class="o">=</span> <span class="nv">$</span><span class="nn">Kernel::</span><span class="nv">OM</span><span class="o">-&gt;</span><span class="n">Get</span><span class="p">(</span><span class="s">&#39;Kernel::GenericInterface::Requester&#39;</span><span class="p">);</span>
    <span class="nv">$Self</span><span class="o">-&gt;</span><span class="n">Is</span><span class="p">(</span>
        <span class="s">&#39;Kernel::GenericInterface::Requester&#39;</span><span class="p">,</span>
        <span class="nb">ref</span> <span class="nv">$RequesterObject</span><span class="p">,</span>
        <span class="s">&quot;$Test-&gt;{Name} - Create requester object&quot;</span><span class="p">,</span>
    <span class="p">);</span>

    <span class="c1"># start requester with our web-service</span>
    <span class="k">my</span> <span class="nv">$RequesterResult</span> <span class="o">=</span> <span class="nv">$RequesterObject</span><span class="o">-&gt;</span><span class="n">Run</span><span class="p">(</span>
        <span class="n">WebserviceID</span> <span class="o">=&gt;</span> <span class="nv">$WebserviceID</span><span class="p">,</span>
        <span class="n">Invoker</span>      <span class="o">=&gt;</span> <span class="nv">$Test</span><span class="o">-&gt;</span><span class="p">{</span><span class="n">Operation</span><span class="p">},</span>
        <span class="n">Data</span>         <span class="o">=&gt;</span> <span class="p">{</span>
            <span class="nv">%Auth</span><span class="p">,</span>
            <span class="nv">%</span><span class="p">{</span> <span class="nv">$Test</span><span class="o">-&gt;</span><span class="p">{</span><span class="n">RequestData</span><span class="p">}</span> <span class="p">},</span>
        <span class="p">},</span>
    <span class="p">);</span>

    <span class="c1"># check result</span>
    <span class="nv">$Self</span><span class="o">-&gt;</span><span class="n">Is</span><span class="p">(</span>
        <span class="s">&#39;HASH&#39;</span><span class="p">,</span>
        <span class="nb">ref</span> <span class="nv">$RequesterResult</span><span class="p">,</span>
        <span class="s">&quot;$Test-&gt;{Name} - Requester result structure is valid&quot;</span><span class="p">,</span>
    <span class="p">);</span>

    <span class="nv">$Self</span><span class="o">-&gt;</span><span class="n">Is</span><span class="p">(</span>
        <span class="nv">$RequesterResult</span><span class="o">-&gt;</span><span class="p">{</span><span class="n">Success</span><span class="p">},</span>
        <span class="nv">$Test</span><span class="o">-&gt;</span><span class="p">{</span><span class="n">SuccessRequest</span><span class="p">},</span>
        <span class="s">&quot;$Test-&gt;{Name} - Requester successful result&quot;</span><span class="p">,</span>
    <span class="p">);</span>

    <span class="c1"># ... add tests for the results</span>
<span class="p">}</span>

<span class="c1"># delete web service</span>
<span class="k">my</span> <span class="nv">$WebserviceDelete</span> <span class="o">=</span> <span class="nv">$WebserviceObject</span><span class="o">-&gt;</span><span class="n">WebserviceDelete</span><span class="p">(</span>
    <span class="n">ID</span>     <span class="o">=&gt;</span> <span class="nv">$WebserviceID</span><span class="p">,</span>
    <span class="n">UserID</span> <span class="o">=&gt;</span> <span class="nv">$UserID</span><span class="p">,</span>
<span class="p">);</span>
<span class="nv">$Self</span><span class="o">-&gt;</span><span class="n">True</span><span class="p">(</span>
    <span class="nv">$WebserviceDelete</span><span class="p">,</span>
    <span class="s">&quot;Deleted Web Service $WebserviceID&quot;</span><span class="p">,</span>
<span class="p">);</span>

<span class="c1"># also delete any other added data during the this test, since RestoreDatabase must not be used.</span>

<span class="mi">1</span><span class="p">;</span>
</pre></div>
</div>
</div>
<div class="section" id="wsdl-extension-example">
<h3>WSDL Extension Example<a class="headerlink" href="#wsdl-extension-example" title="Permalink to this headline">¶</a></h3>
<p>WSDL files contain the definitions of the web services and its operations for SOAP messages, in case we will extend <code class="docutils literal notranslate"><span class="pre">development/webservices/GenericTickeConnectorSOAP.wsdl</span></code> in some places:</p>
<p>Port Type:</p>
<div class="highlight-XML notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;wsdl:portType</span> <span class="na">name=</span><span class="s">&quot;GenericTicketConnector_PortType&quot;</span><span class="nt">&gt;</span>
    <span class="c">&lt;!-- ... --&gt;</span>
    <span class="nt">&lt;wsdl:operation</span> <span class="na">name=</span><span class="s">&quot;Test&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;wsdl:input</span> <span class="na">message=</span><span class="s">&quot;tns:TestRequest&quot;</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;wsdl:output</span> <span class="na">message=</span><span class="s">&quot;tns:TestResponse&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;/wsdl:operation&gt;</span>
<span class="c">&lt;!-- ... --&gt;</span>
</pre></div>
</div>
<p>Binding:</p>
<div class="highlight-XML notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;wsdl:binding</span> <span class="na">name=</span><span class="s">&quot;GenericTicketConnector_Binding&quot;</span> <span class="na">type=</span><span class="s">&quot;tns:GenericTicketConnector_PortType&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;soap:binding</span> <span class="na">style=</span><span class="s">&quot;document&quot;</span> <span class="na">transport=</span><span class="s">&quot;http://schemas.xmlsoap.org/soap/http&quot;</span><span class="nt">/&gt;</span>
    <span class="c">&lt;!-- ... --&gt;</span>
    <span class="nt">&lt;wsdl:operation</span> <span class="na">name=</span><span class="s">&quot;Test&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;soap:operation</span> <span class="na">soapAction=</span><span class="s">&quot;http://www.otrs.org/TicketConnector/Test&quot;</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;wsdl:input&gt;</span>
            <span class="nt">&lt;soap:body</span> <span class="na">use=</span><span class="s">&quot;literal&quot;</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;/wsdl:input&gt;</span>
        <span class="nt">&lt;wsdl:output&gt;</span>
            <span class="nt">&lt;soap:body</span> <span class="na">use=</span><span class="s">&quot;literal&quot;</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;/wsdl:output&gt;</span>
    <span class="nt">&lt;/wsdl:operation&gt;</span>
    <span class="c">&lt;!-- ... --&gt;</span>
<span class="nt">&lt;/wsdl:binding&gt;</span>
</pre></div>
</div>
<p>Type:</p>
<div class="highlight-XML notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;wsdl:types&gt;</span>
    <span class="nt">&lt;xsd:schema</span> <span class="na">targetNamespace=</span><span class="s">&quot;http://www.otrs.org/TicketConnector/&quot;</span> <span class="na">xmlns:xsd=</span><span class="s">&quot;http://www.w3.org/2001/XMLSchema&quot;</span><span class="nt">&gt;</span>
    <span class="c">&lt;!-- ... --&gt;</span>
        <span class="nt">&lt;xsd:element</span> <span class="na">name=</span><span class="s">&quot;Test&quot;</span><span class="nt">&gt;</span>
            <span class="nt">&lt;xsd:complexType&gt;</span>
                <span class="nt">&lt;xsd:sequence&gt;</span>
                        <span class="nt">&lt;xsd:element</span> <span class="na">minOccurs=</span><span class="s">&quot;0&quot;</span> <span class="na">name=</span><span class="s">&quot;Param1&quot;</span> <span class="na">type=</span><span class="s">&quot;xsd:string&quot;</span><span class="nt">/&gt;</span>
                        <span class="nt">&lt;xsd:element</span> <span class="na">minOccurs=</span><span class="s">&quot;0&quot;</span> <span class="na">name=</span><span class="s">&quot;Param2&quot;</span> <span class="na">type=</span><span class="s">&quot;xsd:positiveInteger&quot;</span><span class="nt">/&gt;</span>
                <span class="nt">&lt;/xsd:sequence&gt;</span>
            <span class="nt">&lt;/xsd:complexType&gt;</span>
        <span class="nt">&lt;/xsd:element&gt;</span>
        <span class="nt">&lt;xsd:element</span> <span class="na">name=</span><span class="s">&quot;TestResponse&quot;</span><span class="nt">&gt;</span>
            <span class="nt">&lt;xsd:complexType&gt;</span>
                <span class="nt">&lt;xsd:sequence&gt;</span>
                    <span class="nt">&lt;xsd:element</span> <span class="na">maxOccurs=</span><span class="s">&quot;unbounded&quot;</span> <span class="na">minOccurs=</span><span class="s">&quot;1&quot;</span> <span class="na">name=</span><span class="s">&quot;Attribute1&quot;</span> <span class="na">type=</span><span class="s">&quot;xsd:string&quot;</span><span class="nt">/&gt;</span>
                <span class="nt">&lt;/xsd:sequence&gt;</span>
            <span class="nt">&lt;/xsd:complexType&gt;</span>
        <span class="nt">&lt;/xsd:element&gt;</span>
    <span class="c">&lt;!-- ... --&gt;</span>
    <span class="nt">&lt;/xsd:schema&gt;</span>
<span class="nt">&lt;/wsdl:types&gt;</span>
</pre></div>
</div>
<p>Message:</p>
<div class="highlight-XML notranslate"><div class="highlight"><pre><span></span><span class="c">&lt;!-- ... --&gt;</span>
<span class="nt">&lt;wsdl:message</span> <span class="na">name=</span><span class="s">&quot;TestRequest&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;wsdl:part</span> <span class="na">element=</span><span class="s">&quot;tns:Test&quot;</span> <span class="na">name=</span><span class="s">&quot;parameters&quot;</span><span class="nt">/&gt;</span>
<span class="nt">&lt;/wsdl:message&gt;</span>
<span class="nt">&lt;wsdl:message</span> <span class="na">name=</span><span class="s">&quot;TestResponse&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;wsdl:part</span> <span class="na">element=</span><span class="s">&quot;tns:TestResponse&quot;</span> <span class="na">name=</span><span class="s">&quot;parameters&quot;</span><span class="nt">/&gt;</span>
<span class="nt">&lt;/wsdl:message&gt;</span>
<span class="c">&lt;!-- ... --&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="wadl-extension-example">
<h3>WADL Extension Example<a class="headerlink" href="#wadl-extension-example" title="Permalink to this headline">¶</a></h3>
<p>WADL files contain the definitions of the web services and its operations for REST interface, add a new resource to <code class="docutils literal notranslate"><span class="pre">development/webservices/GenericTickeConnectorREST.wadl</span></code>.</p>
<div class="highlight-XML notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;resources</span> <span class="na">base=</span><span class="s">&quot;http://localhost/otrs/nph-genericinterface.pl/Webservice/GenericTicketConnectorREST&quot;</span><span class="nt">&gt;</span>
  <span class="c">&lt;!-- ... --&gt;</span>
  <span class="nt">&lt;resource</span> <span class="na">path=</span><span class="s">&quot;Test&quot;</span> <span class="na">id=</span><span class="s">&quot;Test&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;doc</span> <span class="na">xml:lang=</span><span class="s">&quot;en&quot;</span> <span class="na">title=</span><span class="s">&quot;Test&quot;</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;param</span> <span class="na">name=</span><span class="s">&quot;Param1&quot;</span> <span class="na">type=</span><span class="s">&quot;xs:string&quot;</span> <span class="na">required=</span><span class="s">&quot;false&quot;</span> <span class="na">default=</span><span class="s">&quot;&quot;</span> <span class="na">style=</span><span class="s">&quot;query&quot;</span> <span class="na">xmlns:xs=</span><span class="s">&quot;http://www.w3.org/2001/XMLSchema&quot;</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;param</span> <span class="na">name=</span><span class="s">&quot;Param2&quot;</span> <span class="na">type=</span><span class="s">&quot;xs:string&quot;</span> <span class="na">required=</span><span class="s">&quot;false&quot;</span> <span class="na">default=</span><span class="s">&quot;&quot;</span> <span class="na">style=</span><span class="s">&quot;query&quot;</span> <span class="na">xmlns:xs=</span><span class="s">&quot;http://www.w3.org/2001/XMLSchema&quot;</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;method</span> <span class="na">name=</span><span class="s">&quot;GET&quot;</span> <span class="na">id=</span><span class="s">&quot;GET_Test&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;doc</span> <span class="na">xml:lang=</span><span class="s">&quot;en&quot;</span> <span class="na">title=</span><span class="s">&quot;GET_Test&quot;</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;request/&gt;</span>
        <span class="nt">&lt;response</span> <span class="na">status=</span><span class="s">&quot;200&quot;</span><span class="nt">&gt;</span>
          <span class="nt">&lt;representation</span> <span class="na">mediaType=</span><span class="s">&quot;application/json; charset=UTF-8&quot;</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;/response&gt;</span>
      <span class="nt">&lt;/method&gt;</span>
    <span class="nt">&lt;/resource&gt;</span>
  <span class="nt">&lt;/resource&gt;</span>
  <span class="c">&lt;!-- ... --&gt;</span>
<span class="nt">&lt;/resources&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="web-service-soap-extension-example">
<h3>Web Service SOAP Extension Example<a class="headerlink" href="#web-service-soap-extension-example" title="Permalink to this headline">¶</a></h3>
<p>Web services can be imported into OTRS by a YAML with a predefined structure in this case we will extend <code class="docutils literal notranslate"><span class="pre">development/webservices/GenericTickeConnectorSOAP.yml</span></code> for a SOAP web service.</p>
<div class="highlight-YAML notranslate"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">Provider</span><span class="p p-Indicator">:</span>
  <span class="l l-Scalar l-Scalar-Plain">Operation</span><span class="p p-Indicator">:</span>
    <span class="c1"># ...</span>
    <span class="l l-Scalar l-Scalar-Plain">Test</span><span class="p p-Indicator">:</span>
      <span class="l l-Scalar l-Scalar-Plain">Description</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">This is only a test</span>
      <span class="l l-Scalar l-Scalar-Plain">MappingInbound</span><span class="p p-Indicator">:</span> <span class="p p-Indicator">{}</span>
      <span class="l l-Scalar l-Scalar-Plain">MappingOutbound</span><span class="p p-Indicator">:</span> <span class="p p-Indicator">{}</span>
      <span class="l l-Scalar l-Scalar-Plain">Type</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">Test::Test</span>
</pre></div>
</div>
</div>
<div class="section" id="web-service-rest-extension-example">
<h3>Web Service REST Extension Example<a class="headerlink" href="#web-service-rest-extension-example" title="Permalink to this headline">¶</a></h3>
<p>Web services can be imported into OTRS by a YAML with a predefined structure in this case we will extend <code class="docutils literal notranslate"><span class="pre">development/webservices/GenericTickeConnectorREST.yml</span></code> for a REST web service.</p>
<div class="highlight-YAML notranslate"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">Provider</span><span class="p p-Indicator">:</span>
  <span class="l l-Scalar l-Scalar-Plain">Operation</span><span class="p p-Indicator">:</span>
    <span class="c1"># ...</span>
    <span class="l l-Scalar l-Scalar-Plain">Test</span><span class="p p-Indicator">:</span>
      <span class="l l-Scalar l-Scalar-Plain">Description</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">This is only a test</span>
      <span class="l l-Scalar l-Scalar-Plain">MappingInbound</span><span class="p p-Indicator">:</span> <span class="p p-Indicator">{}</span>
      <span class="l l-Scalar l-Scalar-Plain">MappingOutbound</span><span class="p p-Indicator">:</span> <span class="p p-Indicator">{}</span>
      <span class="l l-Scalar l-Scalar-Plain">Type</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">Test::Test</span>
  <span class="c1"># ...</span>
  <span class="l l-Scalar l-Scalar-Plain">Transport</span><span class="p p-Indicator">:</span>
    <span class="l l-Scalar l-Scalar-Plain">Config</span><span class="p p-Indicator">:</span>
      <span class="c1"># ...</span>
      <span class="l l-Scalar l-Scalar-Plain">RouteOperationMapping</span><span class="p p-Indicator">:</span>
        <span class="c1"># ..</span>
        <span class="l l-Scalar l-Scalar-Plain">Test</span><span class="p p-Indicator">:</span>
          <span class="l l-Scalar l-Scalar-Plain">RequestMethod</span><span class="p p-Indicator">:</span>
          <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">GET</span>
          <span class="l l-Scalar l-Scalar-Plain">Route</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">/Test</span>
</pre></div>
</div>
</div>
</div>
</div>


           </div>
           
          </div>
          

<script>
// Start Google Analytics Tracking
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');
ga('create', 'UA-28118796-2', 'auto');
ga('send', 'pageview');
// End Google Analytics Tracking
</script>

<footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="daemon/daemon-modules.html" class="btn btn-neutral float-right" title="OTRS Daemon" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="gi-invoker.html" class="btn btn-neutral" title="Invoker" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2001-2020 OTRS AG, https://otrs.com/

    </p>
  </div> 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../../" src="../../../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../../../_static/jquery.js"></script>
        <script type="text/javascript" src="../../../_static/underscore.js"></script>
        <script type="text/javascript" src="../../../_static/doctools.js"></script>
    

  

  <script type="text/javascript" src="../../../_static/js/theme.js"></script>

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>