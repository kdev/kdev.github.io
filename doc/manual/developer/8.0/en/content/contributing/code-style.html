

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Code Style Guide &mdash; OTRS Developer Manual 8.0 documentation</title>
  

  
  
  
  

  

  
  
    

  

  <link rel="stylesheet" href="../../_static/css/otrs.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="User Interface Design" href="ui-design.html" />
    <link rel="prev" title="Translating" href="translate.html" /> 

  
  <script src="../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          
    
    
    <a href="https://doc.otrs.com/doc" class="icon fa-rocket DocumentationOverview"> OTRS Documentation</a>

    

          
            <a href="../index.html" class="icon icon-home"> OTRS Developer Manual
          

          
            
            <img src="../../_static/otrs-logo.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                8.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          


        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../get-started.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../how-it-works.html">OTRS Internals - How it Works</a></li>
<li class="toctree-l1"><a class="reference internal" href="../how-to-extend-otrs.html">How to Extend OTRS</a></li>
<li class="toctree-l1"><a class="reference internal" href="../how-to-publish-otrs-extensions.html">How to Publish Your OTRS Extensions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../documentation.html">Documentation</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../contributing.html">Contributing to OTRS</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="sending-contributions.html">Sending Contributions</a></li>
<li class="toctree-l2"><a class="reference internal" href="translate.html">Translating</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Code Style Guide</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#perl">Perl</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#whitespace">Whitespace</a></li>
<li class="toctree-l4"><a class="reference internal" href="#length-of-lines">Length of Lines</a></li>
<li class="toctree-l4"><a class="reference internal" href="#spaces-and-parentheses">Spaces and Parentheses</a></li>
<li class="toctree-l4"><a class="reference internal" href="#source-code-header-and-charset">Source Code Header and Charset</a></li>
<li class="toctree-l4"><a class="reference internal" href="#conditions">Conditions</a></li>
<li class="toctree-l4"><a class="reference internal" href="#postfix-if">Postfix <code class="docutils literal notranslate"><span class="pre">if</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#restrictions-for-the-use-of-some-perl-builtins">Restrictions for the Use of Some Perl Builtins</a></li>
<li class="toctree-l4"><a class="reference internal" href="#regular-expressions">Regular Expressions</a></li>
<li class="toctree-l4"><a class="reference internal" href="#naming">Naming</a></li>
<li class="toctree-l4"><a class="reference internal" href="#variable-declaration">Variable Declaration</a></li>
<li class="toctree-l4"><a class="reference internal" href="#handling-of-parameters">Handling of Parameters</a></li>
<li class="toctree-l4"><a class="reference internal" href="#multiple-named-parameters">Multiple Named Parameters</a></li>
<li class="toctree-l4"><a class="reference internal" href="#return-statements"><code class="docutils literal notranslate"><span class="pre">return</span></code> Statements</a></li>
<li class="toctree-l4"><a class="reference internal" href="#explicit-return-values">Explicit Return Values</a></li>
<li class="toctree-l4"><a class="reference internal" href="#use-statements"><code class="docutils literal notranslate"><span class="pre">use</span></code> Statements</a></li>
<li class="toctree-l4"><a class="reference internal" href="#objects-and-their-allocation">Objects and Their Allocation</a></li>
<li class="toctree-l4"><a class="reference internal" href="#documenting-back-end-modules">Documenting Back End Modules</a></li>
<li class="toctree-l4"><a class="reference internal" href="#documenting-subroutines">Documenting Subroutines</a></li>
<li class="toctree-l4"><a class="reference internal" href="#code-comments-in-perl">Code Comments in Perl</a></li>
<li class="toctree-l4"><a class="reference internal" href="#declaration-of-sql-statements">Declaration of SQL Statements</a></li>
<li class="toctree-l4"><a class="reference internal" href="#returning-on-errors">Returning on Errors</a></li>
<li class="toctree-l4"><a class="reference internal" href="#using-limit">Using Limit</a></li>
<li class="toctree-l4"><a class="reference internal" href="#using-the-while-loop">Using the <code class="docutils literal notranslate"><span class="pre">while</span></code> loop</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#javascript">JavaScript</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#directory-structure">Directory Structure</a></li>
<li class="toctree-l4"><a class="reference internal" href="#thirdparty-code">Thirdparty Code</a></li>
<li class="toctree-l4"><a class="reference internal" href="#javascript-variables">JavaScript Variables</a></li>
<li class="toctree-l4"><a class="reference internal" href="#functions">Functions</a></li>
<li class="toctree-l4"><a class="reference internal" href="#namespaces">Namespaces</a></li>
<li class="toctree-l4"><a class="reference internal" href="#code-comments-in-javascript">Code Comments in JavaScript</a></li>
<li class="toctree-l4"><a class="reference internal" href="#event-handling">Event Handling</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#html">HTML</a></li>
<li class="toctree-l3"><a class="reference internal" href="#css">CSS</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#css-architecture">CSS Architecture</a></li>
<li class="toctree-l4"><a class="reference internal" href="#css-style">CSS Style</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="ui-design.html">User Interface Design</a></li>
<li class="toctree-l2"><a class="reference internal" href="accessibility.html">Accessibility Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="unit-tests.html">Unit Tests</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../additional-resources.html">Additional Resources</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">OTRS Developer Manual</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../contributing.html">Contributing to OTRS</a> &raquo;</li>
        
      <li>Code Style Guide</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            
              <a href="https://github.com/OTRS/doc-developer/blob/rel-8_0/content/contributing/code-style.rst" class="fa fa-github"> Edit on GitHub</a>
            
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="code-style-guide">
<h1>Code Style Guide<a class="headerlink" href="#code-style-guide" title="Permalink to this headline">¶</a></h1>
<p>In order to preserve the consistent development of the OTRS project, we have set up guidelines regarding style for the different programming languages.</p>
<div class="section" id="perl">
<span id="code-style-guide-perl"></span><h2>Perl<a class="headerlink" href="#perl" title="Permalink to this headline">¶</a></h2>
<div class="section" id="whitespace">
<h3>Whitespace<a class="headerlink" href="#whitespace" title="Permalink to this headline">¶</a></h3>
<p>TAB: We use 4 spaces. Examples for braces:</p>
<div class="highlight-Perl notranslate"><div class="highlight"><pre><span></span><span class="k">if</span> <span class="p">(</span><span class="nv">$Condition</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">Foo</span><span class="p">();</span>
<span class="p">}</span>
<span class="k">else</span> <span class="p">{</span>
    <span class="n">Bar</span><span class="p">();</span>
<span class="p">}</span>

<span class="k">while</span> <span class="p">(</span><span class="nv">$Condition</span> <span class="o">==</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">Foo</span><span class="p">();</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="length-of-lines">
<h3>Length of Lines<a class="headerlink" href="#length-of-lines" title="Permalink to this headline">¶</a></h3>
<p>Lines should generally not be longer than 120 characters, unless it is necessary for special reasons.</p>
</div>
<div class="section" id="spaces-and-parentheses">
<h3>Spaces and Parentheses<a class="headerlink" href="#spaces-and-parentheses" title="Permalink to this headline">¶</a></h3>
<p>To gain more readability, we use spaces between keywords and opening parenthesis.</p>
<div class="highlight-Perl notranslate"><div class="highlight"><pre><span></span><span class="k">if</span> <span class="p">()</span><span class="o">...</span>
<span class="k">for</span> <span class="p">()</span><span class="o">...</span>
</pre></div>
</div>
<p>If there is just one single variable, the parenthesis enclose the variable with no spaces inside.</p>
<div class="highlight-Perl notranslate"><div class="highlight"><pre><span></span><span class="k">if</span> <span class="p">(</span><span class="nv">$Condition</span><span class="p">)</span> <span class="p">{</span> <span class="o">...</span> <span class="p">}</span>

<span class="c1"># instead of</span>

<span class="k">if</span> <span class="p">(</span> <span class="nv">$Condition</span> <span class="p">)</span> <span class="p">{</span> <span class="o">...</span> <span class="p">}</span>
</pre></div>
</div>
<p>If the condition is not just one single variable, we use spaces between the parenthesis and the condition. And there is still the space between the keyword (e.g. <code class="docutils literal notranslate"><span class="pre">if</span></code>) and the opening parenthesis.</p>
<div class="highlight-Perl notranslate"><div class="highlight"><pre><span></span><span class="k">if</span> <span class="p">(</span> <span class="nv">$Condition</span> <span class="o">&amp;&amp;</span> <span class="nv">$ABC</span> <span class="p">)</span> <span class="p">{</span> <span class="o">...</span> <span class="p">}</span>
</pre></div>
</div>
<p>Note that for Perl builtin functions, we do not use parentheses:</p>
<div class="highlight-Perl notranslate"><div class="highlight"><pre><span></span><span class="nb">chomp</span> <span class="nv">$Variable</span><span class="p">;</span>
</pre></div>
</div>
</div>
<div class="section" id="source-code-header-and-charset">
<h3>Source Code Header and Charset<a class="headerlink" href="#source-code-header-and-charset" title="Permalink to this headline">¶</a></h3>
<p>Attach the following header to every source file. Source files are saved in UTF-8 charset.</p>
<div class="highlight-Perl notranslate"><div class="highlight"><pre><span></span><span class="c1"># --</span>
<span class="c1"># Copyright (C) 2001-2020 OTRS AG, https://otrs.com/</span>
<span class="c1"># --</span>
<span class="c1"># This software comes with ABSOLUTELY NO WARRANTY. For details, see</span>
<span class="c1"># the enclosed file COPYING for license information (GPL). If you</span>
<span class="c1"># did not receive this file, see https://www.gnu.org/licenses/gpl-3.0.txt.</span>
<span class="c1"># --</span>
</pre></div>
</div>
<p>Executable files (<code class="docutils literal notranslate"><span class="pre">*.pl</span></code>) have a special header.</p>
<div class="highlight-Perl notranslate"><div class="highlight"><pre><span></span><span class="ch">#!/usr/bin/perl</span>
<span class="c1"># --</span>
<span class="c1"># Copyright (C) 2001-2020 OTRS AG, https://otrs.com/</span>
<span class="c1"># --</span>
<span class="c1"># This program is free software: you can redistribute it and/or modify</span>
<span class="c1"># it under the terms of the GNU General Public License as published by</span>
<span class="c1"># the Free Software Foundation, either version 3 of the License, or</span>
<span class="c1"># (at your option) any later version.</span>
<span class="c1">#</span>
<span class="c1"># This program is distributed in the hope that it will be useful,</span>
<span class="c1"># but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<span class="c1"># MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the</span>
<span class="c1"># GNU General Public License for more details.</span>
<span class="c1">#</span>
<span class="c1"># You should have received a copy of the GNU General Public License</span>
<span class="c1"># along with this program. If not, see https://www.gnu.org/licenses/gpl-3.0.txt.</span>
<span class="c1"># --</span>
</pre></div>
</div>
</div>
<div class="section" id="conditions">
<h3>Conditions<a class="headerlink" href="#conditions" title="Permalink to this headline">¶</a></h3>
<p>Conditions can be quite complex and there can be <em>chained</em> conditions (linked with logical <em>or</em> or <em>and</em> operations). When coding for OTRS, you have to be aware of several situations.</p>
<p>Perl best practices says, that high precedence operators (<code class="docutils literal notranslate"><span class="pre">&amp;&amp;</span></code> and <code class="docutils literal notranslate"><span class="pre">||</span></code>) shouldn’t mixed up with low precedence operators (<code class="docutils literal notranslate"><span class="pre">and</span></code> and <code class="docutils literal notranslate"><span class="pre">or</span></code>). To avoid confusion, we always use the high precedence operators.</p>
<div class="highlight-Perl notranslate"><div class="highlight"><pre><span></span><span class="k">if</span> <span class="p">(</span> <span class="nv">$Condition1</span> <span class="o">&amp;&amp;</span> <span class="nv">$Condition2</span> <span class="p">)</span> <span class="p">{</span> <span class="o">...</span> <span class="p">}</span>

<span class="c1"># instead of</span>

<span class="k">if</span> <span class="p">(</span> <span class="nv">$Condition</span> <span class="ow">and</span> <span class="nv">$Condition2</span> <span class="p">)</span> <span class="p">{</span> <span class="o">...</span> <span class="p">}</span>
</pre></div>
</div>
<p>This means that you have to be aware of traps. Sometimes you need to use parenthesis to make clear what you want.</p>
<p>If you have long conditions (line is longer than 120 characters over all), you have to break it in several lines. And the start of the conditions is in a new line (not in the line of the <code class="docutils literal notranslate"><span class="pre">if</span></code>).</p>
<div class="highlight-Perl notranslate"><div class="highlight"><pre><span></span><span class="k">if</span> <span class="p">(</span>
    <span class="nv">$Condition1</span>
    <span class="o">&amp;&amp;</span> <span class="nv">$Condition2</span>
    <span class="p">)</span>
<span class="p">{</span> <span class="o">...</span> <span class="p">}</span>

<span class="c1"># instead of</span>

<span class="k">if</span> <span class="p">(</span> <span class="nv">$Condition1</span>
    <span class="o">&amp;&amp;</span> <span class="nv">$Condition2</span>
    <span class="p">)</span>
<span class="p">{</span> <span class="o">...</span> <span class="p">}</span>
</pre></div>
</div>
<p>Also note, that the right parenthesis is in a line on its own and the left curly bracket is also in a new line and with the same indentation as the <code class="docutils literal notranslate"><span class="pre">if</span></code>. The operators are at the beginning of a new line! The subsequent examples show how to do it.</p>
<div class="highlight-Perl notranslate"><div class="highlight"><pre><span></span><span class="k">if</span> <span class="p">(</span>
    <span class="nv">$XMLHash</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">-&gt;</span><span class="p">{</span><span class="n">otrs_stats</span><span class="p">}[</span><span class="mi">1</span><span class="p">]{</span><span class="n">StatType</span><span class="p">}[</span><span class="mi">1</span><span class="p">]{</span><span class="n">Content</span><span class="p">}</span>
    <span class="o">&amp;&amp;</span> <span class="nv">$XMLHash</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">-&gt;</span><span class="p">{</span><span class="n">otrs_stats</span><span class="p">}[</span><span class="mi">1</span><span class="p">]{</span><span class="n">StatType</span><span class="p">}[</span><span class="mi">1</span><span class="p">]{</span><span class="n">Content</span><span class="p">}</span> <span class="ow">eq</span> <span class="s">&#39;static&#39;</span>
    <span class="p">)</span>
<span class="p">{</span> <span class="o">...</span> <span class="p">}</span>

<span class="k">if</span> <span class="p">(</span> <span class="nv">$TemplateName</span> <span class="ow">eq</span> <span class="s">&#39;AgentTicketCustomer&#39;</span> <span class="p">)</span> <span class="p">{</span>
    <span class="o">...</span>
<span class="p">}</span>

<span class="k">if</span> <span class="p">(</span>
    <span class="p">(</span> <span class="nv">$Param</span><span class="p">{</span><span class="n">Section</span><span class="p">}</span> <span class="ow">eq</span> <span class="s">&#39;Xaxis&#39;</span> <span class="o">||</span> <span class="nv">$Param</span><span class="p">{</span><span class="n">Section</span><span class="p">}</span> <span class="ow">eq</span> <span class="s">&#39;All&#39;</span> <span class="p">)</span>
    <span class="o">&amp;&amp;</span> <span class="nv">$StatData</span><span class="p">{</span><span class="n">StatType</span><span class="p">}</span> <span class="ow">eq</span> <span class="s">&#39;dynamic&#39;</span>
    <span class="p">)</span>
<span class="p">{</span> <span class="o">...</span> <span class="p">}</span>

<span class="k">if</span> <span class="p">(</span>
    <span class="nv">$Self</span><span class="o">-&gt;</span><span class="p">{</span><span class="n">TimeObject</span><span class="p">}</span><span class="o">-&gt;</span><span class="n">TimeStamp2SystemTime</span><span class="p">(</span> <span class="n">String</span> <span class="o">=&gt;</span> <span class="nv">$Cell</span><span class="o">-&gt;</span><span class="p">{</span><span class="n">TimeStop</span><span class="p">}</span> <span class="p">)</span>
    <span class="o">&gt;</span> <span class="nv">$Self</span><span class="o">-&gt;</span><span class="p">{</span><span class="n">TimeObject</span><span class="p">}</span><span class="o">-&gt;</span><span class="n">TimeStamp2SystemTime</span><span class="p">(</span>
        <span class="n">String</span> <span class="o">=&gt;</span> <span class="nv">$ValueSeries</span><span class="p">{</span><span class="nv">$Row</span><span class="p">}{</span><span class="nv">$TimeStop</span><span class="p">}</span>
    <span class="p">)</span>
    <span class="o">||</span> <span class="nv">$Self</span><span class="o">-&gt;</span><span class="p">{</span><span class="n">TimeObject</span><span class="p">}</span><span class="o">-&gt;</span><span class="n">TimeStamp2SystemTime</span><span class="p">(</span> <span class="n">String</span> <span class="o">=&gt;</span> <span class="nv">$Cell</span><span class="o">-&gt;</span><span class="p">{</span><span class="n">TimeStart</span><span class="p">}</span> <span class="p">)</span>
    <span class="o">&lt;</span> <span class="nv">$Self</span><span class="o">-&gt;</span><span class="p">{</span><span class="n">TimeObject</span><span class="p">}</span><span class="o">-&gt;</span><span class="n">TimeStamp2SystemTime</span><span class="p">(</span>
        <span class="n">String</span> <span class="o">=&gt;</span> <span class="nv">$ValueSeries</span><span class="p">{</span><span class="nv">$Row</span><span class="p">}{</span><span class="nv">$TimeStart</span><span class="p">}</span>
    <span class="p">)</span>
    <span class="p">)</span>
<span class="p">{</span> <span class="o">...</span> <span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="postfix-if">
<h3>Postfix <code class="docutils literal notranslate"><span class="pre">if</span></code><a class="headerlink" href="#postfix-if" title="Permalink to this headline">¶</a></h3>
<p>Generally we use <em>postfix ``if``</em> statements to reduce the number of levels. But we don’t use it for multiline statements and is only allowed when involves return statements in functions or to end a loop or to go next iteration.</p>
<p>This is correct:</p>
<div class="highlight-Perl notranslate"><div class="highlight"><pre><span></span><span class="k">next</span> <span class="n">ITEM</span> <span class="k">if</span> <span class="o">!</span><span class="nv">$ItemId</span><span class="p">;</span>
</pre></div>
</div>
<p>This is wrong:</p>
<div class="highlight-Perl notranslate"><div class="highlight"><pre><span></span><span class="k">return</span> <span class="nv">$Self</span><span class="o">-&gt;</span><span class="p">{</span><span class="n">LogObject</span><span class="p">}</span><span class="o">-&gt;</span><span class="n">Log</span><span class="p">(</span>
    <span class="n">Priority</span> <span class="o">=&gt;</span> <span class="s">&#39;error&#39;</span><span class="p">,</span>
    <span class="n">Message</span>  <span class="o">=&gt;</span> <span class="s">&#39;ItemID needed!&#39;</span><span class="p">,</span>
<span class="p">)</span> <span class="k">if</span> <span class="o">!</span><span class="nv">$ItemId</span><span class="p">;</span>
</pre></div>
</div>
<p>This is less maintainable than this:</p>
<div class="highlight-Perl notranslate"><div class="highlight"><pre><span></span><span class="k">if</span><span class="p">(</span> <span class="o">!</span><span class="nv">$ItemId</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nv">$Self</span><span class="o">-&gt;</span><span class="p">{</span><span class="n">LogObject</span><span class="p">}</span><span class="o">-&gt;</span><span class="n">Log</span><span class="p">(</span> <span class="o">...</span> <span class="p">);</span>
    <span class="k">return</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>This is correct:</p>
<div class="highlight-Perl notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="k">my</span> <span class="nv">$Needed</span> <span class="p">(</span> <span class="mi">1</span> <span class="o">..</span> <span class="mi">10</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">next</span> <span class="k">if</span> <span class="nv">$Needed</span> <span class="o">==</span> <span class="mi">5</span><span class="p">;</span>
    <span class="k">last</span>  <span class="k">if</span> <span class="nv">$Needed</span> <span class="o">==</span> <span class="mi">9</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>This is wrong:</p>
<div class="highlight-Perl notranslate"><div class="highlight"><pre><span></span><span class="k">my</span> <span class="nv">$Var</span> <span class="o">=</span> <span class="mi">1</span> <span class="k">if</span> <span class="nv">$Something</span> <span class="o">==</span> <span class="s">&#39;Yes&#39;</span><span class="p">;</span>
</pre></div>
</div>
</div>
<div class="section" id="restrictions-for-the-use-of-some-perl-builtins">
<h3>Restrictions for the Use of Some Perl Builtins<a class="headerlink" href="#restrictions-for-the-use-of-some-perl-builtins" title="Permalink to this headline">¶</a></h3>
<p>Some builtin subroutines of Perl may not be used in every place:</p>
<ul class="simple">
<li>Don’t use <code class="docutils literal notranslate"><span class="pre">die</span></code> and <code class="docutils literal notranslate"><span class="pre">exit</span></code> in <code class="docutils literal notranslate"><span class="pre">.pm</span></code> files.</li>
<li>Don’t use the <code class="docutils literal notranslate"><span class="pre">Dumper</span></code> function in released files.</li>
<li>Don’t use <code class="docutils literal notranslate"><span class="pre">print</span></code> in <code class="docutils literal notranslate"><span class="pre">.pm</span></code> files.</li>
<li>Don’t use <code class="docutils literal notranslate"><span class="pre">require</span></code>, use <code class="docutils literal notranslate"><span class="pre">Main::Require()</span></code> instead.</li>
<li>Use the functions of the <code class="docutils literal notranslate"><span class="pre">DateTimeObject</span></code> instead of the builtin functions like <code class="docutils literal notranslate"><span class="pre">time()</span></code>, <code class="docutils literal notranslate"><span class="pre">localtime()</span></code>, etc.</li>
</ul>
</div>
<div class="section" id="regular-expressions">
<h3>Regular Expressions<a class="headerlink" href="#regular-expressions" title="Permalink to this headline">¶</a></h3>
<p>For regular expressions <em>in the source code</em>, we always use the <code class="docutils literal notranslate"><span class="pre">m//</span></code> operator with curly braces as delimiters. We also use the modifiers <code class="docutils literal notranslate"><span class="pre">x</span></code>, <code class="docutils literal notranslate"><span class="pre">m</span></code> and <code class="docutils literal notranslate"><span class="pre">s</span></code> by default. The <code class="docutils literal notranslate"><span class="pre">x</span></code> modifier allows you to comment your regex and use spaces to visually separate logical groups.</p>
<div class="highlight-Perl notranslate"><div class="highlight"><pre><span></span><span class="nv">$Date</span> <span class="o">=~</span> <span class="sr">m{ \A \d{4}</span> <span class="o">-</span> <span class="o">\</span><span class="n">d</span><span class="p">{</span><span class="mi">2</span><span class="p">}</span> <span class="o">-</span> <span class="o">\</span><span class="n">d</span><span class="p">{</span><span class="mi">2</span><span class="p">}</span> <span class="o">\</span><span class="n">z</span> <span class="p">}</span><span class="n">xms</span>
<span class="nv">$Date</span> <span class="o">=~</span> <span class="sr">m{</span>
<span class="sr">    \A      # beginning of the string</span>
<span class="sr">    \d{4}</span> <span class="o">-</span> <span class="c1"># year</span>
    <span class="o">\</span><span class="n">d</span><span class="p">{</span><span class="mi">2</span><span class="p">}</span> <span class="o">-</span> <span class="c1"># month</span>
    <span class="p">[</span><span class="o">^\</span><span class="n">n</span><span class="p">]</span>   <span class="c1"># everything but newline</span>
    <span class="c1">#..</span>
<span class="p">}</span><span class="n">xms</span><span class="p">;</span>
</pre></div>
</div>
<p>As the space no longer has a special meaning, you have to use a single character class to match a single space (<code class="docutils literal notranslate"><span class="pre">[</span> <span class="pre">]</span></code>). If you want to match any whitespace you can use <code class="docutils literal notranslate"><span class="pre">\s</span></code>.</p>
<p>In the regex, the dot (<code class="docutils literal notranslate"><span class="pre">.</span></code>) includes the newline (whereas in regex without <code class="docutils literal notranslate"><span class="pre">s</span></code> modifier the dot means ‘everything but newline’). If you want to match anything but newline, you have to use the negated single character class (<code class="docutils literal notranslate"><span class="pre">[^\n]</span></code>).</p>
<div class="highlight-Perl notranslate"><div class="highlight"><pre><span></span><span class="nv">$Text</span> <span class="o">=~</span> <span class="sr">m{</span>
<span class="sr">    Test</span>
<span class="sr">    [ ]    # there must be a space between &#39;Test&#39; and &#39;Regex&#39;</span>
<span class="sr">    Regex</span>
<span class="sr">}xms</span><span class="p">;</span>
</pre></div>
</div>
<p>An exception to the convention above applies to all cases where regular expressions are not written statically in the code but instead are <em>supplied by users</em> in one form or another (for example via system configuration or in a Postmaster filter configuration). Any evaluation of such a regular expression has to be done without any modifiers (e.g. <code class="docutils literal notranslate"><span class="pre">$Variable</span> <span class="pre">=~</span> <span class="pre">m{$Regex}</span></code>) in order to match the expectation of (mostly inexperienced) users and also to be backwards compatible.</p>
<p>If modifiers are strictly necessary for user supplied regular expressions, it is always possible to use embedded modifiers (e.g. <code class="docutils literal notranslate"><span class="pre">(?:(?i)SmAlL</span> <span class="pre">oR</span> <span class="pre">lArGe)</span></code>). For details, please see <a class="reference external" href="http://perldoc.perl.org/perlretut.html#Embedding-comments-and-modifiers-in-a-regular-expression">perlretut</a>.</p>
<p>Usage of the <code class="docutils literal notranslate"><span class="pre">r</span></code> modifier is encouraged, e.g. if you need to extract part of a string into another variable. This modifier keeps the matched variable intact and instead provides the substitution result as a return value.</p>
<p>Use this:</p>
<div class="highlight-Perl notranslate"><div class="highlight"><pre><span></span><span class="k">my</span> <span class="nv">$NewText</span> <span class="o">=</span> <span class="nv">$Text</span> <span class="o">=~</span> <span class="sr">s{</span>
<span class="sr">    \A</span>
<span class="sr">    Prefix</span>
<span class="sr">    (</span>
<span class="sr">        Text</span>
<span class="sr">    )</span>
<span class="sr">}</span>
<span class="sr">{NewPrefix$1Postfix}xms</span><span class="n">r</span><span class="p">;</span>
</pre></div>
</div>
<p>Instead of this:</p>
<div class="highlight-Perl notranslate"><div class="highlight"><pre><span></span><span class="k">my</span> <span class="nv">$NewText</span> <span class="o">=</span> <span class="nv">$Text</span><span class="p">;</span>
<span class="nv">$NewText</span> <span class="o">=~</span> <span class="sr">s{</span>
<span class="sr">    \A</span>
<span class="sr">    Prefix</span>
<span class="sr">    (</span>
<span class="sr">        Text</span>
<span class="sr">    )</span>
<span class="sr">}</span>
<span class="sr">{NewPrefix$1Postfix}xms</span><span class="p">;</span>
</pre></div>
</div>
<p>If you want to match for start and end of a <strong>string</strong>, you should generally use <code class="docutils literal notranslate"><span class="pre">\A</span></code> and <code class="docutils literal notranslate"><span class="pre">\z</span></code> instead of the more generic <code class="docutils literal notranslate"><span class="pre">^</span></code> and <code class="docutils literal notranslate"><span class="pre">$</span></code> unless you really need to match start or end of <strong>lines</strong> within a multiline string.</p>
<div class="highlight-Perl notranslate"><div class="highlight"><pre><span></span><span class="nv">$Text</span> <span class="o">=~</span> <span class="sr">m{</span>
<span class="sr">    \A      # beginning of the string</span>
<span class="sr">    Content # some string</span>
<span class="sr">    \z      # end of the string</span>
<span class="sr">}xms</span><span class="p">;</span>

<span class="nv">$MultilineText</span> <span class="o">=~</span> <span class="sr">m{</span>
<span class="sr">    \A                      # beginning of the string</span>
<span class="sr">    .*</span>
<span class="sr">    (?: \n Content $ )+      # one or more lines containing the same string</span>
<span class="sr">    .*</span>
<span class="sr">    \z                      # end of the string</span>
<span class="sr">}xms</span><span class="p">;</span>
</pre></div>
</div>
<p>Usage of named capture groups is also encouraged, particularly for multi-matches. Named capture groups are easier to read/understand, prevent mix-ups when matching more than one capture group and allow extension without accidentally introducing bugs.</p>
<p>Use this:</p>
<div class="highlight-Perl notranslate"><div class="highlight"><pre><span></span><span class="nv">$Contact</span> <span class="o">=~</span> <span class="sr">s{</span>
<span class="sr">    \A</span>
<span class="sr">    [ ]*</span>
<span class="sr">    (?&#39;TrimmedContact&#39;</span>
<span class="sr">        (?&#39;FirstName&#39; \w+ )</span>
<span class="sr">        [ ]+</span>
<span class="sr">        (?&#39;LastName&#39; \w+ )</span>
<span class="sr">    )</span>
<span class="sr">    [ ]+</span>
<span class="sr">    (?&#39;Email&#39; [^ ]+ )</span>
<span class="sr">    [ ]*</span>
<span class="sr">    \z</span>
<span class="sr">}</span>
<span class="sr">{$+{TrimmedContact}</span><span class="p">}</span><span class="n">xms</span><span class="p">;</span>
<span class="k">my</span> <span class="nv">$FormattedContact</span> <span class="o">=</span> <span class="s">&quot;$+{LastName}, $+{FirstName} ($+{Email})&quot;</span><span class="p">;</span>
</pre></div>
</div>
<p>Instead of this:</p>
<div class="highlight-Perl notranslate"><div class="highlight"><pre><span></span><span class="nv">$Contact</span> <span class="o">=~</span> <span class="sr">s{</span>
<span class="sr">    \A</span>
<span class="sr">    [ ]*</span>
<span class="sr">    (</span>
<span class="sr">        ( \w+ )</span>
<span class="sr">        [ ]+</span>
<span class="sr">        ( \w+ )</span>
<span class="sr">    )</span>
<span class="sr">    [ ]+</span>
<span class="sr">    ( [^ ]+ )</span>
<span class="sr">    [ ]*</span>
<span class="sr">    \z</span>
<span class="sr">}</span>
<span class="sr">{$1}xms</span><span class="p">;</span>
<span class="k">my</span> <span class="nv">$FormattedContact</span> <span class="o">=</span> <span class="s">&quot;$3, $2 ($4)&quot;</span><span class="p">;</span>
</pre></div>
</div>
</div>
<div class="section" id="naming">
<h3>Naming<a class="headerlink" href="#naming" title="Permalink to this headline">¶</a></h3>
<p>Names and comments are written in English. Variables, objects and methods must be descriptive nouns or noun phrases with the first letter set upper case (<a class="reference external" href="https://en.wikipedia.org/wiki/CamelCase">CamelCase</a>).</p>
<p>Names should be as descriptive as possible. A reader should be able to say what is meant by a name without digging too deep into the code. E.g. use <code class="docutils literal notranslate"><span class="pre">$ConfigItemID</span></code> instead of <code class="docutils literal notranslate"><span class="pre">$ID</span></code>. Examples: <code class="docutils literal notranslate"><span class="pre">&#64;TicketIDs</span></code>, <code class="docutils literal notranslate"><span class="pre">$Output</span></code>, <code class="docutils literal notranslate"><span class="pre">StateSet()</span></code>, etc.</p>
</div>
<div class="section" id="variable-declaration">
<h3>Variable Declaration<a class="headerlink" href="#variable-declaration" title="Permalink to this headline">¶</a></h3>
<p>If you have several variables, you can declare them in one line if they <em>belong together</em>:</p>
<div class="highlight-Perl notranslate"><div class="highlight"><pre><span></span><span class="k">my</span> <span class="p">(</span> <span class="nv">$Minute</span><span class="p">,</span> <span class="nv">$Hour</span><span class="p">,</span> <span class="nv">$Year</span> <span class="p">);</span>
</pre></div>
</div>
<p>Otherwise break it into separate lines:</p>
<div class="highlight-Perl notranslate"><div class="highlight"><pre><span></span><span class="k">my</span> <span class="nv">$Minute</span><span class="p">;</span>
<span class="k">my</span> <span class="nv">$ID</span><span class="p">;</span>
</pre></div>
</div>
<p>Do not set to <code class="docutils literal notranslate"><span class="pre">undef</span></code> or <code class="docutils literal notranslate"><span class="pre">''</span></code> in the declaration as this might hide mistakes in code.</p>
<div class="highlight-Perl notranslate"><div class="highlight"><pre><span></span><span class="k">my</span> <span class="nv">$Variable</span> <span class="o">=</span> <span class="nb">undef</span><span class="p">;</span>

<span class="c1"># is the same as</span>

<span class="k">my</span> <span class="nv">$Variable</span><span class="p">;</span>
</pre></div>
</div>
<p>You can set a variable to <code class="docutils literal notranslate"><span class="pre">''</span></code> if you want to concatenate strings:</p>
<div class="highlight-Perl notranslate"><div class="highlight"><pre><span></span><span class="k">my</span> <span class="nv">$SqlStatement</span> <span class="o">=</span> <span class="s">&#39;&#39;</span><span class="p">;</span>
<span class="k">for</span> <span class="k">my</span> <span class="nv">$Part</span> <span class="p">(</span><span class="nv">@Parts</span><span class="p">)</span> <span class="p">{</span>
    <span class="nv">$SqlStatement</span> <span class="o">.=</span> <span class="nv">$Part</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Otherwise you would get an <em>uninitialized</em> warning.</p>
</div>
<div class="section" id="handling-of-parameters">
<h3>Handling of Parameters<a class="headerlink" href="#handling-of-parameters" title="Permalink to this headline">¶</a></h3>
<p>To fetch the parameters passed to subroutines, OTRS normally uses the hash <code class="docutils literal notranslate"><span class="pre">%Param</span></code> (not <code class="docutils literal notranslate"><span class="pre">%Params</span></code>). This leads to more readable code as every time we use <code class="docutils literal notranslate"><span class="pre">%Param</span></code> in the subroutine code we know it is the parameter hash passed to the subroutine.</p>
<p>Just in some exceptions a regular list of parameters should be used. So we want to avoid something like this:</p>
<div class="highlight-Perl notranslate"><div class="highlight"><pre><span></span><span class="k">sub</span> <span class="nf">TestSub</span> <span class="p">{</span>
    <span class="k">my</span> <span class="p">(</span> <span class="nv">$Self</span><span class="p">,</span> <span class="nv">$Param1</span><span class="p">,</span> <span class="nv">$Param2</span> <span class="p">)</span> <span class="o">=</span> <span class="nv">@_</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>We want to use this instead:</p>
<div class="highlight-Perl notranslate"><div class="highlight"><pre><span></span><span class="k">sub</span> <span class="nf">TestSub</span> <span class="p">{</span>
    <span class="k">my</span> <span class="p">(</span> <span class="nv">$Self</span><span class="p">,</span> <span class="nv">%Param</span> <span class="p">)</span> <span class="o">=</span> <span class="nv">@_</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>This has several advantages:</p>
<ul class="simple">
<li>We do not have to change the code in the subroutine when a new parameter should be passed.</li>
<li>Calling a function with named parameters is much more readable.</li>
</ul>
</div>
<div class="section" id="multiple-named-parameters">
<h3>Multiple Named Parameters<a class="headerlink" href="#multiple-named-parameters" title="Permalink to this headline">¶</a></h3>
<p>If a function call requires more than one named parameter, split them into multiple lines.</p>
<p>Use this:</p>
<div class="highlight-Perl notranslate"><div class="highlight"><pre><span></span><span class="nv">$Self</span><span class="o">-&gt;</span><span class="p">{</span><span class="n">LogObject</span><span class="p">}</span><span class="o">-&gt;</span><span class="n">Log</span><span class="p">(</span>
    <span class="n">Priority</span> <span class="o">=&gt;</span> <span class="s">&#39;error&#39;</span><span class="p">,</span>
    <span class="n">Message</span>  <span class="o">=&gt;</span> <span class="s">&quot;Need $Needed!&quot;</span><span class="p">,</span>
<span class="p">);</span>
</pre></div>
</div>
<p>Instead of this:</p>
<div class="highlight-Perl notranslate"><div class="highlight"><pre><span></span><span class="nv">$Self</span><span class="o">-&gt;</span><span class="p">{</span><span class="n">LogObject</span><span class="p">}</span><span class="o">-&gt;</span><span class="n">Log</span><span class="p">(</span> <span class="n">Priority</span> <span class="o">=&gt;</span> <span class="s">&#39;error&#39;</span><span class="p">,</span> <span class="n">Message</span>  <span class="o">=&gt;</span> <span class="s">&quot;Need $Needed!&quot;</span><span class="p">,</span> <span class="p">);</span>
</pre></div>
</div>
</div>
<div class="section" id="return-statements">
<h3><code class="docutils literal notranslate"><span class="pre">return</span></code> Statements<a class="headerlink" href="#return-statements" title="Permalink to this headline">¶</a></h3>
<p>Subroutines have to have a <code class="docutils literal notranslate"><span class="pre">return</span></code> statement. The explicit <code class="docutils literal notranslate"><span class="pre">return</span></code> statement is preferred over the implicit way (result of last statement in subroutine) as this clarifies what the subroutine returns.</p>
<div class="highlight-Perl notranslate"><div class="highlight"><pre><span></span><span class="k">sub</span> <span class="nf">TestSub</span> <span class="p">{</span>
    <span class="o">...</span>
    <span class="k">return</span><span class="p">;</span> <span class="c1"># return undef, but not the result of the last statement</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="explicit-return-values">
<h3>Explicit Return Values<a class="headerlink" href="#explicit-return-values" title="Permalink to this headline">¶</a></h3>
<p>Explicit return values means that you should not have a <code class="docutils literal notranslate"><span class="pre">return</span></code> statement followed by a subroutine call.</p>
<div class="highlight-Perl notranslate"><div class="highlight"><pre><span></span><span class="k">return</span> <span class="nv">$Self</span><span class="o">-&gt;</span><span class="p">{</span><span class="n">DBObject</span><span class="p">}</span><span class="o">-&gt;</span><span class="n">Do</span><span class="p">(</span> <span class="o">...</span> <span class="p">);</span>
</pre></div>
</div>
<p>The following example is better as this says explicitly what is returned. With the example above the reader doesn’t know what the return value is as he might not know what <code class="docutils literal notranslate"><span class="pre">Do()</span></code> returns.</p>
<div class="highlight-Perl notranslate"><div class="highlight"><pre><span></span><span class="k">return</span> <span class="k">if</span> <span class="o">!</span><span class="nv">$Self</span><span class="o">-&gt;</span><span class="p">{</span><span class="n">DBObject</span><span class="p">}</span><span class="o">-&gt;</span><span class="n">Do</span><span class="p">(</span> <span class="o">...</span> <span class="p">);</span>
<span class="k">return</span> <span class="mi">1</span><span class="p">;</span>
</pre></div>
</div>
<p>If you assign the result of a subroutine to a variable, a <em>good</em> variable name indicates what was returned:</p>
<div class="highlight-Perl notranslate"><div class="highlight"><pre><span></span><span class="k">my</span> <span class="nv">$SuccessfulInsert</span> <span class="o">=</span> <span class="nv">$Self</span><span class="o">-&gt;</span><span class="p">{</span><span class="n">DBObject</span><span class="p">}</span><span class="o">-&gt;</span><span class="n">Do</span><span class="p">(</span> <span class="o">...</span> <span class="p">);</span>
<span class="k">return</span> <span class="nv">$SuccessfulInsert</span><span class="p">;</span>
</pre></div>
</div>
</div>
<div class="section" id="use-statements">
<h3><code class="docutils literal notranslate"><span class="pre">use</span></code> Statements<a class="headerlink" href="#use-statements" title="Permalink to this headline">¶</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">use</span> <span class="pre">strict</span></code> and <code class="docutils literal notranslate"><span class="pre">use</span> <span class="pre">warnings</span></code> have to be the first two <em>uses</em> in a module.</p>
<p>This is correct:</p>
<div class="highlight-Perl notranslate"><div class="highlight"><pre><span></span><span class="k">package</span> <span class="nn">Kernel::System::ITSMConfigItem::History</span><span class="p">;</span>

<span class="k">use</span> <span class="nn">strict</span><span class="p">;</span>
<span class="k">use</span> <span class="nn">warnings</span><span class="p">;</span>

<span class="k">use</span> <span class="nn">Kernel::System::User</span><span class="p">;</span>
<span class="k">use</span> <span class="nn">Kernel::System::DateTime</span><span class="p">;</span>
</pre></div>
</div>
<p>This is wrong:</p>
<div class="highlight-Perl notranslate"><div class="highlight"><pre><span></span><span class="k">package</span> <span class="nn">Kernel::System::ITSMConfigItem::History</span><span class="p">;</span>

<span class="k">use</span> <span class="nn">Kernel::System::User</span><span class="p">;</span>
<span class="k">use</span> <span class="nn">Kernel::System::DateTime</span><span class="p">;</span>

<span class="k">use</span> <span class="nn">strict</span><span class="p">;</span>
<span class="k">use</span> <span class="nn">warnings</span><span class="p">;</span>
</pre></div>
</div>
</div>
<div class="section" id="objects-and-their-allocation">
<h3>Objects and Their Allocation<a class="headerlink" href="#objects-and-their-allocation" title="Permalink to this headline">¶</a></h3>
<p>In OTRS many objects are available. But you should not use every object in every file to keep the front end/back end separation.</p>
<ul class="simple">
<li>Don’t use the <code class="docutils literal notranslate"><span class="pre">LayoutObject</span></code> in core modules (<code class="docutils literal notranslate"><span class="pre">Kernel/System</span></code>).</li>
<li>Don’t use the <code class="docutils literal notranslate"><span class="pre">ParamObject</span></code> in core modules (<code class="docutils literal notranslate"><span class="pre">Kernel/System</span></code>).</li>
<li>Don’t use the <code class="docutils literal notranslate"><span class="pre">DBObject</span></code> in front end modules (<code class="docutils literal notranslate"><span class="pre">Kernel/Modules</span></code>).</li>
</ul>
</div>
<div class="section" id="documenting-back-end-modules">
<h3>Documenting Back End Modules<a class="headerlink" href="#documenting-back-end-modules" title="Permalink to this headline">¶</a></h3>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">NAME</span></code> section</dt>
<dd><p class="first">This section should include the module name, `` - `` as separator and a brief description of the module purpose.</p>
<div class="last highlight-Perl notranslate"><div class="highlight"><pre><span></span><span class="o">=</span><span class="n">head1</span> <span class="n">NAME</span>

<span class="nn">Kernel::System::</span><span class="n">MyModule</span> <span class="o">-</span> <span class="n">Functions</span> <span class="n">to</span> <span class="nb">read</span> <span class="n">from</span> <span class="ow">and</span> <span class="nb">write</span> <span class="n">to</span> <span class="n">files</span>
</pre></div>
</div>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">SYNOPSIS</span></code> section</dt>
<dd><p class="first">This section should give a short usage example of commonly used module functions.</p>
<p>Usage of this section is optional.</p>
<div class="last highlight-Perl notranslate"><div class="highlight"><pre><span></span><span class="o">=</span><span class="n">head1</span> <span class="n">SYNOPSIS</span>

<span class="k">my</span> <span class="nv">$Object</span> <span class="o">=</span> <span class="nv">$</span><span class="nn">Kernel::</span><span class="nv">OM</span><span class="o">-&gt;</span><span class="n">Get</span><span class="p">(</span><span class="s">&#39;Kernel::System::MyModule&#39;</span><span class="p">);</span>

<span class="n">Read</span> <span class="n">data</span>

    <span class="k">my</span> <span class="nv">$FileContent</span> <span class="o">=</span> <span class="nv">$Object</span><span class="o">-&gt;</span><span class="n">Read</span><span class="p">(</span>
        <span class="n">File</span> <span class="o">=&gt;</span> <span class="s">&#39;/tmp/testfile&#39;</span><span class="p">,</span>
    <span class="p">);</span>

<span class="n">Write</span> <span class="n">data</span>

    <span class="nv">$Object</span><span class="o">-&gt;</span><span class="n">Write</span><span class="p">(</span>
        <span class="n">Content</span> <span class="o">=&gt;</span> <span class="s">&#39;my file content&#39;</span><span class="p">,</span>
        <span class="n">File</span>    <span class="o">=&gt;</span> <span class="s">&#39;/tmp/testfile&#39;</span><span class="p">,</span>
    <span class="p">);</span>
</pre></div>
</div>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">DESCRIPTION</span></code> section</dt>
<dd><p class="first">This section should give more in-depth information about the module if deemed necessary (instead of having a long <code class="docutils literal notranslate"><span class="pre">NAME</span></code> section).</p>
<p>Usage of this section is optional.</p>
<div class="last highlight-Perl notranslate"><div class="highlight"><pre><span></span><span class="o">=</span><span class="n">head1</span> <span class="n">DESCRIPTION</span>

<span class="n">This</span> <span class="n">module</span> <span class="n">does</span> <span class="ow">not</span> <span class="n">only</span> <span class="n">handle</span> <span class="n">files</span><span class="o">.</span>

<span class="n">It</span> <span class="n">is</span> <span class="n">also</span> <span class="n">able</span> <span class="n">to:</span>
<span class="o">-</span> <span class="n">brew</span> <span class="n">coffee</span>
<span class="o">-</span> <span class="n">turn</span> <span class="n">lead</span> <span class="n">into</span> <span class="n">gold</span>
<span class="o">-</span> <span class="n">bring</span> <span class="n">world</span> <span class="n">peace</span>
</pre></div>
</div>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">PUBLIC</span> <span class="pre">INTERFACE</span></code> section</dt>
<dd><p class="first">This section marks the begin of all functions that are part of the API and therefore meant to be used by other modules.</p>
<div class="last highlight-Perl notranslate"><div class="highlight"><pre><span></span><span class="o">=</span><span class="n">head1</span> <span class="n">PUBLIC</span> <span class="n">INTERFACE</span>
</pre></div>
</div>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">PRIVATE</span> <span class="pre">FUNCTIONS</span></code> section</dt>
<dd><p class="first">This section marks the begin of private functions.</p>
<p>Functions below are not part of the API, to be used only within the module and therefore not considered stable.</p>
<p>It is advisable to use this section whenever one or more private functions exist.</p>
<div class="last highlight-Perl notranslate"><div class="highlight"><pre><span></span><span class="o">=</span><span class="n">head1</span> <span class="n">PRIVATE</span> <span class="n">FUNCTIONS</span>
</pre></div>
</div>
</dd>
</dl>
</div>
<div class="section" id="documenting-subroutines">
<h3>Documenting Subroutines<a class="headerlink" href="#documenting-subroutines" title="Permalink to this headline">¶</a></h3>
<p>Subroutines should always be documented. The documentation contains a general description about what the subroutine does, a sample subroutine call and what the subroutine returns. It should be in this order. A sample documentation looks like this:</p>
<div class="highlight-Perl notranslate"><div class="highlight"><pre><span></span><span class="cm">=head2 LastTimeObjectChanged()</span>

<span class="cm">Calculates the last time the object was changed. It returns a hash reference with</span>
<span class="cm">    information about the object and the time.</span>

<span class="cm">    my $Info = $Object-&gt;LastTimeObjectChanged(</span>
<span class="cm">        Param =&gt; &#39;Value&#39;,</span>
<span class="cm">    );</span>

<span class="cm">This returns something like:</span>

<span class="cm">    my $Info = {</span>
<span class="cm">        ConfigItemID    =&gt; 1234,</span>
<span class="cm">        HistoryType     =&gt; &#39;foo&#39;,</span>
<span class="cm">        LastTimeChanged =&gt; &#39;08.10.2009&#39;,</span>
<span class="cm">    };</span>

<span class="cm">=cut</span>
</pre></div>
</div>
<p>You can copy and paste a <code class="docutils literal notranslate"><span class="pre">Data::Dumper</span></code> output for the return values.</p>
</div>
<div class="section" id="code-comments-in-perl">
<h3>Code Comments in Perl<a class="headerlink" href="#code-comments-in-perl" title="Permalink to this headline">¶</a></h3>
<p>In general, you should try to write your code as readable and self-explaining as possible. Don’t write a comment to explain what obvious code does, this is unnecessary duplication. Good comments should explain <strong>why</strong> there is some code, possible side effects and anything that might be special or unusually complicated about the code.</p>
<p>Please adhere to the following guidelines:</p>
<dl class="docutils">
<dt>Make the code so readable that comments are not needed, if possible.</dt>
<dd>It’s always preferable to write code so that it is very readable and self-explaining, for example with precise variable and function names.</dd>
<dt>Don’t say what the code says (DRY -&gt; Don’t repeat yourself).</dt>
<dd><p class="first">Don’t repeat (obvious) code in the comments.</p>
<div class="last highlight-Perl notranslate"><div class="highlight"><pre><span></span><span class="c1"># WRONG:</span>

<span class="c1"># get config object</span>
<span class="k">my</span> <span class="nv">$ConfigObject</span> <span class="o">=</span> <span class="nv">$</span><span class="nn">Kernel::</span><span class="nv">OM</span><span class="o">-&gt;</span><span class="n">Get</span><span class="p">(</span><span class="s">&#39;Kernel::Config&#39;</span><span class="p">);</span>
</pre></div>
</div>
</dd>
<dt>Document <strong>why</strong> the code is there, not how it works.</dt>
<dd>Usually, code comments should explain the <em>purpose</em> of code, not how it works in detail. There might be exceptions for specially complicated code, but in this case also a refactoring to make it more readable could be commendable.</dd>
<dt>Document pitfalls.</dt>
<dd>Everything that is unclear, tricky or that puzzled you during development should be documented.</dd>
<dt>Use full-line sentence-style comments to document algorithm paragraphs.</dt>
<dd><p class="first">Always use full sentences (uppercase first letter and final period). Subsequent lines of a sentence should be indented.</p>
<div class="last highlight-Perl notranslate"><div class="highlight"><pre><span></span><span class="c1"># Check if object name is provided.</span>
<span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nv">$_</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nv">$_</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">-&gt;</span><span class="n">_DieWithError</span><span class="p">(</span>
        <span class="n">Error</span> <span class="o">=&gt;</span> <span class="s">&quot;Error: Missing parameter (object name)&quot;</span><span class="p">,</span>
    <span class="p">);</span>
<span class="p">}</span>

<span class="c1"># Record the object we are about to retrieve to potentially build better error messages.</span>
<span class="c1"># Needs to be a statement-modifying &#39;if&#39;, otherwise &#39;local&#39; is local</span>
<span class="c1">#   to the scope of the &#39;if&#39;-block.</span>
<span class="nb">local</span> <span class="nv">$CurrentObject</span> <span class="o">=</span> <span class="nv">$_</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="k">if</span> <span class="o">!</span><span class="nv">$CurrentObject</span><span class="p">;</span>
</pre></div>
</div>
</dd>
<dt>Use short end-of-line comments to add detail information.</dt>
<dd><p class="first">These can either be a complete sentence (capital first letter and period) or just a phrase (lowercase first letter and no period).</p>
<div class="last highlight-Perl notranslate"><div class="highlight"><pre><span></span><span class="nv">$BuildMode</span> <span class="o">=</span> <span class="nb">oct</span> <span class="nv">$Param</span><span class="p">{</span><span class="n">Mode</span><span class="p">};</span>   <span class="c1"># *from* octal, not *to* octal</span>

<span class="c1"># or</span>

<span class="nv">$BuildMode</span> <span class="o">=</span> <span class="nb">oct</span> <span class="nv">$Param</span><span class="p">{</span><span class="n">Mode</span><span class="p">};</span>   <span class="c1"># Convert *from* octal, not *to* octal.</span>
</pre></div>
</div>
</dd>
</dl>
</div>
<div class="section" id="declaration-of-sql-statements">
<h3>Declaration of SQL Statements<a class="headerlink" href="#declaration-of-sql-statements" title="Permalink to this headline">¶</a></h3>
<p>If there is no chance for changing the SQL statement, it should be used in the <code class="docutils literal notranslate"><span class="pre">Prepare</span></code> function. The reason for this is, that the SQL statement and the bind parameters are closer to each other.</p>
<p>The SQL statement should be written as one nicely indented string without concatenation like this:</p>
<div class="highlight-Perl notranslate"><div class="highlight"><pre><span></span><span class="k">return</span> <span class="k">if</span> <span class="o">!</span><span class="nv">$Self</span><span class="o">-&gt;</span><span class="p">{</span><span class="n">DBObject</span><span class="p">}</span><span class="o">-&gt;</span><span class="n">Prepare</span><span class="p">(</span>
    <span class="n">SQL</span> <span class="o">=&gt;</span> <span class="s">&#39;</span>
<span class="s">        SELECT art.id</span>
<span class="s">        FROM article art, article_sender_type ast</span>
<span class="s">        WHERE art.ticket_id = ?</span>
<span class="s">            AND art.article_sender_type_id = ast.id</span>
<span class="s">            AND ast.name = ?</span>
<span class="s">        ORDER BY art.id&#39;</span><span class="p">,</span>
    <span class="n">Bind</span> <span class="o">=&gt;</span> <span class="p">[</span> <span class="o">\</span><span class="nv">$Param</span><span class="p">{</span><span class="n">TicketID</span><span class="p">},</span> <span class="o">\</span><span class="nv">$Param</span><span class="p">{</span><span class="n">SenderType</span><span class="p">}</span> <span class="p">],</span>
<span class="p">);</span>
</pre></div>
</div>
<p>This is easy to read and modify, and the whitespace can be handled well by our supported DBMSs. For auto-generated SQL code (like in <code class="docutils literal notranslate"><span class="pre">TicketSearch</span></code>), this indentation is not necessary.</p>
</div>
<div class="section" id="returning-on-errors">
<h3>Returning on Errors<a class="headerlink" href="#returning-on-errors" title="Permalink to this headline">¶</a></h3>
<p>Whenever you use database functions you should handle errors. If anything goes wrong, return from subroutine:</p>
<div class="highlight-Perl notranslate"><div class="highlight"><pre><span></span><span class="k">return</span> <span class="k">if</span> <span class="o">!</span><span class="nv">$Self</span><span class="o">-&gt;</span><span class="p">{</span><span class="n">DBObject</span><span class="p">}</span><span class="o">-&gt;</span><span class="n">Prepare</span><span class="p">(</span> <span class="o">...</span> <span class="p">);</span>
</pre></div>
</div>
</div>
<div class="section" id="using-limit">
<h3>Using Limit<a class="headerlink" href="#using-limit" title="Permalink to this headline">¶</a></h3>
<p>Use <code class="docutils literal notranslate"><span class="pre">Limit</span> <span class="pre">=&gt;</span> <span class="pre">1</span></code> if you expect just one row to be returned.</p>
<div class="highlight-Perl notranslate"><div class="highlight"><pre><span></span><span class="nv">$Self</span><span class="o">-&gt;</span><span class="p">{</span><span class="n">DBObject</span><span class="p">}</span><span class="o">-&gt;</span><span class="n">Prepare</span><span class="p">(</span>
    <span class="n">SQL</span>   <span class="o">=&gt;</span> <span class="s">&#39;SELECT id FROM users WHERE username = ?&#39;</span><span class="p">,</span>
    <span class="n">Bind</span>  <span class="o">=&gt;</span> <span class="p">[</span> <span class="o">\</span><span class="nv">$Username</span> <span class="p">],</span>
    <span class="n">Limit</span> <span class="o">=&gt;</span> <span class="mi">1</span><span class="p">,</span>
<span class="p">);</span>
</pre></div>
</div>
</div>
<div class="section" id="using-the-while-loop">
<h3>Using the <code class="docutils literal notranslate"><span class="pre">while</span></code> loop<a class="headerlink" href="#using-the-while-loop" title="Permalink to this headline">¶</a></h3>
<p>Always use the <code class="docutils literal notranslate"><span class="pre">while</span></code> loop, even when you expect one row to be returned, as some databases do not release the statement handle and this can lead to weird bugs.</p>
</div>
</div>
<div class="section" id="javascript">
<h2>JavaScript<a class="headerlink" href="#javascript" title="Permalink to this headline">¶</a></h2>
<p>All JavaScript is loaded in all browsers (no browser hacks in the template files). The code is responsible to decide if it has to skip or execute certain parts of itself only in certain browsers.</p>
<div class="section" id="directory-structure">
<h3>Directory Structure<a class="headerlink" href="#directory-structure" title="Permalink to this headline">¶</a></h3>
<p>Directory structure inside the <code class="docutils literal notranslate"><span class="pre">var/httpd/htdocs/js/</span></code> folder:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>* js
    * thirdparty              # thirdparty libs always have the version number inside the directory
        * ckeditor-3.0.1
        * jquery-1.3.2
    * Core.Agent.*            # stuff specific to the agent interface
    * Core.Customer.*         # customer interface
    * Core.*                  # common API
</pre></div>
</div>
</div>
<div class="section" id="thirdparty-code">
<h3>Thirdparty Code<a class="headerlink" href="#thirdparty-code" title="Permalink to this headline">¶</a></h3>
<p>Every thirdparty module gets its own subdirectory: <em>module name-version number</em> (e.g. ckeditor-4.7.0, jquery-3.2.1). Inside of that, file names should not have a version number or postfix included (wrong: <code class="docutils literal notranslate"><span class="pre">jquery/jquery-3.2.1.min.js</span></code>, right: <code class="docutils literal notranslate"><span class="pre">jquery-3.2.1/jquery.js</span></code>).</p>
</div>
<div class="section" id="javascript-variables">
<h3>JavaScript Variables<a class="headerlink" href="#javascript-variables" title="Permalink to this headline">¶</a></h3>
<p>Variable names should be CamelCase, just like in Perl.</p>
<p>Variables that hold a jQuery object should start with <code class="docutils literal notranslate"><span class="pre">$</span></code>, for example: <code class="docutils literal notranslate"><span class="pre">$Tooltip</span></code>.</p>
</div>
<div class="section" id="functions">
<h3>Functions<a class="headerlink" href="#functions" title="Permalink to this headline">¶</a></h3>
<p>Function names should be CamelCase, just like in Perl.</p>
</div>
<div class="section" id="namespaces">
<h3>Namespaces<a class="headerlink" href="#namespaces" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="code-comments-in-javascript">
<h3>Code Comments in JavaScript<a class="headerlink" href="#code-comments-in-javascript" title="Permalink to this headline">¶</a></h3>
<p>The <a class="reference internal" href="#code-comments-in-perl"><span class="std std-ref">Code Comments in Perl</span></a> also apply to JavaScript.</p>
<ul class="simple">
<li>Single line comments are done with <code class="docutils literal notranslate"><span class="pre">//</span></code>.</li>
<li>Longer comments are done with <code class="docutils literal notranslate"><span class="pre">/*</span> <span class="pre">...</span> <span class="pre">*/</span></code>.</li>
<li>If you comment out parts of your JavaScript code, only use <code class="docutils literal notranslate"><span class="pre">//</span></code> because <code class="docutils literal notranslate"><span class="pre">/*</span> <span class="pre">...</span> <span class="pre">*/</span></code> can cause  problems with regular expressions in the code.</li>
</ul>
</div>
<div class="section" id="event-handling">
<h3>Event Handling<a class="headerlink" href="#event-handling" title="Permalink to this headline">¶</a></h3>
<p>Always use <code class="docutils literal notranslate"><span class="pre">$.on()</span></code> instead of the event-shorthand methods of jQuery for better readability (wrong: <code class="docutils literal notranslate"><span class="pre">$SomeObject.click(...)</span></code>, right: <code class="docutils literal notranslate"><span class="pre">$SomeObject.on('click',</span> <span class="pre">...</span></code>).</p>
<p>If you <code class="docutils literal notranslate"><span class="pre">$.on()</span></code> events, make sure to <code class="docutils literal notranslate"><span class="pre">$.off()</span></code> them beforehand, to make sure that events will not be bound twice, should the code be executed another time.</p>
<p>Make sure to use <code class="docutils literal notranslate"><span class="pre">$.on()</span></code> with namespacing, such as <code class="docutils literal notranslate"><span class="pre">$.on('click.&lt;Name&gt;')</span></code>.</p>
</div>
</div>
<div class="section" id="html">
<h2>HTML<a class="headerlink" href="#html" title="Permalink to this headline">¶</a></h2>
<p>Use HTML 5 notation. Don’t use self-closing tags for non-void elements (such as <code class="docutils literal notranslate"><span class="pre">div</span></code>, <code class="docutils literal notranslate"><span class="pre">span</span></code>, etc.).</p>
<p>Use proper intendation. Elements which contain other non-void child elements should not be on the same level as their children.</p>
<p>Don’t use HTML elements for layout reasons (e.g. using <code class="docutils literal notranslate"><span class="pre">br</span></code> elements for adding space to the top or bottom of other elements). Use the proper CSS classes instead.</p>
<p>Don’t use inline CSS. All CSS should either be added by using predefined classes or (if necessary) using JavaScript (e.g. for showing/hiding elements).</p>
<p>Don’t use JavaScript in templates. All needed JavaScript should be part of the proper library for a certain front end module or of a proper global library. If you need to pass JavaScript data to the front end, use <code class="docutils literal notranslate"><span class="pre">$LayoutObject-&gt;AddJSData()</span></code>.</p>
</div>
<div class="section" id="css">
<h2>CSS<a class="headerlink" href="#css" title="Permalink to this headline">¶</a></h2>
<p>Minimum resolution is 1024x768px.</p>
<p>The layout is liquid, which means that if the screen is wider, the space will be used.</p>
<p>Absolute size measurements should be specified in px to have a consistent look on many platforms and browsers.</p>
<p>Documentation is made with CSSDOC (see CSS files for examples). All logical blocks should have a CSSDOC comment.</p>
<div class="section" id="css-architecture">
<h3>CSS Architecture<a class="headerlink" href="#css-architecture" title="Permalink to this headline">¶</a></h3>
<p>We follow the <a class="reference external" href="http://wiki.github.com/stubbornella/oocss/">Object Oriented CSS</a> approach. In essence, this means that the layout is achieved by combining different generic building blocks to realize a particular design.</p>
<p>Wherever possible, module specific design should not be used. Therefore we also do not work with IDs on the <code class="docutils literal notranslate"><span class="pre">body</span></code> element, for example, if it can be avoided.</p>
</div>
<div class="section" id="css-style">
<h3>CSS Style<a class="headerlink" href="#css-style" title="Permalink to this headline">¶</a></h3>
<p>All definitions have a <code class="docutils literal notranslate"><span class="pre">{</span></code> in the same line as the selector, all rules are defined in one row per rule, the definition ends with a row with a single <code class="docutils literal notranslate"><span class="pre">}</span></code> in it.</p>
<p>See the following example:</p>
<div class="highlight-CSS notranslate"><div class="highlight"><pre><span></span><span class="p">#</span><span class="nn">Selector</span> <span class="p">{</span>
    <span class="k">width</span><span class="p">:</span> <span class="mi">10</span><span class="kt">px</span><span class="p">;</span>
    <span class="k">height</span><span class="p">:</span> <span class="mi">20</span><span class="kt">px</span><span class="p">;</span>
    <span class="k">padding</span><span class="p">:</span> <span class="mi">4</span><span class="kt">px</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<ul>
<li><p class="first">Between <code class="docutils literal notranslate"><span class="pre">:</span></code> and the rule value, there is a space.</p>
</li>
<li><p class="first">Every rule has an indent of 4 spaces.</p>
</li>
<li><p class="first">If multiple selectors are specified, separate them with comma and put each one on an own line:</p>
<blockquote>
<div><div class="highlight-CSS notranslate"><div class="highlight"><pre><span></span><span class="p">#</span><span class="nn">Selector1</span><span class="o">,</span>
<span class="p">#</span><span class="nn">Selector2</span><span class="o">,</span>
<span class="p">#</span><span class="nn">Selector3</span> <span class="p">{</span>
    <span class="k">width</span><span class="p">:</span> <span class="mi">10</span><span class="kt">px</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</div></blockquote>
</li>
<li><p class="first">If rules are combinable, combine them (e.g. combine <code class="docutils literal notranslate"><span class="pre">background-position</span></code>, <code class="docutils literal notranslate"><span class="pre">background-image</span></code>, etc. into <code class="docutils literal notranslate"><span class="pre">background</span></code>).</p>
</li>
<li><p class="first">Rules should be in a logical order within a definition (all color specific rule together, all positioning rules together, etc.).</p>
</li>
<li><p class="first">All IDs and names are written in CamelCase notation:</p>
<blockquote>
<div><div class="highlight-HTML notranslate"><div class="highlight"><pre><span></span><span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;NavigationBar&quot;</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;AdminMenu&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</pre></div>
</div>
</div></blockquote>
</li>
</ul>
</div>
</div>
</div>


           </div>
           
          </div>
          

<script>
// Start Google Analytics Tracking
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');
ga('create', 'UA-28118796-2', 'auto');
ga('send', 'pageview');
// End Google Analytics Tracking
</script>

<footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="ui-design.html" class="btn btn-neutral float-right" title="User Interface Design" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="translate.html" class="btn btn-neutral" title="Translating" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2001-2020 OTRS AG, https://otrs.com/

    </p>
  </div> 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../../_static/jquery.js"></script>
        <script type="text/javascript" src="../../_static/underscore.js"></script>
        <script type="text/javascript" src="../../_static/doctools.js"></script>
    

  

  <script type="text/javascript" src="../../_static/js/theme.js"></script>

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>