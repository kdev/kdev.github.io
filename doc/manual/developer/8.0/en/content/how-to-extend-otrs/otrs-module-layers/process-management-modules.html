

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Process Management &mdash; OTRS Developer Manual 8.0 documentation</title>
  

  
  
  
  

  

  
  
    

  

  <link rel="stylesheet" href="../../../_static/css/otrs.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="How to Publish Your OTRS Extensions" href="../../how-to-publish-otrs-extensions.html" />
    <link rel="prev" title="Ticket Postmaster Module" href="ticket-postmaster-modules.html" /> 

  
  <script src="../../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          
    
    
    <a href="https://doc.otrs.com/doc" class="icon fa-rocket DocumentationOverview"> OTRS Documentation</a>

    

          
            <a href="../../index.html" class="icon icon-home"> OTRS Developer Manual
          

          
            
            <img src="../../../_static/otrs-logo.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                8.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          


        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../get-started.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../how-it-works.html">OTRS Internals - How it Works</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../how-to-extend-otrs.html">How to Extend OTRS</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../writing-otrs-application.html">Writing A New OTRS Front End Module</a></li>
<li class="toctree-l2"><a class="reference internal" href="../writing-new-otrs-frontend-component.html">Writing A New OTRS Front End Component</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../otrs-module-layers.html">Using the power of the OTRS module layers</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="agent-auth.html">Agent Authentication Module</a></li>
<li class="toctree-l3"><a class="reference internal" href="auth-sync.html">Authentication Synchronization Module</a></li>
<li class="toctree-l3"><a class="reference internal" href="customer-auth.html">Customer Authentication Module</a></li>
<li class="toctree-l3"><a class="reference internal" href="customer-user-preferences.html">Customer User Preferences Module</a></li>
<li class="toctree-l3"><a class="reference internal" href="queue-preferences.html">Queue Preferences Module</a></li>
<li class="toctree-l3"><a class="reference internal" href="service-preferences.html">Service Preferences Module</a></li>
<li class="toctree-l3"><a class="reference internal" href="sla-preferences.html">SLA Preferences Module</a></li>
<li class="toctree-l3"><a class="reference internal" href="log.html">Log Module</a></li>
<li class="toctree-l3"><a class="reference internal" href="outputfilter.html">Output Filter</a></li>
<li class="toctree-l3"><a class="reference internal" href="stats.html">Stats Module</a></li>
<li class="toctree-l3"><a class="reference internal" href="ticketnumber-generator.html">Ticket Number Generator Modules</a></li>
<li class="toctree-l3"><a class="reference internal" href="ticketevent.html">Ticket Event Module</a></li>
<li class="toctree-l3"><a class="reference internal" href="dashboard.html">Dashboard Module</a></li>
<li class="toctree-l3"><a class="reference internal" href="notify.html">Notification Module</a></li>
<li class="toctree-l3"><a class="reference internal" href="ticket-menu.html">Ticket Menu Module</a></li>
<li class="toctree-l3"><a class="reference internal" href="rootapplication.html">Root Application Module Layer</a></li>
<li class="toctree-l3"><a class="reference internal" href="gi-transport.html">Network Transport</a></li>
<li class="toctree-l3"><a class="reference internal" href="gi-mapping.html">Mapping</a></li>
<li class="toctree-l3"><a class="reference internal" href="gi-invoker.html">Invoker</a></li>
<li class="toctree-l3"><a class="reference internal" href="gi-operation.html">Operation</a></li>
<li class="toctree-l3"><a class="reference internal" href="daemon/daemon-modules.html">OTRS Daemon</a></li>
<li class="toctree-l3"><a class="reference internal" href="daemon/scheduler-task-worker-modules.html">OTRS Scheduler</a></li>
<li class="toctree-l3"><a class="reference internal" href="dynamic-fields/dynamic-fields-overview.html">Overview</a></li>
<li class="toctree-l3"><a class="reference internal" href="dynamic-fields/dynamic-fields-framework.html">Dynamic Fields Framework</a></li>
<li class="toctree-l3"><a class="reference internal" href="dynamic-fields/dynamic-fields-interaction.html">Dynamic Field Interaction With Front End Modules</a></li>
<li class="toctree-l3"><a class="reference internal" href="dynamic-fields/dynamic-fields-extend-options.html">How To Extend The Dynamic Fields</a></li>
<li class="toctree-l3"><a class="reference internal" href="dynamic-fields/dynamic-fields-new-field.html">Create New Dynamic Field</a></li>
<li class="toctree-l3"><a class="reference internal" href="dynamic-fields/dynamic-fields-extend.html">Creating a Dynamic Field Functionality Extension</a></li>
<li class="toctree-l3"><a class="reference internal" href="ticket-postmaster-modules.html">Ticket Postmaster Module</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Process Management</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#process-management-modules">Process Management Modules</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../how-to-publish-otrs-extensions.html">How to Publish Your OTRS Extensions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../documentation.html">Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../contributing.html">Contributing to OTRS</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../additional-resources.html">Additional Resources</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">OTRS Developer Manual</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../../how-to-extend-otrs.html">How to Extend OTRS</a> &raquo;</li>
        
          <li><a href="../otrs-module-layers.html">Using the power of the OTRS module layers</a> &raquo;</li>
        
      <li>Process Management</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            
              <a href="https://github.com/OTRS/doc-developer/blob/rel-8_0/content/how-to-extend-otrs/otrs-module-layers/process-management-modules.rst" class="fa fa-github"> Edit on GitHub</a>
            
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="process-management">
<h1>Process Management<a class="headerlink" href="#process-management" title="Permalink to this headline">¶</a></h1>
<p>Since OTRS 7 process management can use script modules to perform activities (script tasks) and/or sequence flow actions (know before as transition actions). This modules are located in <code class="docutils literal notranslate"><span class="pre">Kernel::System::ProcessManagement::Modules</span></code>.</p>
<div class="section" id="process-management-modules">
<h2>Process Management Modules<a class="headerlink" href="#process-management-modules" title="Permalink to this headline">¶</a></h2>
<p>The process management modules are scripts written in Perl language to perform certain action or actions over the process ticket like set a dynamic field or change a queue. Or to any other part of the system like create new tickets.</p>
<p>By default modules use a set of key value pairs to use them as parameters for the action e.g. to change queue of the process ticket, the queue or queue ID and its corresponding value is needed.</p>
<p>Some scripts might require more than a simple key value pairs as parameters or its configuration might need to have a more user friendly GUI. In such cases OTRS provides some configuration field types that can be also extended if needed.</p>
<p>Current field types:</p>
<dl class="docutils">
<dt>Dropdown</dt>
<dd>Shows a drop-down list with predefined values.</dd>
<dt>Key-value list</dt>
<dd>Shows a list of simple key value pairs (text inputs). Pairs can be added or deleted.</dd>
<dt>Multi language Rich Text</dt>
<dd>Shows a Rich Text editor associated to a system language, also shows a language selector to add Rich Text fields for the proper selected language.</dd>
<dt>Recipients</dt>
<dd>Shows a multi select field pre-filled with agents to be used as email recipients, also displays a free input field to be used to specify external email addresses to be added to the recipients list.</dd>
<dt>Rich Text</dt>
<dd>Shows a single Rich Text field.</dd>
</dl>
<div class="section" id="creating-a-new-process-management-module">
<h3>Creating a New Process Management Module<a class="headerlink" href="#creating-a-new-process-management-module" title="Permalink to this headline">¶</a></h3>
<p>The following is an example of how to create a process management module. It includes a section where all possible fields are defined as a reference. To create a new module only one field type is needed but consider that by convention the parameter user ID is used to impersonate all the actions in the module with another user than the one that triggers the action. Then it is a good practice to always include the key-value list field type along with any other needed field.</p>
<div class="section" id="process-management-module-code-example">
<h4>Process Management Module Code Example<a class="headerlink" href="#process-management-module-code-example" title="Permalink to this headline">¶</a></h4>
<p>The following code implements a dummy process management module that can be used in script task activities or sequence flow actions.</p>
<div class="highlight-Perl notranslate"><div class="highlight"><pre><span></span><span class="c1"># --</span>
<span class="c1"># Copyright (C) 2001-2020 OTRS AG, https://otrs.com/</span>
<span class="c1"># --</span>
<span class="c1"># This software comes with ABSOLUTELY NO WARRANTY. For details, see</span>
<span class="c1"># the enclosed file COPYING for license information (GPL). If you</span>
<span class="c1"># did not receive this file, see https://www.gnu.org/licenses/gpl-3.0.txt.</span>
<span class="c1"># --</span>

<span class="k">package</span> <span class="nn">Kernel::System::ProcessManagement::Modules::Test</span><span class="p">;</span>

<span class="k">use</span> <span class="nn">strict</span><span class="p">;</span>
<span class="k">use</span> <span class="nn">warnings</span><span class="p">;</span>
<span class="k">use</span> <span class="nn">utf8</span><span class="p">;</span>

<span class="k">use</span> <span class="nn">Kernel::System::VariableCheck</span> <span class="sx">qw(:all)</span><span class="p">;</span>

<span class="k">use</span> <span class="nn">parent</span> <span class="sx">qw(Kernel::System::ProcessManagement::Modules::Base)</span><span class="p">;</span>

<span class="k">our</span> <span class="nv">@ObjectDependencies</span> <span class="o">=</span> <span class="p">(</span> <span class="p">);</span>
</pre></div>
</div>
<p>This is common header that can be found in common OTRS modules. The class/package name is declared via the <code class="docutils literal notranslate"><span class="pre">package</span></code> keyword.</p>
<p>In this case we are inheriting from <code class="docutils literal notranslate"><span class="pre">Base</span></code> class, and the object manager dependencies are set.</p>
<div class="highlight-Perl notranslate"><div class="highlight"><pre><span></span><span class="k">sub</span> <span class="nf">new</span> <span class="p">{</span>
    <span class="k">my</span> <span class="p">(</span> <span class="nv">$Type</span><span class="p">,</span> <span class="nv">%Param</span> <span class="p">)</span> <span class="o">=</span> <span class="nv">@_</span><span class="p">;</span>

    <span class="c1"># Allocate new hash for object.</span>
    <span class="k">my</span> <span class="nv">$Self</span> <span class="o">=</span> <span class="p">{};</span>
    <span class="nb">bless</span><span class="p">(</span> <span class="nv">$Self</span><span class="p">,</span> <span class="nv">$Type</span> <span class="p">);</span>

    <span class="nv">$Self</span><span class="o">-&gt;</span><span class="p">{</span><span class="n">Config</span><span class="p">}</span> <span class="o">=</span> <span class="p">{</span>
        <span class="n">Description</span> <span class="o">=&gt;</span> <span class="s">&#39;Description for the module.&#39;</span><span class="p">,</span>
        <span class="n">ConfigSets</span>  <span class="o">=&gt;</span> <span class="p">[</span>
            <span class="p">{</span>
                <span class="n">Type</span>        <span class="o">=&gt;</span> <span class="s">&#39;Dropdown&#39;</span><span class="p">,</span>
                <span class="n">Description</span> <span class="o">=&gt;</span> <span class="s">&#39;Description for Dropdown.&#39;</span><span class="p">,</span>
                <span class="n">Mandatory</span>   <span class="o">=&gt;</span> <span class="mi">1</span><span class="p">,</span>
                <span class="n">Config</span>      <span class="o">=&gt;</span> <span class="p">{</span>
                    <span class="n">Data</span> <span class="o">=&gt;</span> <span class="p">{</span>
                        <span class="n">Internal1</span> <span class="o">=&gt;</span> <span class="s">&#39;Display 1&#39;</span><span class="p">,</span>
                        <span class="n">Internal2</span> <span class="o">=&gt;</span> <span class="s">&#39;Display 2&#39;</span><span class="p">,</span>
                    <span class="p">},</span>
                    <span class="n">Name</span>         <span class="o">=&gt;</span> <span class="s">&#39;Test-DropDown&#39;</span><span class="p">,</span>
                    <span class="n">Multiple</span>     <span class="o">=&gt;</span> <span class="mi">1</span><span class="p">,</span>
                    <span class="n">PossibleNone</span> <span class="o">=&gt;</span> <span class="mi">1</span><span class="p">,</span>
                    <span class="n">Sort</span>         <span class="o">=&gt;</span> <span class="s">&#39;AlphanumericValue&#39;</span><span class="p">,</span>
                    <span class="n">Translation</span>  <span class="o">=&gt;</span> <span class="mi">1</span><span class="p">,</span>
                <span class="p">},</span>
            <span class="p">},</span>
            <span class="p">{</span>
                <span class="n">Type</span>        <span class="o">=&gt;</span> <span class="s">&#39;KeyValueList&#39;</span><span class="p">,</span>
                <span class="n">Description</span> <span class="o">=&gt;</span> <span class="s">&#39;Description of the Key/Value pairs&#39;</span><span class="p">,</span>
                <span class="n">Defaults</span>    <span class="o">=&gt;</span> <span class="p">[</span>
                    <span class="p">{</span>
                        <span class="n">Key</span>       <span class="o">=&gt;</span> <span class="s">&#39;Test-Param1&#39;</span><span class="p">,</span>
                        <span class="n">Value</span>     <span class="o">=&gt;</span> <span class="s">&#39;Hello&#39;</span><span class="p">,</span>
                        <span class="n">Mandatory</span> <span class="o">=&gt;</span> <span class="mi">1</span><span class="p">,</span>
                    <span class="p">},</span>
                    <span class="p">{</span>
                        <span class="n">Key</span>       <span class="o">=&gt;</span> <span class="s">&#39;Test-Param2&#39;</span><span class="p">,</span>
                        <span class="n">Mandatory</span> <span class="o">=&gt;</span> <span class="mi">1</span><span class="p">,</span>
                    <span class="p">},</span>
                    <span class="p">{</span>
                        <span class="n">Key</span>       <span class="o">=&gt;</span> <span class="s">&#39;Test-Param3&#39;</span><span class="p">,</span>
                        <span class="n">Value</span>     <span class="o">=&gt;</span> <span class="s">&#39;World&#39;</span><span class="p">,</span>
                        <span class="n">Mandatory</span> <span class="o">=&gt;</span> <span class="mi">0</span><span class="p">,</span>
                    <span class="p">},</span>
                <span class="p">],</span>
            <span class="p">},</span>
            <span class="p">{</span>
                <span class="n">Type</span>        <span class="o">=&gt;</span> <span class="s">&#39;MultiLanguageRichText&#39;</span><span class="p">,</span>
                <span class="n">Description</span> <span class="o">=&gt;</span> <span class="s">&quot;Description for Mutli-Language Rich Text.&quot;</span><span class="p">,</span>
                <span class="n">Defaults</span>    <span class="o">=&gt;</span> <span class="p">[</span>
                    <span class="p">{</span>
                        <span class="n">Key</span>   <span class="o">=&gt;</span> <span class="s">&#39;en_Subject&#39;</span><span class="p">,</span>
                        <span class="n">Value</span> <span class="o">=&gt;</span> <span class="s">&#39;Hello&#39;</span><span class="p">,</span>
                    <span class="p">},</span>
                    <span class="p">{</span>
                        <span class="n">Key</span>   <span class="o">=&gt;</span> <span class="s">&#39;en_Body&#39;</span><span class="p">,</span>
                        <span class="n">Value</span> <span class="o">=&gt;</span> <span class="s">&#39;World&#39;</span><span class="p">,</span>
                    <span class="p">},</span>

                <span class="p">],</span>
            <span class="p">},</span>
            <span class="p">{</span>
                <span class="n">Type</span>        <span class="o">=&gt;</span> <span class="s">&#39;Recipients&#39;</span><span class="p">,</span>
                <span class="n">Description</span> <span class="o">=&gt;</span> <span class="s">&quot;Description for Recipients.&quot;</span>
            <span class="p">},</span>
            <span class="p">{</span>
                <span class="n">Type</span>        <span class="o">=&gt;</span> <span class="s">&#39;RichText&#39;</span><span class="p">,</span>
                <span class="n">Description</span> <span class="o">=&gt;</span> <span class="s">&quot;Description for Rich Text.&quot;</span><span class="p">,</span>
                <span class="n">Defaults</span>    <span class="o">=&gt;</span> <span class="p">[</span>
                    <span class="p">{</span>
                        <span class="n">Value</span>     <span class="o">=&gt;</span> <span class="s">&#39;Hello World&#39;</span><span class="p">,</span>
                        <span class="n">Mandatory</span> <span class="o">=&gt;</span> <span class="mi">1</span><span class="p">,</span>
                    <span class="p">},</span>
                <span class="p">],</span>
            <span class="p">},</span>
        <span class="p">],</span>
    <span class="p">};</span>

    <span class="k">return</span> <span class="nv">$Self</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The constructor <code class="docutils literal notranslate"><span class="pre">new()</span></code> creates a new instance of the class. The configuration fields are defined here and they are set in <code class="docutils literal notranslate"><span class="pre">$Self-&gt;{Config}</span></code>.</p>
<p>The configuration has two main entries:</p>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">Description</span></code></dt>
<dd>This is used to explain the administrators what does the module do and/or considerations for its configuration.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">ConfigSets</span></code></dt>
<dd>This is just a container for the actual configuration fields.</dd>
</dl>
<p>All configuration fields requires a type that defines the kind of field and they could also have an internal description to be used as the title of the field widget. If it is not defined, a default description is used.</p>
<p>Each field defines its configuration parameters and capabilities. The following is a small reference for the fields provided by OTRS out of the box.</p>
<ul>
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">Dropdown</span></code></p>
<blockquote>
<div><dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">Mandatory</span></code></dt>
<dd><p class="first last">Used to define if a value is required to be set.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">Config</span></code></dt>
<dd><p class="first">Holds the information to display the drop-down field.</p>
<dl class="last docutils">
<dt><code class="docutils literal notranslate"><span class="pre">Data</span></code></dt>
<dd><p class="first last">Simple hash that defines the options for the drop-down. The keys are used internally, and the values are the options that the user sees in the screen.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">Name</span></code></dt>
<dd><p class="first last">The name of the parameter.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">Multiple</span></code></dt>
<dd><p class="first last">To define if only one or multiple values can be selected.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">PossibleNone</span></code></dt>
<dd><p class="first last">Defines if the list of values offer an empty value or not.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">Sort</span></code></dt>
<dd><p class="first last">Defines how the options will be sorted when the field is rendered. The possible values are: <code class="docutils literal notranslate"><span class="pre">AlphanumericValue</span></code>, <code class="docutils literal notranslate"><span class="pre">NumericValue</span></code>, <code class="docutils literal notranslate"><span class="pre">AlphanumericKey</span></code> and <code class="docutils literal notranslate"><span class="pre">NumericKey</span></code>.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">Translation</span></code>:</dt>
<dd><p class="first last">Set if the displayed values should be translated.</p>
</dd>
</dl>
</dd>
</dl>
</div></blockquote>
</li>
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">KeyValueList</span></code></p>
<blockquote>
<div><dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">Defaults</span></code></dt>
<dd><p class="first">Array of hashes that holds the default configuration for its key value pairs.</p>
<dl class="last docutils">
<dt><code class="docutils literal notranslate"><span class="pre">Key</span></code></dt>
<dd><p class="first last">The name of a parameter.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">Value</span></code></dt>
<dd><p class="first last">The default value of the parameter (optional).</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">Mandatory</span></code></dt>
<dd><p class="first last">Mandatory parameters can not be renamed or removed (optional).</p>
</dd>
</dl>
</dd>
</dl>
</div></blockquote>
</li>
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">MultiLanguageRichText</span></code></p>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">Defaults</span></code></dt>
<dd><p class="first">Array of hashes that holds the default configuration each language and field part.</p>
<dl class="last docutils">
<dt><code class="docutils literal notranslate"><span class="pre">Key</span></code></dt>
<dd><p class="first last">This is composed by language such as <code class="docutils literal notranslate"><span class="pre">en</span></code> or <code class="docutils literal notranslate"><span class="pre">es_MX</span></code>, followed by a <code class="docutils literal notranslate"><span class="pre">_</span></code> (underscore character) and then <code class="docutils literal notranslate"><span class="pre">Subject</span></code> or <code class="docutils literal notranslate"><span class="pre">Body</span></code> for the corresponding part of the field.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">Value</span></code></dt>
<dd><p class="first last">The default value of the field part (optional).</p>
</dd>
</dl>
</dd>
</dl>
</li>
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">Recipients</span></code></p>
<blockquote>
<div><p>No further configuration is provided for this kind of field.</p>
</div></blockquote>
</li>
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">RichText</span></code></p>
<blockquote>
<div><dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">Defaults</span></code></dt>
<dd><p class="first">Array of hashes that holds the default configuration field (only the first element is used).</p>
<dl class="last docutils">
<dt><code class="docutils literal notranslate"><span class="pre">Value</span></code></dt>
<dd><p class="first last">The default value of the field.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">Mandatory</span></code></dt>
<dd><p class="first last">Used to define if a value is required to be set.</p>
</dd>
</dl>
</dd>
</dl>
</div></blockquote>
</li>
</ul>
<div class="highlight-Perl notranslate"><div class="highlight"><pre><span></span><span class="k">sub</span> <span class="nf">Run</span> <span class="p">{</span>
    <span class="k">my</span> <span class="p">(</span> <span class="nv">$Self</span><span class="p">,</span> <span class="nv">%Param</span> <span class="p">)</span> <span class="o">=</span> <span class="nv">@_</span><span class="p">;</span>

    <span class="c1"># Define a common message to output in case of any error.</span>
    <span class="k">my</span> <span class="nv">$CommonMessage</span> <span class="o">=</span> <span class="s">&quot;Process: $Param{ProcessEntityID} Activity: $Param{ActivityEntityID}&quot;</span><span class="p">;</span>

    <span class="c1"># Add SequenceFlowEntityID to common message if available.</span>
    <span class="k">if</span> <span class="p">(</span> <span class="nv">$Param</span><span class="p">{</span><span class="n">SequenceFlowEntityID</span><span class="p">}</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nv">$CommonMessage</span> <span class="o">.=</span> <span class="s">&quot; SequenceFlow: $Param{SequenceFlowEntityID}&quot;</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="c1"># Add SequenceFlowActionEntityID to common message if available.</span>
    <span class="k">if</span> <span class="p">(</span> <span class="nv">$Param</span><span class="p">{</span><span class="n">SequenceFlowActionEntityID</span><span class="p">}</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nv">$CommonMessage</span> <span class="o">.=</span> <span class="s">&quot; SequenceFlowAction: $Param{SequenceFlowActionEntityID}&quot;</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="c1"># Check for missing or wrong params.</span>
    <span class="k">my</span> <span class="nv">$Success</span> <span class="o">=</span> <span class="nv">$Self</span><span class="o">-&gt;</span><span class="n">_CheckParams</span><span class="p">(</span>
        <span class="nv">%Param</span><span class="p">,</span>
        <span class="n">CommonMessage</span> <span class="o">=&gt;</span> <span class="nv">$CommonMessage</span><span class="p">,</span>
    <span class="p">);</span>
    <span class="k">return</span> <span class="k">if</span> <span class="o">!</span><span class="nv">$Success</span><span class="p">;</span>

    <span class="c1"># Override UserID if specified as a parameter in the TA config.</span>
    <span class="nv">$Param</span><span class="p">{</span><span class="n">UserID</span><span class="p">}</span> <span class="o">=</span> <span class="nv">$Self</span><span class="o">-&gt;</span><span class="n">_OverrideUserID</span><span class="p">(</span><span class="nv">%Param</span><span class="p">);</span>

    <span class="c1"># Use ticket attributes if needed.</span>
    <span class="nv">$Self</span><span class="o">-&gt;</span><span class="n">_ReplaceTicketAttributes</span><span class="p">(</span><span class="nv">%Param</span><span class="p">);</span>
    <span class="nv">$Self</span><span class="o">-&gt;</span><span class="n">_ReplaceAdditionalAttributes</span><span class="p">(</span><span class="nv">%Param</span><span class="p">);</span>

    <span class="c1"># Get module configuration.</span>
    <span class="k">my</span> <span class="nv">$ModuleConfig</span> <span class="o">=</span> <span class="nv">$Param</span><span class="p">{</span><span class="n">Config</span><span class="p">};</span>

    <span class="c1"># Add module logic here!</span>

    <span class="k">return</span> <span class="mi">1</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">Run</span></code> method is the main part of the module. First sets a common message that can be used in error logs or any other purpose. For consistency its highly recommended to use it as described above.</p>
<p>Next step is to check if the global parameters was sent correctly.</p>
<p>By convention all modules should be able to override the current user ID by one is provided in the parameters (if any). This passed user ID should be used in any function call that requires it.</p>
<p>User defined attribute values can use current ticket values by using OTRS smart tags. <code class="docutils literal notranslate"><span class="pre">_ReplaceTicketAttributes</span></code> is used for normal text attributes, while <code class="docutils literal notranslate"><span class="pre">_ReplaceAdditionalAttributes</span></code> for Rich Texts. For more complex parameters it might need customized functions to replace this smart tags.</p>
<p>The following is the proper logic of the module.</p>
<p>If everything was OK it must return 1.</p>
</div>
</div>
<div class="section" id="creating-a-new-process-management-module-configuration-field">
<h3>Creating a New Process Management Module Configuration Field<a class="headerlink" href="#creating-a-new-process-management-module-configuration-field" title="Permalink to this headline">¶</a></h3>
<p>The following is an example of how to create a process management module configuration field. This field can be used by any process management module after its configuration.</p>
<div class="section" id="process-management-module-configuration-field-code-example">
<h4>Process Management Module Configuration Field Code Example<a class="headerlink" href="#process-management-module-configuration-field-code-example" title="Permalink to this headline">¶</a></h4>
<p>The following code implements a simple input process management module configuration field (test). The name of the field and its default value can be set trough a process management module <code class="docutils literal notranslate"><span class="pre">ConfigSets</span></code>.</p>
<div class="highlight-Perl notranslate"><div class="highlight"><pre><span></span><span class="c1"># --</span>
<span class="c1"># Copyright (C) 2001-2020 OTRS AG, https://otrs.com/</span>
<span class="c1"># --</span>
<span class="c1"># This software comes with ABSOLUTELY NO WARRANTY. For details, see</span>
<span class="c1"># the enclosed file COPYING for license information (GPL). If you</span>
<span class="c1"># did not receive this file, see https://www.gnu.org/licenses/gpl-3.0.txt.</span>
<span class="c1"># --</span>

<span class="k">package</span> <span class="nn">Kernel::Output::HTML::ProcessManagement::ModuleConfiguration::Test</span><span class="p">;</span>

<span class="k">use</span> <span class="nn">strict</span><span class="p">;</span>
<span class="k">use</span> <span class="nn">warnings</span><span class="p">;</span>

<span class="k">use</span> <span class="nn">Kernel::System::VariableCheck</span> <span class="sx">qw(:all)</span><span class="p">;</span>
<span class="k">use</span> <span class="nn">Kernel::Language</span> <span class="sx">qw(Translatable)</span><span class="p">;</span>

<span class="k">our</span> <span class="nv">@ObjectDependencies</span> <span class="o">=</span> <span class="p">(</span>
    <span class="s">&#39;Kernel::Output::HTML::Layout&#39;</span><span class="p">,</span>
    <span class="s">&#39;Kernel::System::Web::Request&#39;</span><span class="p">,</span>
<span class="p">);</span>
</pre></div>
</div>
<p>This is common header that can be found in common OTRS modules. The class/package name is declared via the <code class="docutils literal notranslate"><span class="pre">package</span></code> keyword.</p>
<div class="highlight-Perl notranslate"><div class="highlight"><pre><span></span><span class="k">sub</span> <span class="nf">new</span> <span class="p">{</span>
    <span class="k">my</span> <span class="p">(</span> <span class="nv">$Type</span><span class="p">,</span> <span class="nv">%Param</span> <span class="p">)</span> <span class="o">=</span> <span class="nv">@_</span><span class="p">;</span>

    <span class="c1"># allocate new hash for object</span>
    <span class="k">my</span> <span class="nv">$Self</span> <span class="o">=</span> <span class="p">{</span><span class="nv">%Param</span><span class="p">};</span>
    <span class="nb">bless</span><span class="p">(</span> <span class="nv">$Self</span><span class="p">,</span> <span class="nv">$Type</span> <span class="p">);</span>

    <span class="k">return</span> <span class="nv">$Self</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The constructor <code class="docutils literal notranslate"><span class="pre">new</span></code> creates a new instance of the class.</p>
<p>Every configuration field requires to implement at least 2 main methods: <code class="docutils literal notranslate"><span class="pre">Render</span></code> and <code class="docutils literal notranslate"><span class="pre">GetParams</span></code>.</p>
<div class="highlight-Perl notranslate"><div class="highlight"><pre><span></span><span class="k">sub</span> <span class="nf">Render</span> <span class="p">{</span>
    <span class="k">my</span> <span class="p">(</span> <span class="nv">$Self</span><span class="p">,</span> <span class="nv">%Param</span> <span class="p">)</span> <span class="o">=</span> <span class="nv">@_</span><span class="p">;</span>

    <span class="k">my</span> <span class="nv">$ConfigSet</span> <span class="o">=</span> <span class="nv">$Param</span><span class="p">{</span><span class="n">ConfigSet</span><span class="p">}</span> <span class="sr">//</span> <span class="p">{};</span>
    <span class="k">my</span> <span class="nv">$EntityConfig</span> <span class="o">=</span> <span class="nv">$Param</span><span class="p">{</span><span class="n">EntityData</span><span class="p">}</span><span class="o">-&gt;</span><span class="p">{</span><span class="n">Config</span><span class="p">}</span><span class="o">-&gt;</span><span class="p">{</span><span class="n">Config</span><span class="p">}</span><span class="o">-&gt;</span><span class="p">{</span><span class="n">ConfigTest</span><span class="p">}</span> <span class="sr">//</span> <span class="p">{};</span>

    <span class="k">my</span> <span class="nv">%Data</span><span class="p">;</span>

    <span class="nv">$Data</span><span class="p">{</span><span class="n">Description</span><span class="p">}</span> <span class="o">=</span> <span class="nv">$ConfigSet</span><span class="o">-&gt;</span><span class="p">{</span><span class="n">Description</span><span class="p">}</span> <span class="o">||</span> <span class="s">&#39;Config Parameters (Test)&#39;</span><span class="p">;</span>
    <span class="nv">$Data</span><span class="p">{</span><span class="n">Name</span><span class="p">}</span> <span class="o">=</span> <span class="nv">$ConfigSet</span><span class="o">-&gt;</span><span class="p">{</span><span class="n">Config</span><span class="p">}</span><span class="o">-&gt;</span><span class="p">{</span><span class="n">Name</span><span class="p">}</span> <span class="sr">//</span> <span class="s">&#39;Test&#39;</span><span class="p">;</span>
    <span class="nv">$Data</span><span class="p">{</span><span class="n">Value</span><span class="p">}</span> <span class="o">=</span> <span class="nv">$EntityConfig</span><span class="o">-&gt;</span><span class="p">{</span> <span class="nv">$ConfigSet</span><span class="o">-&gt;</span><span class="p">{</span><span class="n">Config</span><span class="p">}</span><span class="o">-&gt;</span><span class="p">{</span><span class="n">Name</span><span class="p">}</span> <span class="p">}</span> <span class="sr">//</span> <span class="nv">$ConfigSet</span><span class="o">-&gt;</span><span class="p">{</span><span class="n">Defaults</span><span class="p">}</span><span class="o">-&gt;</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">-&gt;</span><span class="p">{</span><span class="n">Value</span><span class="p">}</span> <span class="sr">//</span> <span class="s">&#39;&#39;</span><span class="p">;</span>

    <span class="k">return</span> <span class="p">{</span>
        <span class="n">Success</span> <span class="o">=&gt;</span> <span class="mi">1</span><span class="p">,</span>
        <span class="n">HTML</span>    <span class="o">=&gt;</span> <span class="nv">$</span><span class="nn">Kernel::</span><span class="nv">OM</span><span class="o">-&gt;</span><span class="n">Get</span><span class="p">(</span><span class="s">&#39;Kernel::Output::HTML::Layout&#39;</span><span class="p">)</span><span class="o">-&gt;</span><span class="n">Output</span><span class="p">(</span>
            <span class="n">TemplateFile</span> <span class="o">=&gt;</span> <span class="s">&#39;ProcessManagement/ModuleConfiguration/Test&#39;</span><span class="p">,</span>
            <span class="n">Data</span>         <span class="o">=&gt;</span> <span class="o">\</span><span class="nv">%Data</span><span class="p">,</span>
        <span class="p">),</span>
    <span class="p">};</span>
<span class="p">}</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">Render</span></code> method is responsible to create the required HTML for the field.</p>
<p>In this example it first localize some parameters for more easy read and maintain.</p>
<p>The following lines set the data to display. The field widget title <code class="docutils literal notranslate"><span class="pre">Description</span></code> is gather from the <code class="docutils literal notranslate"><span class="pre">ConfigSet</span></code> if defined, otherwise it uses a default text. Similar to the field <code class="docutils literal notranslate"><span class="pre">Name</span></code>, for the <code class="docutils literal notranslate"><span class="pre">Value</span></code> it first checks if the activity or sequence flow action already have a stored value, if not it tries to use the default value from the <code class="docutils literal notranslate"><span class="pre">ConfigSet</span></code>, or use empty otherwise.</p>
<p>At the end it returns a structure with the HTML code from a template filled with the gathered data.</p>
<div class="highlight-Perl notranslate"><div class="highlight"><pre><span></span><span class="k">sub</span> <span class="nf">GetParams</span> <span class="p">{</span>
    <span class="k">my</span> <span class="p">(</span> <span class="nv">$Self</span><span class="p">,</span> <span class="nv">%Param</span> <span class="p">)</span> <span class="o">=</span> <span class="nv">@_</span><span class="p">;</span>

    <span class="k">my</span> <span class="nv">%GetParams</span><span class="p">;</span>
    <span class="k">my</span> <span class="nv">$Config</span> <span class="o">=</span> <span class="nv">$Param</span><span class="p">{</span><span class="n">ConfigSet</span><span class="p">}</span><span class="o">-&gt;</span><span class="p">{</span><span class="n">Config</span><span class="p">}</span> <span class="sr">//</span> <span class="s">&#39;Test&#39;</span><span class="p">;</span>

    <span class="nv">$GetParams</span><span class="p">{</span> <span class="nv">$Config</span><span class="o">-&gt;</span><span class="p">{</span><span class="n">Name</span><span class="p">}</span> <span class="p">}</span> <span class="o">=</span> <span class="nv">$</span><span class="nn">Kernel::</span><span class="nv">OM</span><span class="o">-&gt;</span><span class="n">Get</span><span class="p">(</span><span class="s">&#39;Kernel::System::Web::Request&#39;</span><span class="p">)</span><span class="o">-&gt;</span><span class="n">GetParam</span><span class="p">(</span> <span class="n">Param</span> <span class="o">=&gt;</span> <span class="nv">$Config</span><span class="o">-&gt;</span><span class="p">{</span><span class="n">Name</span><span class="p">}</span> <span class="p">);</span>

    <span class="k">return</span> <span class="o">\</span><span class="nv">%GetParams</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>For this example the <code class="docutils literal notranslate"><span class="pre">GetParams</span></code> method is very straight forward. It gets the name of the field from the <code class="docutils literal notranslate"><span class="pre">ConfigSet</span></code> or use a default, and gets the value from the web request.</p>
</div>
<div class="section" id="process-management-module-configuration-field-template-example">
<h4>Process Management Module Configuration Field Template Example<a class="headerlink" href="#process-management-module-configuration-field-template-example" title="Permalink to this headline">¶</a></h4>
<p>The following code implements a basic HTML template for the test process management module configuration field.</p>
<div class="highlight-Perl notranslate"><div class="highlight"><pre><span></span><span class="c1"># --</span>
<span class="c1"># Copyright (C) 2001-2020 OTRS AG, https://otrs.com/</span>
<span class="c1"># --</span>
<span class="c1"># This software comes with ABSOLUTELY NO WARRANTY. For details, see</span>
<span class="c1"># the enclosed file COPYING for license information (GPL). If you</span>
<span class="c1"># did not receive this file, see https://www.gnu.org/licenses/gpl-3.0.txt.</span>
<span class="c1"># --</span>
</pre></div>
</div>
<p>This is common header that can be found in common OTRS modules.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>&lt;div id=&quot;TestConfig&quot; class=&quot;WidgetSimple Expanded&quot;&gt;
    &lt;div class=&quot;Header&quot;&gt;
        &lt;div class=&quot;WidgetAction Toggle&quot;&gt;
            &lt;a href=&quot;#&quot; title=&quot;[% Translate(&quot;Show or hide the content&quot;) | html %]&quot;&gt;&lt;i class=&quot;fa fa-caret-right&quot;&gt;&lt;/i&gt;&lt;i class=&quot;fa fa-caret-down&quot;&gt;&lt;/i&gt;&lt;/a&gt;
        &lt;/div&gt;
        &lt;h2 for=&quot;Config&quot;&gt;[% Translate(Data.Description) | html %]&lt;/h2&gt;
    &lt;/div&gt;
    &lt;div class=&quot;Content&quot; id=&quot;TestParams&quot;&gt;
        &lt;fieldset class=&quot;TableLike&quot;&gt;
            &lt;label for=&quot;[% Data.Name | html %]&quot;&gt;[% Data.Name | html %]&lt;/label&gt;
            &lt;div class=&quot;Field&quot;&gt;
                &lt;input type=&quot;text&quot; value=&quot;[% Data.Value | html %]&quot; name=&quot;[% Data.Name | html %]&quot; id=&quot;[% Data.Name | html %]&quot; /&gt;
            &lt;/div&gt;
        &lt;/fieldset&gt;
    &lt;/div&gt;
&lt;/div&gt;
</pre></div>
</div>
<p>The template shows a simple text input element with its associated label.</p>
</div>
</div>
</div>
</div>


           </div>
           
          </div>
          

<script>
// Start Google Analytics Tracking
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');
ga('create', 'UA-28118796-2', 'auto');
ga('send', 'pageview');
// End Google Analytics Tracking
</script>

<footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../../how-to-publish-otrs-extensions.html" class="btn btn-neutral float-right" title="How to Publish Your OTRS Extensions" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="ticket-postmaster-modules.html" class="btn btn-neutral" title="Ticket Postmaster Module" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2001-2020 OTRS AG, https://otrs.com/

    </p>
  </div> 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../../" src="../../../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../../../_static/jquery.js"></script>
        <script type="text/javascript" src="../../../_static/underscore.js"></script>
        <script type="text/javascript" src="../../../_static/doctools.js"></script>
    

  

  <script type="text/javascript" src="../../../_static/js/theme.js"></script>

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>