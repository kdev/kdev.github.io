<html><head>
<!-- otrs.github.io -->
<link href="https://netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css" rel="stylesheet">
<link href="https://fonts.googleapis.com/css?family=Roboto" rel="stylesheet" type="text/css">
<link rel="stylesheet" href="../../../../../documentation.css">
<script src="https://code.jquery.com/jquery-1.11.0.min.js"></script>
<script type="text/javascript" src="../../../../../documentation.js"></script>
<link rel="icon" type="image/png" sizes="32x32" href="../../../../../../images/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="../../../../../../images/favicon-16x16.png">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.9.0/styles/default.min.css">
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.9.0/highlight.min.js"></script>
<script>
$(document).ready(function() {

    // Hint languages to prevent false matches (php for example).
    hljs.configure({
        languages: ['perl', 'javascript', 'xml', 'html', 'css', 'json', 'yaml']
    });

    // programlistings in manuals
    $('pre.programlisting').each(function(i, block) {
        hljs.highlightBlock(block);
    });
    // code snippets in Perl API docs
    $('.pod pre').addClass('perl').each(function(i, block) {
        hljs.highlightBlock(block);
    });
});</script>
<!-- otrs.github.io -->
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><title>Code Style Guide</title><meta name="generator" content="DocBook XSL Stylesheets V1.79.1"><link rel="home" href="index.html" title="OTRS 5 - Developer Manual"><link rel="up" href="contributing.html" title="Chapter 5. Contributing to OTRS"><link rel="prev" href="translating-docs.html" title="Translating the Documentation"><link rel="next" href="ui-design.html" title="User Interface Design"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">Code Style Guide</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="translating-docs.html">Prev</a> </td><th width="60%" align="center">Chapter 5. Contributing to OTRS</th><td width="20%" align="right"> <a accesskey="n" href="ui-design.html">Next</a></td></tr></table><hr></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="code-style-guide"></a>Code Style Guide</h2></div></div></div><div class="toc"><dl class="toc"><dt><span class="section"><a href="code-style-guide.html#code-style-guide-perl">Perl</a></span></dt><dd><dl><dt><span class="section"><a href="code-style-guide.html#formatting">Formatting</a></span></dt><dd><dl><dt><span class="section"><a href="code-style-guide.html#whitespace">Whitespace</a></span></dt><dt><span class="section"><a href="code-style-guide.html#line-length">Length of lines</a></span></dt><dt><span class="section"><a href="code-style-guide.html#parentheses">Spaces and parentheses</a></span></dt><dt><span class="section"><a href="code-style-guide.html#source-code-header">Source code header and charset</a></span></dt></dl></dd><dt><span class="section"><a href="code-style-guide.html#using-perl-language">Using the Perl language</a></span></dt><dd><dl><dt><span class="section"><a href="code-style-guide.html#control-flow">Control flow</a></span></dt><dt><span class="section"><a href="code-style-guide.html#builtin-sub-restrictions">Restrictions for the use of some Perl builtins</a></span></dt><dt><span class="section"><a href="code-style-guide.html#regular-expressions">Regular Expressions</a></span></dt><dt><span class="section"><a href="code-style-guide.html#naming">Naming</a></span></dt><dt><span class="section"><a href="code-style-guide.html#variables">Variables</a></span></dt><dt><span class="section"><a href="code-style-guide.html#subroutines">Subroutines</a></span></dt><dt><span class="section"><a href="code-style-guide.html#packages">Packages</a></span></dt></dl></dd><dt><span class="section"><a href="code-style-guide.html#documentation">Writing good documentation</a></span></dt><dd><dl><dt><span class="section"><a href="code-style-guide.html#perldoc">Perldoc</a></span></dt><dt><span class="section"><a href="code-style-guide.html#code-style-guide-perl-code-comments">Code Comments</a></span></dt></dl></dd><dt><span class="section"><a href="code-style-guide.html#database-interaction">Database interaction</a></span></dt><dd><dl><dt><span class="section"><a href="code-style-guide.html#database-sql-statements">Declaration of SQL statements</a></span></dt><dt><span class="section"><a href="code-style-guide.html#database-returning-on-errors">Returning on errors</a></span></dt><dt><span class="section"><a href="code-style-guide.html#database-using-limit">Using Limit</a></span></dt><dt><span class="section"><a href="code-style-guide.html#database-using-while-loop">Using the <code class="literal">while</code> loop</a></span></dt></dl></dd></dl></dd><dt><span class="section"><a href="code-style-guide.html#code-style-guide-javascript">JavaScript</a></span></dt><dd><dl><dt><span class="section"><a href="code-style-guide.html#id-1.6.6.4.2">Browser Handling</a></span></dt><dt><span class="section"><a href="code-style-guide.html#id-1.6.6.4.3">Directory Structure</a></span></dt><dd><dl><dt><span class="section"><a href="code-style-guide.html#id-1.6.6.4.3.4">Thirdparty Code</a></span></dt></dl></dd><dt><span class="section"><a href="code-style-guide.html#id-1.6.6.4.4">Variables</a></span></dt><dt><span class="section"><a href="code-style-guide.html#id-1.6.6.4.5">Functions</a></span></dt><dt><span class="section"><a href="code-style-guide.html#id-1.6.6.4.6">Namespaces</a></span></dt><dt><span class="section"><a href="code-style-guide.html#code-style-guide-javascript-code-comments">Code Comments</a></span></dt><dt><span class="section"><a href="code-style-guide.html#id-1.6.6.4.8">Event Handling</a></span></dt></dl></dd><dt><span class="section"><a href="code-style-guide.html#code-style-guide-css">CSS</a></span></dt><dd><dl><dt><span class="section"><a href="code-style-guide.html#id-1.6.6.5.3">Architecture</a></span></dt><dt><span class="section"><a href="code-style-guide.html#id-1.6.6.5.4">Style</a></span></dt></dl></dd></dl></div><p>
        In order to preserve the consistent development of the OTRS project, we have set
        up guidelines regarding style for the different programming languages.
    </p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="code-style-guide-perl"></a>Perl</h3></div></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="formatting"></a>Formatting</h4></div></div></div><div class="section"><div class="titlepage"><div><div><h5 class="title"><a name="whitespace"></a>Whitespace</h5></div></div></div><p>
                TAB: We use 4 spaces. Examples for braces:
            </p><p>
                </p><pre class="programlisting">
if ($Condition) {
    Foo();
}
else {
    Bar();
}

while ($Condition == 1) {
    Foo();
}
                
                </pre><p>
            </p></div><div class="section"><div class="titlepage"><div><div><h5 class="title"><a name="line-length"></a>Length of lines</h5></div></div></div><p>
                Lines should generally not be longer than 120 characters,
                unless it is necessary for special reasons.
            </p></div><div class="section"><div class="titlepage"><div><div><h5 class="title"><a name="parentheses"></a>Spaces and parentheses</h5></div></div></div><p>
                To gain more readability, we use spaces between keywords and opening parenthesis.
            </p><p>
                </p><pre class="programlisting">
if ()...
for ()...
                
                </pre><p>
            </p><p>
                If there is just one single variable, the parenthesis enclose the variable with no spaces inside.
            </p><p>
                </p><pre class="programlisting">
if ($Condition) { ... }

# instead of

if ( $Condition ) { ... }
                
                </pre><p>
            </p><p>
                If the condition is not just one single variable, we use spaces between the parenthesis and the condition.
                And there is still the space between the keyword (e.g. <code class="literal">if</code>) and the opening parenthesis.
            </p><p>
                </p><pre class="programlisting">
if ( $Condition &amp;&amp; $ABC ) { ... }
                
                </pre><p>
            </p><p>
                Note that for Perl builtin functions, we do not use parentheses:
            </p><p>
                </p><pre class="programlisting">
chomp $Variable;
                
                </pre><p>
            </p></div><div class="section"><div class="titlepage"><div><div><h5 class="title"><a name="source-code-header"></a>Source code header and charset</h5></div></div></div><p>
                Attach the following header to every source file.
                Source files are saved in UTF-8 charset.
            </p><p>
                </p><pre class="programlisting">
# --
# (file name) - a short description what it does
# Copyright (C) 2001-2020 OTRS AG, https://otrs.com/
# --
# This software comes with ABSOLUTELY NO WARRANTY. For details, see
# the enclosed file COPYING for license information (GPL). If you
# did not receive this file, see https://www.gnu.org/licenses/gpl-3.0.txt.
# --
                
                </pre><p>
            </p><p>
                Executable files (<code class="filename">*.pl</code>) have a special header.
            </p><p>
                </p><pre class="programlisting">
#!/usr/bin/perl
# --
# (file name) - a short description what it does
# Copyright (C) 2001-2020 OTRS AG, https://otrs.com/
# --
# This program is free software: you can redistribute it and/or modify
# it under the terms of the GNU General Public License as published by
# the Free Software Foundation, either version 3 of the License, or
# (at your option) any later version.
#
# This program is distributed in the hope that it will be useful,
# but WITHOUT ANY WARRANTY; without even the implied warranty of
# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
# GNU General Public License for more details.
#
# You should have received a copy of the GNU General Public License
# along with this program. If not, see https://www.gnu.org/licenses/gpl-3.0.txt.
# --
                
                </pre><p>
            </p></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="using-perl-language"></a>Using the Perl language</h4></div></div></div><div class="section"><div class="titlepage"><div><div><h5 class="title"><a name="control-flow"></a>Control flow</h5></div></div></div><div class="section"><div class="titlepage"><div><div><h6 class="title"><a name="conditions"></a>Conditions</h6></div></div></div><p>
                    Conditions can be quite complex and there can be "chained" conditions (linked with logical 'or' or 'and' operations).
                    When coding for OTRS, you have to be aware of several situations.
                </p><p>
                    Perl Best Practices says, that high precedence operators (<code class="literal">&amp;&amp;</code> and <code class="literal">||</code>) shouldn't mixed up with low precedence operators (<code class="literal">and</code> and <code class="literal">or</code>).
                    To avoid confusion, we always use the high precedence operators.
                </p><p>
                    </p><pre class="programlisting">
if ( $Condition1 &amp;&amp; $Condition2 ) { ... }

# instead of

if ( $Condition and $Condition2 ) { ... }
                    
                    </pre><p>
                </p><p>
                    This means that you have to be aware of traps. Sometimes you need to use parenthesis to make clear what you want.
                </p><p>
                    If you have long conditions (line is longer than 120 characters over all), you have to break it in several lines.
                    And the start of the conditions is in a new line (not in the line of the <code class="literal">if</code>).
                </p><p>
                    </p><pre class="programlisting">
if (
    $Condition1
    &amp;&amp; $Condition2
    )
{ ... }

# instead of

if ( $Condition1
    &amp;&amp; $Condition2
    )
{ ... }
                    
                    </pre><p>
                </p><p>
                    Also note, that the right parenthesis is in a line on its own and the left curly bracket
                    is also in a new line and with the same indentation as the <code class="literal">if</code>.
                    The operators are at the beginning of a new line! The subsequent examples show how to do it...
                </p><p>
                    </p><pre class="programlisting">
if (
    $XMLHash[0]-&gt;{otrs_stats}[1]{StatType}[1]{Content}
    &amp;&amp; $XMLHash[0]-&gt;{otrs_stats}[1]{StatType}[1]{Content} eq 'static'
    )
{ ... }

if ( $TemplateName eq 'AgentTicketCustomer' ) {
    ...
}

if (
    ( $Param{Section} eq 'Xaxis' || $Param{Section} eq 'All' )
    &amp;&amp; $StatData{StatType} eq 'dynamic'
    )
{ ... }

if (
    $Self-&gt;{TimeObject}-&gt;TimeStamp2SystemTime( String =&gt; $Cell-&gt;{TimeStop} )
    &gt; $Self-&gt;{TimeObject}-&gt;TimeStamp2SystemTime(
        String =&gt; $ValueSeries{$Row}{$TimeStop}
    )
    || $Self-&gt;{TimeObject}-&gt;TimeStamp2SystemTime( String =&gt; $Cell-&gt;{TimeStart} )
    &lt; $Self-&gt;{TimeObject}-&gt;TimeStamp2SystemTime(
        String =&gt; $ValueSeries{$Row}{$TimeStart}
    )
    )
{ ... }
                    
                    </pre><p>
                </p></div><div class="section"><div class="titlepage"><div><div><h6 class="title"><a name="postfix-if"></a>Postfix <code class="literal">if</code></h6></div></div></div><p>
                    Generally we use "postfix <code class="literal">if</code>" statements to reduce the number of levels.
                    But we don't use it for multiline statements and is only allowed when involves return statements in functions or to end a loop or to go next iteration.
                </p><p>
                    This is correct:
                </p><p>
                    </p><pre class="programlisting">
next ITEM if !$ItemId;
                    
                    </pre><p>
                </p><p>
                    This is wrong:
                </p><p>
                    </p><pre class="programlisting">
return $Self-&gt;{LogObject}-&gt;Log(
    Priority =&gt; 'error',
    Message  =&gt; 'ItemID needed!',
) if !$ItemId;
                    
                    </pre><p>
                </p><p>
                    This is less maintainable than this:
                </p><p>
                    </p><pre class="programlisting">
if( !$ItemId ) {
    $Self-&gt;{LogObject}-&gt;Log( ... );
    return;
}
                    
                    </pre><p>
                </p><p>
                    This is correct:
                </p><p>
                    </p><pre class="programlisting">
for my $Needed (1..10) {
    next if $Needed == 5;
    last  if $Needed == 9;
}
                    
                    </pre><p>
                </p><p>
                    This is wrong:
                </p><p>
                    </p><pre class="programlisting">
my $Var = 1 if $Something == 'Yes';
                    
                    </pre><p>
                </p></div></div><div class="section"><div class="titlepage"><div><div><h5 class="title"><a name="builtin-sub-restrictions"></a>Restrictions for the use of some Perl builtins</h5></div></div></div><p>
                Some builtin subroutines of Perl may not be used in every place:
            </p><p>
                </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>Don't use <code class="literal">die</code> and <code class="literal">exit</code> in <code class="filename">.pm</code> files.</p></li><li class="listitem"><p>Don't use the <code class="literal">Dumper</code> function in released files.</p></li><li class="listitem"><p>Don't use <code class="literal">print</code> in <code class="filename">.pm</code> files.</p></li><li class="listitem"><p>Don't use <code class="literal">require</code>, use <code class="literal">Main::Require()</code> instead.</p></li><li class="listitem"><p>Use the functions of the <code class="literal">TimeObject</code> instead of the builtin functions like <code class="literal">time()</code>, <code class="literal">localtime()</code>, etc.</p></li></ul></div><p>
            </p></div><div class="section"><div class="titlepage"><div><div><h5 class="title"><a name="regular-expressions"></a>Regular Expressions</h5></div></div></div><p>
                For regular expressions we always use the <code class="literal">m//</code> operator with curly braces as delimiters. We also use the modifiers <code class="literal">x</code>, <code class="literal">m</code> and <code class="literal">s</code>.
                The <code class="literal">x</code> modifiers allows you to comment your regex and use spaces to "group" logical groups.
            </p><p>
                </p><pre class="programlisting">
$Date =~ m{ \A \d{4} - \d{2} - \d{2} \z }xms
$Date =~ m{
    \A      # beginning of the string
    \d{4} - # year
    \d{2} - # month
    [^\n]   # everything but newline
    #..
}xms;
    
                </pre><p>
            </p><p>
                As the space no longer has a special meaning, you have to use a single character class to match a single space (<code class="literal">[ ]</code>).
                If you want to match any whitespace you can use <code class="literal">\s</code>.
            </p><p>
                In the regex, the dot (<code class="literal">.</code>) includes the newline (whereas in regex without <code class="literal">s</code> modifier the dot means 'everything but newline').
                If you want to match anything but newline, you have to use the negated single character class (<code class="literal">[^\n]</code>).
            </p><p>
            </p><pre class="programlisting">
$Text =~ m{
    Test
    [ ]    # there must be a space between 'Test' and 'Regex'
    Regex
}xms;
    </pre><p>
            </p></div><div class="section"><div class="titlepage"><div><div><h5 class="title"><a name="naming"></a>Naming</h5></div></div></div><p>
                Names and comments are written in English. Variables, objects and methods
                must be descriptive nouns or noun phrases with the first letter set upper case (<a class="ulink" href="https://en.wikipedia.org/wiki/CamelCase" target="_top">CamelCase</a>).
            </p><p>
                Names should be as descriptive as possible.
                A reader should be able to say what is meant by a name without digging too deep into the code. E.g. use <code class="literal">$ConfigItemID</code> instead of <code class="literal">$ID</code>. Examples: <code class="literal">@TicktIDs</code>, <code class="literal">$Output</code>, <code class="literal">StateSet()</code>, etc.
            </p></div><div class="section"><div class="titlepage"><div><div><h5 class="title"><a name="variables"></a>Variables</h5></div></div></div><div class="section"><div class="titlepage"><div><div><h6 class="title"><a name="variable-declaration"></a>Declaration</h6></div></div></div><p>
                    If you have several variables, you can declare them in one line if they "belong together":
                </p><p>
                    </p><pre class="programlisting">
my ($Minute, $Hour, $Year);

                    </pre><p>
                </p><p>
                    Otherwise break it into separate lines:
                </p><p>
                    </p><pre class="programlisting">

my $Minute;
my $ID;
                    
                    </pre><p>
                </p><p>
                    Do not set to <code class="literal">undef</code> or <code class="literal">''</code> in the declaration as this might hide mistakes in code.
                </p><p>
                    </p><pre class="programlisting">
my $Variable = undef;

# is the same as

my $Variable;
                    
                    </pre><p>
                </p><p>
                    You can set a variable to <code class="literal">''</code> if you want to concatenate strings:
                </p><p>
                    </p><pre class="programlisting">
my $SqlStatement = '';
for my $Part ( @Parts ) {
    $SqlStatement .= $Part;
}
                    
                    </pre><p>
                </p><p>
                    Otherwise you would get an "uninitialized" warning.
                </p></div></div><div class="section"><div class="titlepage"><div><div><h5 class="title"><a name="subroutines"></a>Subroutines</h5></div></div></div><div class="section"><div class="titlepage"><div><div><h6 class="title"><a name="subroutines-parameters"></a>Handling of parameters</h6></div></div></div><p>
                    To fetch the parameters passed to subroutines, OTRS normally uses the hash <code class="literal">%Param</code> (not <code class="literal">%Params</code>).
                    This leads to more readable code as every time we use <code class="literal">%Param</code> in the subroutine code we know it is the parameter hash passed to the subroutine.
                </p><p>
                    Just in some exceptions a regular list of parameters should be used.
                    So we want to avoid something like this:
                </p><p>
                    </p><pre class="programlisting">
sub TestSub {
    my ( $Self, $Param1, $Param2 ) = @_;
}
                    
                    </pre><p>
                </p><p>
                    We want to use this instead:
                </p><p>
                    </p><pre class="programlisting">
sub TestSub {
    my ( $Self, %Param ) = @_;
}
                    
                    </pre><p>
                </p><p>
                    This has several advantages: We do not have to change the code in the subroutine when a new parameter should be passed,
                    and calling a function with named parameters is much more readable.
                </p></div><div class="section"><div class="titlepage"><div><div><h6 class="title"><a name="multiple-named-parameters"></a>Multiple named parameters</h6></div></div></div><p>
                    If a function call requires more than one named parameter, split them into multiple lines:
                </p><p>
                    </p><pre class="programlisting">
    $Self-&gt;{LogObject}-&gt;Log(
        Priority =&gt; 'error',
        Message  =&gt; "Need $Needed!",
    );
                    </pre><p>
                </p><p>
                    Instead of:
                </p><p>
                    </p><pre class="programlisting">
    $Self-&gt;{LogObject}-&gt;Log( Priority =&gt; 'error', Message  =&gt; "Need $Needed!", );
                    </pre><p>
                </p></div><div class="section"><div class="titlepage"><div><div><h6 class="title"><a name="return-statements"></a><code class="literal">return</code> statements</h6></div></div></div><p>
                    Subroutines have to have a <code class="literal">return</code> statement.
                    The explicit <code class="literal">return</code> statement is preferred over the implicit way (result of last statement in subroutine) as this clarifies what the subroutine returns.
                </p><p>
                    </p><pre class="programlisting">
sub TestSub {
    ...
    return; # return undef, but not the result of the last statement
}
                    
                    </pre><p>
                </p></div><div class="section"><div class="titlepage"><div><div><h6 class="title"><a name="explicit-return-values"></a>Explicit return values</h6></div></div></div><p>
                    Explicit return values means that you should not have a <code class="literal">return</code> statement followed by a subroutine call.
                </p><p>
                    </p><pre class="programlisting">
return $Self-&gt;{DBObject}-&gt;Do( ... );
                    
                    </pre><p>
                </p><p>
                    The following example is better as this says explicitly what is returned. With the example above the reader doesn't know what the return value is as he might not know what <code class="literal">Do()</code> returns.
                </p><p>
                    </p><pre class="programlisting">
return if !$Self-&gt;{DBObject}-&gt;Do( ... );
return 1;
                    
                    </pre><p>
                </p><p>
                    If you assign the result of a subroutine to a variable, a "good" variable name indicates what was returned:
                </p><p>
                    </p><pre class="programlisting">
my $SuccessfulInsert = $Self-&gt;{DBObject}-&gt;Do( ... );
return $SuccessfulInsert;
                    
                    </pre><p>
                </p></div></div><div class="section"><div class="titlepage"><div><div><h5 class="title"><a name="packages"></a>Packages</h5></div></div></div><div class="section"><div class="titlepage"><div><div><h6 class="title"><a name="packages-use"></a><code class="literal">use</code> statements</h6></div></div></div><p>
                    <code class="literal">use strict</code> and <code class="literal">use warnings</code> have to be the first two "use"s in a module. This is correct:
                </p><p>
                    </p><pre class="programlisting">
package Kernel::System::ITSMConfigItem::History;

use strict;
use warnings;

use Kernel::System::User;
use Kernel::System::Time;
                    
                    </pre><p>
                </p><p>
                    This is wrong:
                </p><p>
                    </p><pre class="programlisting">
package Kernel::System::ITSMConfigItem::History;

use Kernel::System::User;
use Kernel::System::Time;

use strict;
use warnings;
                    
                    </pre><p>
                </p></div><div class="section"><div class="titlepage"><div><div><h6 class="title"><a name="objects-allocation"></a>Objects and their allocation</h6></div></div></div><p>
                    In OTRS many objects are available. But you should not use every object in every file
                    to keep the frontend/backend separation.
                </p><p>
                    </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>Don't use the <code class="literal">LayoutObject</code> in core modules (<code class="filename">Kernel/System</code>).</p></li><li class="listitem"><p>Don't use the <code class="literal">ParamObject</code> in core modules (<code class="filename">Kernel/System</code>).</p></li><li class="listitem"><p>Don't use the <code class="literal">DBObject</code> in frontend modules (<code class="filename">Kernel/Modules</code>).</p></li></ul></div><p>
                </p></div></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="documentation"></a>Writing good documentation</h4></div></div></div><div class="section"><div class="titlepage"><div><div><h5 class="title"><a name="perldoc"></a>Perldoc</h5></div></div></div><div class="section"><div class="titlepage"><div><div><h6 class="title"><a name="documenting-subroutines"></a>Documenting subroutines</h6></div></div></div><p>
                    Subroutines should always be documented. The documentation contains a general description about what the subroutine does, a sample subroutine call and what the subroutine returns. It should be in this order. A sample documentation looks like this:
                </p><p>
                    </p><pre class="programlisting">
=item LastTimeObjectChanged()

calculates the last time the object was changed. It returns a hash reference with
    information about the object and the time.

    my $Info = $Object-&gt;LastTimeObjectChanged(
        Param =&gt; 'Value',
    );

This returns something like:

    my $Info = {
        ConfigItemID    =&gt; 1234,
        HistoryType     =&gt; 'foo',
        LastTimeChanged =&gt; '08.10.2009',
    };

=cut
                    </pre><p>
                </p><p>
                    You can copy and paste a <code class="literal">Data::Dumper</code> output for the return values.
                </p></div></div><div class="section"><div class="titlepage"><div><div><h5 class="title"><a name="code-style-guide-perl-code-comments"></a>Code Comments</h5></div></div></div><p>
                In general, you should try to write your code as readable and self-explaining as possible.
                Don't write a comment to explain what obvious code does, this is unnecessary duplication.
                Good comments should explain <span class="emphasis"><em>why</em></span> there is some code, possible side
                effects and anything that might be special or unusually complicated about the code.
            </p><p>
                Please adhere to the following guidelines:
            </p><div class="variablelist"><dl class="variablelist"><dt><span class="term">Make the code so readable that comments are not needed, if possible.</span></dt><dd><p>
                            It's always preferable to write code so that it is very readable and self-explaining, for example with precise variable and function names.
                        </p></dd><dt><span class="term">Don't say what the code says (DRY).</span></dt><dd><p>
                            Don't repeat (obvious) code in the comments.
                        </p><pre class="programlisting">
# WRONG:

# get config object
my $ConfigObject = $Kernel::OM-&gt;Get('Kernel::Config');
                        </pre></dd><dt><span class="term">Document <span class="emphasis"><em>why</em></span> the code is there, not how it works.</span></dt><dd><p>
                            Usually, code comments should explain the <span class="emphasis"><em>purpose</em></span> of code, not how it works in detail. There might be exceptions for specially complicated code, but in this case also a refactoring to make it more readable could be commendable.
                        </p></dd><dt><span class="term">Document pitfalls.</span></dt><dd><p>
                            Everything that is unclear, tricky or that puzzled you during development should be documented.
                        </p></dd><dt><span class="term">Use full-line sentence-style comments to document algorithm paragraphs.</span></dt><dd><p>
                            Always use full sentences (uppercase first letter and final period). Subsequent lines of a sentence should be indented.
                        </p><pre class="programlisting">
# Check if object name is provided.
if ( !$_[1] ) {
    $_[0]-&gt;_DieWithError(
        Error =&gt; "Error: Missing parameter (object name)",
    );
}

# Record the object we are about to retrieve to potentially build better error messages.
# Needs to be a statement-modifying 'if', otherwise 'local' is local
#   to the scope of the 'if'-block.
local $CurrentObject = $_[1] if !$CurrentObject;
                        </pre></dd><dt><span class="term">Use short end-of-line comments to add detail information.</span></dt><dd><p>
                            These can either be a complete sentence (capital first letter and period) or just a phrase (lowercase first letter and no period).
                        </p><pre class="programlisting">
$BuildMode = oct $Param{Mode};   # *from* octal, not *to* octal

# or

$BuildMode = oct $Param{Mode};   # Convert *from* octal, not *to* octal.

                        </pre></dd></dl></div></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="database-interaction"></a>Database interaction</h4></div></div></div><div class="section"><div class="titlepage"><div><div><h5 class="title"><a name="database-sql-statements"></a>Declaration of SQL statements</h5></div></div></div><p>
                If there is no chance for changing the SQL statement, it should be used in the <code class="literal">Prepare</code> function.
                The reason for this is, that the SQL statement and the bind parameters are closer to each other.
            </p><p>
                The SQL statement should be written as one nicely indented string without concatenation like this:
            </p><p>
                </p><pre class="programlisting">
return if !$Self-&gt;{DBObject}-&gt;Prepare(
    SQL =&gt; '
        SELECT art.id
        FROM article art, article_sender_type ast
        WHERE art.ticket_id = ?
            AND art.article_sender_type_id = ast.id
            AND ast.name = ?
        ORDER BY art.id',
    Bind =&gt; [ \$Param{TicketID}, \$Param{SenderType} ],
);
                </pre><p>
            </p><p>
                This is easy to read and modify, and the whitespace can be handled well by our supported DBMSs.
                For auto-generated SQL code (like in <code class="literal">TicketSearch</code>), this indentation is not necessary.
            </p></div><div class="section"><div class="titlepage"><div><div><h5 class="title"><a name="database-returning-on-errors"></a>Returning on errors</h5></div></div></div><p>
                Whenever you use database functions you should handle errors. If anything goes wrong, return from subroutine:
            </p><p>
                </p><pre class="programlisting">
return if !$Self-&gt;{DBObject}-&gt;Prepare( ... );
                </pre><p>
            </p></div><div class="section"><div class="titlepage"><div><div><h5 class="title"><a name="database-using-limit"></a>Using Limit</h5></div></div></div><p>
                Use <code class="literal">Limit =&gt; 1</code> if you expect just one row to be returned.
            </p><p>
                </p><pre class="programlisting">
$Self-&gt;{DBObject}-&gt;Prepare(
    SQL   =&gt; 'SELECT id FROM users WHERE username = ?',
    Bind  =&gt; [ \$Username ],
    Limit =&gt; 1,
);
                </pre><p>
            </p></div><div class="section"><div class="titlepage"><div><div><h5 class="title"><a name="database-using-while-loop"></a>Using the <code class="literal">while</code> loop</h5></div></div></div><p>
                Always use the <code class="literal">while</code> loop, even when you expect one row to be returned,
                as some databases do not release the statement handle and this can lead to weird bugs.
            </p></div></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="code-style-guide-javascript"></a>JavaScript</h3></div></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="id-1.6.6.4.2"></a>Browser Handling</h4></div></div></div><p>
            All JavaScript is loaded in all browsers (no browser hacks in the template files).
            The code is responsible to decide if it has to skip or execute certain parts of itself only in certain browsers.
        </p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="id-1.6.6.4.3"></a>Directory Structure</h4></div></div></div><p>
            Directory structure inside the <code class="literal">js/</code> folder:
        </p><p>
            </p><pre class="programlisting">
* js
    * thirdparty              # thirdparty libs always have the version number inside the directory
        * ckeditor-3.0.1
        * jquery-1.3.2
    * Core.Agent.*            # stuff specific to the agent interface
    * Core.Customer.*         # customer interface
    * Core.*                  # common API
            </pre><p>
        </p><div class="section"><div class="titlepage"><div><div><h5 class="title"><a name="id-1.6.6.4.3.4"></a>Thirdparty Code</h5></div></div></div><p>
                Every thirdparty module gets its own subdirectory: "module name"-"version number" (e.g. ckeditor-3.0.1, jquery-1.3.2).
                Inside of that, file names should not have a version number or postfix included (wrong: <code class="literal">jquery/jquery-1.4.3.min.js</code>,
                right: <code class="literal">jquery-1.4.3/jquery.js</code>).
            </p></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="id-1.6.6.4.4"></a>Variables</h4></div></div></div><p>
            </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>Variable names should be CamelCase, just like in Perl.</p></li><li class="listitem"><p>Variables that hold a jQuery object should start with <code class="literal">$</code>, for example: <code class="literal">$Tooltip</code>.</p></li></ul></div><p>
        </p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="id-1.6.6.4.5"></a>Functions</h4></div></div></div><p>
            </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>Function names should be CamelCase, just like in Perl.</p></li></ul></div><p>
        </p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="id-1.6.6.4.6"></a>Namespaces</h4></div></div></div><p>
            </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>TODO...</p></li></ul></div><p>
        </p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="code-style-guide-javascript-code-comments"></a>Code Comments</h4></div></div></div><p>
            The <a class="link" href="code-style-guide.html#code-style-guide-perl-code-comments" title="Code Comments">commenting guidelines for Perl code</a> also apply to JavaScript.
        </p><p>
            </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>Single line comments are done with <code class="literal">//</code>.</p></li><li class="listitem"><p>Longer comments are done with <code class="literal">/* ... */</code>.</p></li><li class="listitem"><p>
                    If you comment out parts of your JavaScript code, only use <code class="literal">//</code>
                    because <code class="literal">/* ... */</code> can cause problems with Regular Expressions in the code.
                </p></li></ul></div><p>
        </p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="id-1.6.6.4.8"></a>Event Handling</h4></div></div></div><p>
            </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
                    Always use <code class="literal">$.bind()</code> instead of the event-shorthand methods of jQuery for better
                    readability (wrong: <code class="literal">$SomeObject.click(...)</code>, right: <code class="literal">$SomeObject.bind('click', ...</code>).
                </p></li><li class="listitem"><p>
                    Do not use <code class="literal">$.live()</code>!
                    We had severe performance issues with <code class="literal">$.live()</code> in correlation with mouse events.
                    Until it can be verified that <code class="literal">$.live()</code> works with other event types without problems.
                </p></li><li class="listitem"><p>
                    If you <code class="literal">$.bind()</code> events, make sure to <code class="literal">$.unbind()</code> them beforehand,
                    to make sure that events will not be bound twice, should the code be executed another time.
                </p></li></ul></div><p>
        </p></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="code-style-guide-css"></a>CSS</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
                Minimum resolution is 1024x768px.
            </p></li><li class="listitem"><p>
                The layout is liquid, which means that if the screen is wider, the space will be used.
            </p></li><li class="listitem"><p>
                Absolute size measurements should be specified in px to have a consistent look on many platforms and browsers.
            </p></li><li class="listitem"><p>
                Documentation is made with CSSDOC (see CSS files for examples). All logical blocks should have a CSSDOC comment.
            </p></li></ul></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="id-1.6.6.5.3"></a>Architecture</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
                    We follow the <a class="ulink" href="http://wiki.github.com/stubbornella/oocss/" target="_top">Object Oriented CSS</a> approach.
                    In essence, this means that the layout is achieved by combining different generic building blocks to realize a particular design.
                </p></li><li class="listitem"><p>
                    Wherever possible, module specific design should not be used.
                    Therefore we also do not work with IDs on the <code class="literal">body</code> element, for example, if it can be avoided.
                </p></li></ul></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="id-1.6.6.5.4"></a>Style</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
                    All definitions have a <code class="literal">{</code> in the same line as the selector, all rules are defined in one row per rule,
                    the definition ends with a row with a single <code class="literal">}</code> in it. See the following example:
                </p><p>
                    </p><pre class="programlisting">
#Selector {
    width: 10px;
    height: 20px;
    padding: 4px;
}
                    </pre><p>
                </p></li><li class="listitem"><p>
                    Between <code class="literal">:</code> and the rule value, there is a space.
                </p></li><li class="listitem"><p>
                    Every rule has an indent of 4 spaces.
                </p></li><li class="listitem"><p>
                    If multiple selectors are specified, separate them with comma and put each one on an own line:
                </p><p>
                    </p><pre class="programlisting">
#Selector1,
#Selector2,
#Selector3 {
    width: 10px;
}
                    </pre><p>
                </p></li><li class="listitem"><p>
                    If rules are combinable, combine them (e.g. combine <code class="literal">background-position</code>, <code class="literal">background-image</code>, ... into <code class="literal">background</code>).
                </p></li><li class="listitem"><p>
                    Rules should be in a logical order within a definition (all color specific rule together, all positioning rules together, ...).
                </p></li><li class="listitem"><p>
                    All IDs and Names are written in CamelCase notation:
                </p><p>
                    </p><pre class="programlisting">
&lt;div class="NavigationBar" id="AdminMenu"&gt;&lt;/div&gt;
                    </pre><p>
                </p></li></ul></div></div></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="translating-docs.html">Prev</a> </td><td width="20%" align="center"><a accesskey="u" href="contributing.html">Up</a></td><td width="40%" align="right"> <a accesskey="n" href="ui-design.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">Translating the Documentation </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> User Interface Design</td></tr></table></div></body></html>
