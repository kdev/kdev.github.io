<html><head>
<!-- otrs.github.io -->
<link href="https://netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css" rel="stylesheet">
<link href="https://fonts.googleapis.com/css?family=Roboto" rel="stylesheet" type="text/css">
<link rel="stylesheet" href="../../../../../documentation.css">
<script src="https://code.jquery.com/jquery-1.11.0.min.js"></script>
<script type="text/javascript" src="../../../../../documentation.js"></script>
<link rel="icon" type="image/png" sizes="32x32" href="../../../../../../images/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="../../../../../../images/favicon-16x16.png">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.9.0/styles/default.min.css">
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.9.0/highlight.min.js"></script>
<script>
$(document).ready(function() {

    // Hint languages to prevent false matches (php for example).
    hljs.configure({
        languages: ['perl', 'javascript', 'xml', 'html', 'css', 'json', 'yaml']
    });

    // programlistings in manuals
    $('pre.programlisting').each(function(i, block) {
        hljs.highlightBlock(block);
    });
    // code snippets in Perl API docs
    $('.pod pre').addClass('perl').each(function(i, block) {
        hljs.highlightBlock(block);
    });
});</script>
<!-- otrs.github.io -->
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><title>用法</title><meta name="generator" content="DocBook XSL Stylesheets V1.79.1"><link rel="home" href="index.html" title="OTRS 6 - 系统管理手册"><link rel="up" href="appointment-calendar.html" title="第 6 章 预约日历"><link rel="prev" href="appointment-calendar.html" title="第 6 章 预约日历"><link rel="next" href="performance-tuning.html" title="第 7 章 性能优化"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">用法</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="appointment-calendar.html">上一页</a> </td><th width="60%" align="center">第 6 章 预约日历</th><td width="20%" align="right"> <a accesskey="n" href="performance-tuning.html">下一页</a></td></tr></table><hr></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="appointment-calendar-usage"></a>用法</h2></div></div></div><div class="toc"><dl class="toc"><dt><span class="section"><a href="appointment-calendar-usage.html#appointment-calendar-management">日历管理</a></span></dt><dt><span class="section"><a href="appointment-calendar-usage.html#id-1.8.3.3">导出日历和/或预约</a></span></dt><dt><span class="section"><a href="appointment-calendar-usage.html#id-1.8.3.4">导入日历和/或预约</a></span></dt><dt><span class="section"><a href="appointment-calendar-usage.html#id-1.8.3.5">日历概览</a></span></dt><dt><span class="section"><a href="appointment-calendar-usage.html#id-1.8.3.6">日程概览</a></span></dt><dt><span class="section"><a href="appointment-calendar-usage.html#id-1.8.3.7">管理日历预约</a></span></dt><dt><span class="section"><a href="appointment-calendar-usage.html#id-1.8.3.8">重复预约</a></span></dt><dt><span class="section"><a href="appointment-calendar-usage.html#id-1.8.3.9">通知</a></span></dt><dt><span class="section"><a href="appointment-calendar-usage.html#id-1.8.3.10">基于事件的预约/日历通知</a></span></dt><dt><span class="section"><a href="appointment-calendar-usage.html#id-1.8.3.11">链接工单到预约</a></span></dt><dt><span class="section"><a href="appointment-calendar-usage.html#id-1.8.3.12">托管工单预约</a></span></dt><dt><span class="section"><a href="appointment-calendar-usage.html#id-1.8.3.13">即将到来的预约的仪表板小部件</a></span></dt></dl></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="appointment-calendar-management"></a>日历管理</h3></div></div></div><p>
            通过管理界面，可以添加和编辑日历。
        </p><p>
            </p><div class="figure"><a name="id-1.8.3.2.3.1"></a><p class="title"><b>图 6.1. 日历管理概览</b></p><div class="figure-contents"><div class="screenshot"><div><img src="screenshots/appointment-calendar/calendarmanage-overview.png" alt="日历管理概览"></div></div></div></div><p><br class="figure-break">
        </p><p>
            如果需要创建或编辑新的日历，则需要定义日历名称、颜色和日历所属的权限组。 服务人员需要使用相关权限才能正确访问日历。
        </p><p>
            </p><div class="figure"><a name="id-1.8.3.2.5.1"></a><p class="title"><b>图 6.2. 日历编辑屏幕</b></p><div class="figure-contents"><div class="screenshot"><div><img src="screenshots/appointment-calendar/calendarmanage-calendaredit.png" alt="日历编辑屏幕"></div></div></div></div><p><br class="figure-break">
        </p><p>
            可以使用内置的颜色选择器选择颜色，如下面的截图。 有三种方法可以选择颜色选择器。单击预选颜色后，会打开一个屏幕，并显示一组预先定义的颜色。
如果你的偏好颜色不可用，可以点击<span class="emphasis"><em>更多</em></span>按钮打开高级模式。
        </p><p>
            </p><div class="figure"><a name="id-1.8.3.2.7.1"></a><p class="title"><b>图 6.3. 日历编辑屏幕颜色选择器</b></p><div class="figure-contents"><div class="screenshot"><div><img src="screenshots/appointment-calendar/calendarmanage-calendaredit-colorpicker.png" alt="日历编辑屏幕颜色选择器"></div></div></div></div><p><br class="figure-break">
        </p><p>
            在该模式下，你可以通过使用颜色栏和颜色字段用鼠标选择某种颜色，也可以直接输入所需颜色的十六进制代码。
通过点击<span class="emphasis"><em>更少</em></span>按钮，可以将彩色选择器缩回到标准模式。在点击<span class="emphasis"><em>确认</em></span>按钮之后，在预览字段中选择并显示新颜色。
如果你在高级选项中选择了某种颜色，单击<span class="emphasis"><em>取消</em></span>按钮还是会再次选择先前的颜色（在预览字段中可见），但是这个功能只在尚未确认选择时起作用。
如果是这种情况（但你尚未保存日历），可以刷新屏即可再次看到当前的颜色设置。
        </p><p>
            对于日历的所选权限组，一个服务人员要想能够访问，至少需要相关组中的读取权限。下面列出了访问不同日历中某些功能级别的权限：
        </p><div class="variablelist"><dl class="variablelist"><dt><span class="term">RO（只读）</span></dt><dd><p>
                        相关的服务人员可以看到日历及其中的预约，但不能做任何更改。
                    </p></dd><dt><span class="term">MOVE_INTO（转移到）</span></dt><dd><p>
                        相关的服务人员可以更新现有预约，但不能创建新的预约或删除现有预约。
                    </p></dd><dt><span class="term">CREATE（创建）</span></dt><dd><p>
                        相关的服务人员可以创建新预约。
                    </p></dd><dt><span class="term">RW（读写）</span></dt><dd><p>
                        相关的服务人员可以删除预约。
                    </p></dd></dl></div><p>
            有效性表示日历是否有效。 无效日历即使服务人员有访问权限，也不会显示在各类概览视图中。
        </p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="id-1.8.3.3"></a>导出日历和/或预约</h3></div></div></div><p>
            创建不同的日历后，可以用众所周知的YAML格式导出完整的日历定义（包括日历预约），或仅将日历的相关预约导出为ICS格式。
        </p><p>
            要将完整的日历结构导出为YAML格式，可以使用日历管理屏幕中的日历列表。通过点击列<span class="emphasis"><em>导出</em></span>中的相关链接，可以下载名为<code class="filename">Export_Calendar_CalendarName.yml</code>的YAML结构，包括日历元数据（日历名称、颜色、权限组、有效性状态），该结构还包括所有日历预约。
此功能可用于简单地备份某个日历和/或将其传输到其它OTRS实例。
        </p><p>
            要仅导出ICS格式的日历预约，可以使用列<span class="emphasis"><em>下载</em></span>中的链接。
点击相关链接后，可以下载名为<code class="filename">CalendarName.ics</code>的ICS文件，包括了相关日历的所有预约。
这个文件可用于仅备份某个日历的预约和/或将其传输到其它OTRS实例上的现有日历或支持ICS标准的任何其他日历工具以显示这些预约。
        </p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="id-1.8.3.4"></a>导入日历和/或预约</h3></div></div></div><p>
            与导入功能相似，可以导入完整的YAML格式日历结构，包括相关预约，或导入ICS格式的现有日历的一些预约。
        </p><p>
            要导入完整的日历结构， 可以在日历管理屏幕的左侧边栏使用<span class="emphasis"><em>日历导入</em></span>小部件。
在此小部件中，可以选择并上传YML文件以导入日历。 复选框<span class="emphasis"><em>覆盖现有条目</em></span>
表示是否覆盖与导入的日历同名的当前日历。 如果存在相同名称的日历，但在上传时框未选中该复选，则会显示相关的错误消息。
        </p><p>
            要将一组预约导入现有日历，可以点击按钮<span class="emphasis"><em>导入预约</em></span>进入预约导入屏幕。
        </p><p>
            </p><div class="figure"><a name="id-1.8.3.4.5.1"></a><p class="title"><b>图 6.4. 日历管理概览视图中的导入预约</b></p><div class="figure-contents"><div class="screenshot"><div><img src="screenshots/appointment-calendar/calendarmanage-appointmentimport.png" alt="日历管理概览视图中的导入预约"></div></div></div></div><p><br class="figure-break">
        </p><p>
            这里需要选择要用于导入的ICS文件。 之后，需要从相关列表中选择一个日历以导入新的预约。复选框<span class="emphasis"><em>更新现有预约</em></span>
表示是否覆盖有相同UniqueID的现有预约。 具有相同UniqueID但已存在于相关日历中的预约在导入过程中不会被忽略。
如果没有启用覆盖预约的选项，它们将被再次插入，在不确定的情况下可以多次使用预约。
        </p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="id-1.8.3.5"></a>日历概览</h3></div></div></div><p>
            如果至少有一个已经创建的日历且某些服务人员可以访问，则可以通过日历概览和日程概览来管理新的或已经存在的预约。
        </p><p>
            在日历概览中，服务人员能够显示、创建、编辑和/或删除不同日历的预约，具体取决于其在相关日历上的权限级别，如上所述。
        </p><p>
            </p><div class="figure"><a name="id-1.8.3.5.4.1"></a><p class="title"><b>图 6.5. 日历概览屏幕</b></p><div class="figure-contents"><div class="screenshot"><div><img src="screenshots/appointment-calendar/calendaroverview.png" alt="日历概览屏幕"></div></div></div></div><p><br class="figure-break">
        </p><p>
            如以下截图中可见，日历概览包含左侧的日历和预约的管理工具以及右侧的日历视图。
使用<span class="emphasis"><em>操作</em></span>小部件中的按钮，可以直接访问日历管理或添加新的预约（如果该服务人员有权限）。
        </p><p>
            </p><div class="figure"><a name="id-1.8.3.5.6.1"></a><p class="title"><b>图 6.6. 日历概览屏幕中的侧边栏</b></p><div class="figure-contents"><div class="screenshot"><div><img src="screenshots/appointment-calendar/calendaroverview-sidebar.png" alt="日历概览屏幕中的侧边栏"></div></div></div></div><p><br class="figure-break">
        </p><p>
            <span class="emphasis"><em>日历</em></span>小部件 包含服务人员可访问的所有日历。 复选框用于启用或禁用某些日历的视图，就像在许多其它日历工具中一样。
        </p><p>
            由于每个服务人员的任何活动日历的所有预约将由服务器提供（而不是存储或缓存在客户端上），所以如果太多日历同时处于活动状态，则可能导致服务器负载过重。
因此，使用一个系统配置选项<code class="literal">AppointmentCalendar::CalendarLimitOverview</code>来
限制每个服务人员的最大活动日历数。 如果一个服务人员活动日历数达到限制，将显示相关的错误消息，指示活动日历太多。
        </p><p>
            URL列提供了用于订阅日历的外部链接。 此功能将在本文档后面介绍。
        </p><p>
            为了对不同的日历和预约的开始或结束相关日期进行很好的预约概览，我们提供多种视图模式供服务人员使用。
        </p><p>
            </p><div class="figure"><a name="id-1.8.3.5.11.1"></a><p class="title"><b>图 6.7. 日历概览屏幕中的视图模式</b></p><div class="figure-contents"><div class="screenshot"><div><img src="screenshots/appointment-calendar/calendaroverview-viewmodes.png" alt="日历概览屏幕中的视图模式"></div></div></div></div><p><br class="figure-break">
        </p><p>
            它们按不同时间范围的时间轴模式和非时间轴模式下分隔，以便对相关情况的不同预约能有最佳的视图。 在大多数视图模式下，红线表示当前当前的时间。
        </p><p>
            顶部栏中间的信息显示了当前视图中服务人员所在的当前时间范围。 在时间轴视图中，当前日历周将以浅灰色显示。 在非时间轴视图中，当前日历周在左侧显示为单列。
        </p><p>
            附上非时间轴周视图的屏幕截图：
        </p><p>
            </p><div class="figure"><a name="id-1.8.3.5.15.1"></a><p class="title"><b>图 6.8. 日历概览屏幕中的周视图</b></p><div class="figure-contents"><div class="screenshot"><div><img src="screenshots/appointment-calendar/calendaroverview-week.png" alt="日历概览屏幕中的周视图"></div></div></div></div><p><br class="figure-break">
        </p><p>
            非时间轴月视图：
        </p><p>
            </p><div class="figure"><a name="id-1.8.3.5.17.1"></a><p class="title"><b>图 6.9. 日历概览屏幕中的月视图</b></p><div class="figure-contents"><div class="screenshot"><div><img src="screenshots/appointment-calendar/calendaroverview-month.png" alt="日历概览屏幕中的月视图"></div></div></div></div><p><br class="figure-break">
        </p><p>
            在右上方，服务人员可以访问导航控件。
        </p><p>
            </p><div class="figure"><a name="id-1.8.3.5.19.1"></a><p class="title"><b>图 6.10. 日历概览屏幕中的导航控件</b></p><div class="figure-contents"><div class="screenshot"><div><img src="screenshots/appointment-calendar/calendaroverview-navigations.png" alt="日历概览屏幕中的导航控件"></div></div></div></div><p><br class="figure-break">
        </p><p>
            左右箭头按钮用于浏览当前时间范围前后的日期。 按钮<span class="emphasis"><em>今天</em></span>可使服务人员回到当前日期以节省时间。
        </p><p>
            按钮<span class="emphasis"><em>跳转</em></span> 用于直接访问某个日期，而无需在每个日期周期之间逐一切换（可能是一年之前或之后）。
点击按钮打开一个日期选择器，它会突出显示已存储了预约的所有日期。 鼠标悬停显示与当前日期的预约数。
点击一个日期可使服务人员进入相关的时间范围并显示其中的所有预约。
        </p><p>
             </p><div class="figure"><a name="id-1.8.3.5.22.1"></a><p class="title"><b>图 6.11. 日历概览屏幕中的“今天”和“跳转”按钮</b></p><div class="figure-contents"><div class="screenshot"><div><img src="screenshots/appointment-calendar/calendaroverview-navigations-jump.png" alt="日历概览屏幕中的“今天”和“跳转”按钮"></div></div></div></div><p><br class="figure-break">
        </p><p>
            在主要小部件的右侧（导航按钮上方）悬停鼠标会出现一个齿轮，用于访问可见性过滤器：
        </p><p>
            </p><div class="figure"><a name="id-1.8.3.5.24.1"></a><p class="title"><b>图 6.12. 日历概览屏幕中的用户偏好设置</b></p><div class="figure-contents"><div class="screenshot"><div><img src="screenshots/appointment-calendar/calendaroverview-preferences.png" alt="日历概览屏幕中的用户偏好设置"></div></div></div></div><p><br class="figure-break">
        </p><p>
            在这里可以选择是查看所有可用的预约，还是只查看直接分配给你的预约。
        </p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="id-1.8.3.6"></a>日程概览</h3></div></div></div><p>
            在日程概览中，服务人员能够以类似表格的概览显示所有可用（可访问的）日历的预约。 此概述旨在详细介绍结构化表中即将到来的预约。
像在日历概览中一样，可以创建、编辑或删除预约。 这个视图支持每月、每周和每天视角的可用预约。
        </p><p>
            </p><div class="figure"><a name="id-1.8.3.6.3.1"></a><p class="title"><b>图 6.13. 日程概览屏幕</b></p><div class="figure-contents"><div class="screenshot"><div><img src="screenshots/appointment-calendar/agendaoverview.png" alt="日程概览屏幕"></div></div></div></div><p><br class="figure-break">
        </p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="id-1.8.3.7"></a>管理日历预约</h3></div></div></div><p>
            在日历概览中，要添加新预约，可以点击左侧的<span class="emphasis"><em>添加预约</em></span>按钮，也可以点击概览小部件。还可以拖拉出小部件中的一个范围来设置大致的时间跨度，在此之后，会出现一个模态对话框，在这里可以插入数据：
        </p><p>
            </p><div class="figure"><a name="id-1.8.3.7.3.1"></a><p class="title"><b>图 6.14. 预约编辑屏幕</b></p><div class="figure-contents"><div class="screenshot"><div><img src="screenshots/appointment-calendar/calendaroverview-appointmentedit.png" alt="预约编辑屏幕"></div></div></div></div><p><br class="figure-break">
        </p><p>
            基本信息的必填字段是预约标题和预约分配到的相关日历。描述和位置是可选字段。
如果位置包含有值，将在该字段旁边显示相关链接图标，默认情况下会链接到Google地图，以便更好地了解该位置。
此链接可通过系统配置选项<code class="literal">AgentAppointmentEdit::Location::Link</code>进行配置。
        </p><p>
            在<span class="emphasis"><em>日期/时间部分</em></span>中，需要选择相关的开始日期和结束日期。
        </p><p>
            <span class="emphasis"><em>全天</em></span> 复选框表示预约占用整天。 如果激活，开始日期和结束日期的时间将被禁用，并设置为00:00。
        </p><p>
            <span class="emphasis"><em>重复</em></span>选项用于定义重复预约，将单独描述，请参见下面的<span class="emphasis"><em>重复预约</em></span>部分。 。
        </p><p>
            <span class="emphasis"><em>通知</em></span>选项用于定义预约通知，将单独描述，请参见下面的<span class="emphasis"><em>通知</em></span>部分 。
        </p><p>
            <span class="emphasis"><em>链接</em></span>选项用于定义到外部对象的预约链接（如工单），将单独描述，请参见下面的<span class="emphasis"><em>链接工单到预约</em></span>部分。
        </p><p>
            如果预约已经存在，在模态对话框的底部会出现<span class="emphasis"><em>复制</em></span> 和<span class="emphasis"><em>删除</em></span>
按钮，前提是当前服务人员具有相关权限。
<span class="emphasis"><em>复制</em></span>按钮将忽略对话框中的更改，并在同一时间范围内创建具有相同信息的当前预约的副本。
<span class="emphasis"><em>删除</em></span> 按钮将删除相关的预约，但出于安全考虑，服务人员将面临一个问题，是否确定要删除预约。
        </p><p>
            一旦保存了预约，它将出现在概览页面中：
        </p><p>
            </p><div class="figure"><a name="id-1.8.3.7.12.1"></a><p class="title"><b>图 6.15. 日历概览屏幕中显示的预约</b></p><div class="figure-contents"><div class="screenshot"><div><img src="screenshots/appointment-calendar/calendaroverview-appointmentadded.png" alt="日历概览屏幕中显示的预约"></div></div></div></div><p><br class="figure-break">
        </p><p>
            通过点击预约，会再次打开模态对话框，可以编辑预约。
如果服务人员具有正确的权限，也可以通过拖放来编辑预约，以将完整的预约移动到另一个位置（日期/时间），或者通过拖动在左侧或右侧的相关手柄增加/减少预约的开始和/或结束时间。
        </p><p>
            如果鼠标的光标悬停在某个预约上，则会显示相关预约信息的提示框：
        </p><p>
            </p><div class="figure"><a name="id-1.8.3.7.15.1"></a><p class="title"><b>图 6.16. 预约提示框</b></p><div class="figure-contents"><div class="screenshot"><div><img src="screenshots/appointment-calendar/calendaroverview-appointmentmouseover.png" alt="预约提示框"></div></div></div></div><p><br class="figure-break">
        </p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="id-1.8.3.8"></a>重复预约</h3></div></div></div><p>
            如果需要以反复方式创建预约，则可以设置关于预约发生的详细信息。
        </p><p>
            为了使其工作，可以使用预定义的发生频率，或定义自定义设置：
        </p><p>
            </p><div class="figure"><a name="id-1.8.3.8.4.1"></a><p class="title"><b>图 6.17. 重复预约的编辑屏幕</b></p><div class="figure-contents"><div class="screenshot"><div><img src="screenshots/appointment-calendar/calendaroverview-appointmenteditrecurrence.png" alt="重复预约的编辑屏幕"></div></div></div></div><p><br class="figure-break">
        </p><p>
            选择完成后，需要定义重复的运行时间。 可以选择重复的结束日期，或者要重复的次数。
        </p><p>
            做出所有决定并且成功保存设置后，该预约将被标记为重复预约。父项预约将标记为圆形箭头符号，子项预约则标记为链条符号。
        </p><p>
            </p><div class="figure"><a name="id-1.8.3.8.7.1"></a><p class="title"><b>图 6.18. 日历概览屏幕中的重复预约</b></p><div class="figure-contents"><div class="screenshot"><div><img src="screenshots/appointment-calendar/calendaroverview-appointmenteditrecurrenceadded.png" alt="日历概览屏幕中的重复预约"></div></div></div></div><p><br class="figure-break">
        </p><p>
            未来对父预约的更改都会自动影响到子预约，而不会有任何消息。 如果服务人员要更改其中一个子预约，则会显示一条消息询问想要如何更新预约：
        </p><p>
            </p><div class="figure"><a name="id-1.8.3.8.9.1"></a><p class="title"><b>图 6.19. 重复预约的子预约编辑屏幕</b></p><div class="figure-contents"><div class="screenshot"><div><img src="screenshots/appointment-calendar/calendaroverview-appointmenteditrecurrencereedit.png" alt="重复预约的子预约编辑屏幕"></div></div></div></div><p><br class="figure-break">
        </p><p>
            如果更新影响所有预约，行为将与更新父预约相同。 所有选项（包括重复设置）都是可更改的。
        </p><p>
            如果只是当前预约（子预约）受影响，则无法更改重复设置，但会提供相关消息和一个指向父预约的链接：
        </p><p>
            </p><div class="figure"><a name="id-1.8.3.8.12.1"></a><p class="title"><b>图 6.20. 子预约的重复设置</b></p><div class="figure-contents"><div class="screenshot"><div><img src="screenshots/appointment-calendar/calendaroverview-appointmenteditrecurrencereeditsingle.png" alt="子预约的重复设置"></div></div></div></div><p><br class="figure-break">
        </p><p>
            启用的重复选项将另外显示在相关预约的提示框中。
        </p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="id-1.8.3.9"></a>通知</h3></div></div></div><p>
            在预约的编辑屏幕内，可以设置一个通知预约的日期。 如在重复预约的设置中，可以使用预定义的模板进行通知（如5分钟之前、15分钟之前等）或设置自定义时间点：
        </p><p>
            </p><div class="figure"><a name="id-1.8.3.9.3.1"></a><p class="title"><b>图 6.21. 重复预约编辑屏幕的通知设置</b></p><div class="figure-contents"><div class="screenshot"><div><img src="screenshots/appointment-calendar/calendaroverview-appointmenteditnotification.png" alt="重复预约编辑屏幕的通知设置"></div></div></div></div><p><br class="figure-break">
        </p><p>
            通知的自定义设置被分为相对时间点（如预约开始后5分钟、预约结束前2小时等）和明确的日期时间值（可以使用日期选择器选择）。
相关部分需要通过单选按钮启用，因此禁用部分将被忽略。
        </p><p>
            如果预约有活动的通知设置，通知的日期/时间字符串将显示在提示框中。 除此之外，预约将标有一个铃铛符号（无需鼠标悬停操作），表示预约有一个活动的通知。
        </p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="id-1.8.3.10"></a>基于事件的预约/日历通知</h3></div></div></div><p>
            如同众所周知的工单通知，这个软件包提供了一个可以使用管理界面处理的基于事件的通知机制。
在该界面中，可以创建、更新和/或删除通知事件条目，以响应具有相关过滤器、收件人和内容模板的各种OTRS事件。
        </p><p>
            在安装这个软件包时，将安装一个<span class="emphasis"><em>预约提醒通知</em></span>的默认条目。
        </p><p>
            可以使用管理菜单访问通知模板的管理前端：
        </p><p>
            </p><div class="figure"><a name="id-1.8.3.10.5.1"></a><p class="title"><b>图 6.22. 日历/预约通知管理链接</b></p><div class="figure-contents"><div class="screenshot"><div><img src="screenshots/appointment-calendar/admininterfacelink.png" alt="日历/预约通知管理链接"></div></div></div></div><p><br class="figure-break">
        </p><p>
            在通知概览中，可以显示所有可用的通知模板。 在该概览中，可以创建、编辑、导入/导出这些模板，当然也可以删除。
        </p><p>
            </p><div class="figure"><a name="id-1.8.3.10.7.1"></a><p class="title"><b>图 6.23. 日历/预约通知管理概览</b></p><div class="figure-contents"><div class="screenshot"><div><img src="screenshots/appointment-calendar/adminappointmentnotificationoverview.png" alt="日历/预约通知管理概览"></div></div></div></div><p><br class="figure-break">
        </p><p>
            从左侧栏可以创建、导出或导入通知条目。 可以导出完整的可用条目集，或者可以使用已导出的文件来导入通知条目。
        </p><p>
            </p><div class="figure"><a name="id-1.8.3.10.9.1"></a><p class="title"><b>图 6.24. 日历/通知概览屏幕的侧边栏</b></p><div class="figure-contents"><div class="screenshot"><div><img src="screenshots/appointment-calendar/adminappointmentnotificationsidebar.png" alt="日历/通知概览屏幕的侧边栏"></div></div></div></div><p><br class="figure-break">
        </p><p>
            右侧的主表将显示可用的预约通知。 对于每一行，可以通过单击名称列来编辑条目，单击导出图标来导出条目，单击复制图标来复制条目或删除图标来删除条目。
所有图标仅与单个条目相关（不像侧边栏中的导出通知按钮）。
        </p><p>
            </p><div class="figure"><a name="id-1.8.3.10.11.1"></a><p class="title"><b>图 6.25. 日历/预约通知概览中的表格</b></p><div class="figure-contents"><div class="screenshot"><div><img src="screenshots/appointment-calendar/adminappointmentnotificationtable.png" alt="日历/预约通知概览中的表格"></div></div></div></div><p><br class="figure-break">
        </p><p>
            为了创建新的或更新现有条目，与工单通知一样，可以使用编辑屏幕。
在该屏幕中，需要定义一些基本参数，如名称（OTRS系统中通知名称必须是唯一的，它甚至不能与工单通知中的名称冲突）。
        </p><p>
            每个通知条目都可以作为服务人员偏好设置中的选项进行选择。 （可选）可以插入用户偏好设置中相关通知条目的提示框消息，当鼠标悬停时会显示给用户。
        </p><p>
            如果需要，可以添加对条目的注释，将会显示在管理界面的概览屏幕中。 最后但并非最不重要的是，可以选择有效状态（默认为有效）。
        </p><p>
            为使模板能响应OTRS事件，需要在<span class="emphasis"><em>事件</em></span>小部件中的列表中选择至少一个可用事件。
        </p><p>
            </p><div class="figure"><a name="id-1.8.3.10.16.1"></a><p class="title"><b>图 6.26. 预约/日历通知的事件定义</b></p><div class="figure-contents"><div class="screenshot"><div><img src="screenshots/appointment-calendar/adminappointmentnotificationevents.png" alt="预约/日历通知的事件定义"></div></div></div></div><p><br class="figure-break">
        </p><p>
            下面是带描述的可用事件列表：
        </p><div class="variablelist"><dl class="variablelist"><dt><span class="term">AppointmentCreate（创建预约）</span></dt><dd><p>
                        在创建预约后执行。
                    </p></dd><dt><span class="term">AppointmentUpdate（更新预约）</span></dt><dd><p>
                        在更新预约后执行。
                    </p></dd><dt><span class="term">AppointmentDelete（删除预约）</span></dt><dd><p>
                        在删除预约后执行。
                    </p></dd><dt><span class="term">AppointmentNotification（预约通知）</span></dt><dd><p>
                        这是一个特殊的预约事件，将由OTRS守护进程立即执行。
如果预约包含通知的一个日期/时间值（如本文档中已经描述的），并且达到了一个这样的通知日期，OTRS守护进程将对每个相关预约分别执行<code class="literal">预约通知</code>事件
。
                    </p></dd><dt><span class="term">CalendarCreate（创建日历）</span></dt><dd><p>
                        在创建日历后执行。
                    </p></dd><dt><span class="term">CalendarUpdate（更新日历）</span></dt><dd><p>
                        在更新日历后执行。
                    </p></dd></dl></div><p>
            （可选）预约过滤器小部件可以用于通过匹配配置的值来缩小预约列表：
        </p><p>
            </p><div class="figure"><a name="id-1.8.3.10.20.1"></a><p class="title"><b>图 6.27. 日历/预约通知的过滤器设置</b></p><div class="figure-contents"><div class="screenshot"><div><img src="screenshots/appointment-calendar/adminappointmentnotificationfilter.png" alt="日历/预约通知的过滤器设置"></div></div></div></div><p><br class="figure-break">
        </p><p>
            例如，可以在这里选择相关预约所属的日历，或部分/完整标题，或预约的位置。 此外，还可以从分配给预约的团队或资源列表中进行选择（仅适用于<span class="bold"><strong>OTRS商业解决方案</strong></span>）。
        </p><p>
            在<span class="emphasis"><em>收件人</em></span> 小部件中，可以选择将要接收生成的通知的相关收件人。
        </p><p>
            </p><div class="figure"><a name="id-1.8.3.10.23.1"></a><p class="title"><b>图 6.28. 日历/预约通知的收件人设置</b></p><div class="figure-contents"><div class="screenshot"><div><img src="screenshots/appointment-calendar/adminappointmentnotificationrecipients.png" alt="日历/预约通知的收件人设置"></div></div></div></div><p><br class="figure-break">
        </p><p>
            所有与资源相关的列表条目仅适用于<span class="bold"><strong>OTRS商业解决方案</strong></span>。
        </p><p>
            在<span class="emphasis"><em>通知方法</em></span>小部件中，可以选择可用的传输方式（<span class="emphasis"><em>电子邮件</em></span>、<span class="emphasis"><em>短信</em></span>或<span class="emphasis"><em>Web视图</em></span>）以及额外的收件人和电子邮件模板。
        </p><p>
            </p><div class="figure"><a name="id-1.8.3.10.26.1"></a><p class="title"><b>图 6.29. 日历/预约通知的通知方法</b></p><div class="figure-contents"><div class="screenshot"><div><img src="screenshots/appointment-calendar/adminappointmentnotificationnotificationmethods.png" alt="日历/预约通知的通知方法"></div></div></div></div><p><br class="figure-break">
        </p><p>
            通知的主要内容可以在本地化的主题和正文字段中定义。如果需要， 可以在这里混合使用静态文本内容与OTRS智能标签。
默认通知条目显示了正文和主题的外观样式。
        </p><p>
            </p><div class="figure"><a name="id-1.8.3.10.28.1"></a><p class="title"><b>图 6.30. 日历/预约通知的通知正文</b></p><div class="figure-contents"><div class="screenshot"><div><img src="screenshots/appointment-calendar/adminappointmentnotificationbody.png" alt="日历/预约通知的通知正文"></div></div></div></div><p><br class="figure-break">
        </p><p>
            页面底部的<span class="emphasis"><em>标签参考</em></span>小部件中提供了可用的智能标签的完整列表。
        </p><p>
            对于启用了<span class="emphasis"><em>在服务人员偏好设置里显示</em></span>选项的每个添加的通知条目，每个相关服务人员的用户偏好设置小部件中将显示一个新选项。
使用这些选项，每个服务人员可以选择他想要接收哪些类型的通知和通过哪些可用的方法传输的通知。
        </p><p>
            </p><div class="figure"><a name="id-1.8.3.10.31.1"></a><p class="title"><b>图 6.31. 
                    显示在服务人员偏好设置中日历/预约通知选项
                </b></p><div class="figure-contents"><div class="screenshot"><div><img src="screenshots/appointment-calendar/appointmentnotificationuserpreferences.png" alt="显示在服务人员偏好设置中日历/预约通知选项"></div></div></div></div><p><br class="figure-break">
        </p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="id-1.8.3.11"></a>链接工单到预约</h3></div></div></div><p>
            预约日历附带一个抽象层，使用OTRS内部链接对象将外部对象与预约联系起来。这些额外的对象可以提供外部软件包，无需直接更新日历的代码。
        </p><p>
            基本上，在预约的编辑屏幕内，可以链接现有的工单。 通过自动完成字段可以按工单编号和/或工单标题搜索工单。
服务人员点击一个搜索结果后，相关工单就会保存在结果框中，并在保存预约之后，将该工单链接到预约。
        </p><p>
            </p><div class="figure"><a name="id-1.8.3.11.4.1"></a><p class="title"><b>图 6.32. 预约编辑屏蔽的工单链接选项</b></p><div class="figure-contents"><div class="screenshot"><div><img src="screenshots/appointment-calendar/calendaroverview-linktickets.png" alt="预约编辑屏蔽的工单链接选项"></div></div></div></div><p><br class="figure-break">
        </p><p>
            此外，可以将多个工单链接到一个预约。 由于使用普通的OTRS链接对象来创建这两个对象之间的链接，因此该链接也将显示在工单详情屏幕中。
        </p><p>
            </p><div class="figure"><a name="id-1.8.3.11.6.1"></a><p class="title"><b>图 6.33. 工单详情屏幕中已链接的预约表格</b></p><div class="figure-contents"><div class="screenshot"><div><img src="screenshots/appointment-calendar/ticketzoom-linkedappointment.png" alt="工单详情屏幕中已链接的预约表格"></div></div></div></div><p><br class="figure-break">
        </p><p>
            这些链接可以通过预约概览屏幕相关编辑对话框中的现有预约创建，也可以通过工单详情屏幕的链接功能创建。
        </p><p>
            </p><div class="figure"><a name="id-1.8.3.11.8.1"></a><p class="title"><b>图 6.34. 从工单详情屏幕链接预约</b></p><div class="figure-contents"><div class="screenshot"><div><img src="screenshots/appointment-calendar/ticketzoom-appointmentlinking.png" alt="从工单详情屏幕链接预约"></div></div></div></div><p><br class="figure-break">
        </p><p>
            通过工单详情屏幕，还可以创建一个新的预约，将相关工单自动链接到新创建的预约。
在工单操作菜单<span class="emphasis"><em>杂项</em></span>中有一个新的选项<span class="emphasis"><em>新建预约</em></span> 。
        </p><p>
            </p><div class="figure"><a name="id-1.8.3.11.10.1"></a><p class="title"><b>图 6.35. 工单详情屏幕新建预约链接</b></p><div class="figure-contents"><div class="screenshot"><div><img src="screenshots/appointment-calendar/ticketzoom-newappointment.png" alt="工单详情屏幕新建预约链接"></div></div></div></div><p><br class="figure-break">
        </p><p>
            点击链接后，服务人员将转到日历概览，并自动打开一个新建预约对话框，该对话框已预先链接到相关工单，可以像平常一样填写。
        </p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="id-1.8.3.12"></a>托管工单预约</h3></div></div></div><p>
            为了一步返回日历管理，该软件包提供了在日历编辑屏幕中使用特殊的工单搜索规则自动在日历中创建和更新预约的可能性。
        </p><p>
            工单可以具有特殊的日期/时间条目，如挂起时间、升级时间（首次响应时间、更新时间等）或已分配的日期/时间类型动态字段。
在逻辑上，日历能够显示这些日期/时间条目，但是由于日历预约需要具有由开始时间和结束时间组成的时间段，而挂起时间之类的时间仅指向一个日期/时间值，因此需要为托管预约定义相关的结束时间。
        </p><p>
            在日历编辑屏幕中基本日历配置的下方，一个叫做<span class="emphasis"><em>工单预约</em></span>的特殊小部件定义用于自动创建预约的规则。
        </p><p>
            </p><div class="figure"><a name="id-1.8.3.12.5.1"></a><p class="title"><b>图 6.36. 日历编辑屏幕中的工单预约配置</b></p><div class="figure-contents"><div class="screenshot"><div><img src="screenshots/appointment-calendar/calendarmanage-calendaredit-ticketappointments.png" alt="日历编辑屏幕中的工单预约配置"></div></div></div></div><p><br class="figure-break">
        </p><p>
            有必要定义规则以描述一个工单搜索，搜索结果用于在相关日历中自动创建和管理预约。 可以使用不同的参数来定义多个规则，以便在同一个日历中组合多种类型的工单。
        </p><p>
            一个用于生成正确的工单搜索的规则由以下参数组成：
        </p><div class="variablelist"><dl class="variablelist"><dt><span class="term">开始时间</span></dt><dd><p>
                        一个下拉列表，表示相关工单的特殊日期/时间值。 这可以是挂起时间、不同的升级时间或已分配给工单的日期/时间类型的动态字段。
                    </p></dd><dt><span class="term">结束日期</span></dt><dd><p>
                        这可以是从所选开始时间（如+5分钟、+1小时等）计算的相对时间值，或日期/时间类型的动态字段指向的一个绝对日期和时间值。
                    </p></dd><dt><span class="term">队列</span></dt><dd><p>
                        一个可多选的下拉列表，指示相关工单所在的队列。此字段是必填字段，不能留空。
                    </p></dd><dt><span class="term">搜索属性</span></dt><dd><p>
                        这是附加（可选）搜索属性的列表，为服务人员提供更多的详细过滤条件，就像服务人员界面工单搜索中的搜索属性。 可以选择单个属性，添加到表单中并填入过滤器值。
                    </p></dd></dl></div><p>
            此类规则的配置概览如下图所示：
        </p><p>
            </p><div class="figure"><a name="id-1.8.3.12.10.1"></a><p class="title"><b>图 6.37. 日历编辑屏幕中的工单预约规则</b></p><div class="figure-contents"><div class="screenshot"><div><img src="screenshots/appointment-calendar/calendarmanage-calendaredit-ticketappointmentsoverview.png" alt="日历编辑屏幕中的工单预约规则"></div></div></div></div><p><br class="figure-break">
        </p><p>
            屏幕截图中的规则将查找所有具有挂起时间的工单，并在相关的挂起时间上添加一个小时以生成结束时间，然后在搜索期间为找到的工单集创建预约。
工单还需要位于<span class="emphasis"><em>Raw</em></span>队列中。
        </p><p>
            自动添加预约的一个示例，如下图所示：
        </p><p>
            </p><div class="figure"><a name="id-1.8.3.12.13.1"></a><p class="title"><b>图 6.38. 日历概览屏幕中的工单预约</b></p><div class="figure-contents"><div class="screenshot"><div><img src="screenshots/appointment-calendar/calendaroverview-ticketappointment.png" alt="日历概览屏幕中的工单预约"></div></div></div></div><p><br class="figure-break">
        </p><p>
            <span class="emphasis"><em>P</em></span>符号表示这个预约包括一个挂起时间作为开始时间值。结束时间值是一个日期/时间类型的动态字段，
在这个示例中，为便于测试显示了一个较大的预约。
        </p><p>
            不同类型的特殊预约相关的标识符号：
        </p><div class="variablelist"><dl class="variablelist"><dt><span class="term">P</span></dt><dd><p>
                        工单的挂起时间作为开始时间的预约。
                    </p></dd><dt><span class="term">E</span></dt><dd><p>
                        用升级时间（首次响应时间、更新时间、解决时间）作为开始时间的工单预约。
                    </p></dd><dt><span class="term">D</span></dt><dd><p>
                        工单的日期/时间类型的动态字段时间作为开始时间的预约。
                    </p></dd></dl></div><p>
            一个特殊预约的编辑屏幕如下图所示：
        </p><p>
            </p><div class="figure"><a name="id-1.8.3.12.18.1"></a><p class="title"><b>图 6.39. 一个特殊预约的编辑屏幕</b></p><div class="figure-contents"><div class="screenshot"><div><img src="screenshots/appointment-calendar/calendaroverview-ticketappointmentedit.png" alt="一个特殊预约的编辑屏幕"></div></div></div></div><p><br class="figure-break">
        </p><p>
            预约标题将显示为工单编号和标题，不能更改，因为它是根据相关工单自动创建、更新和删除的。 标题还是到相关工单的详情屏幕的链接。
        </p><p>
            当然，仍然可以定义基本信息，如描述和位置，这将存储在该单个预约中。 对于这样的预约，还可以定义通知时间并链接其他工单。
        </p><p>
            这些开始时间值中的一些值是可变的，因此有些可以由相关服务人员更新，有些不能更新。
        </p><p>
            例如，挂起时间是可以使用相关工单的工单详情中的挂起操作来更改的值。动态字段值也可以轻松更改。
        </p><p>
            诸如首次响应时间或更新时间的升级值是使用分配给相关工单的服务/ SLA条目计算的特殊值。
        </p><p>
            例如，如果使用日历概览更改自动创建的挂起时间类型的预约，则相关值也将在工单中更新，这与动态字段类型的特殊预约相同。
因此，可以使用工单详情屏幕更新相关工单，也可以仅更新预约，这会将所有需要的更改写回到工单。
        </p><p>
            不能使用相关预约来更新升级时间类型的预约，因为这些值不能由服务人员直接更改。 这样的预约在相关值以及拖放功能/句柄上仅仅是只读的。
        </p><p>
            在日历定义或相关工单的每次更新中，自动创建的预约也将更新。 这项工作将由OTRS守护进程在后台完成。 因此，必须让守护进程运行才能使此功能正常工作！
        </p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="id-1.8.3.13"></a>即将到来的预约的仪表板小部件</h3></div></div></div><p>
            要快速查看即将到来的预约，可以启用名为<span class="emphasis"><em>预约</em></span>的仪表板小部件。
        </p><p>
            </p><div class="figure"><a name="id-1.8.3.13.3.1"></a><p class="title"><b>图 6.40. 即将到来的预约仪表板小部件中的“今天”过滤器</b></p><div class="figure-contents"><div class="screenshot"><div><img src="screenshots/appointment-calendar/dashboardwidgettoday.png" alt="即将到来的预约仪表板小部件中的“今天”过滤器"></div></div></div></div><p><br class="figure-break">
        </p><p>
            此小部件以简化的方式显示服务人员每个可访问的日历即将到来的预约。
        </p><p>
            它提供了创建新预约的可能性，点击<span class="emphasis"><em>新建预约</em></span>按钮，将服务人员转到日历概览屏幕，并打开新建预约对话框。
        </p><p>
            小部件内容由三个过滤条目组成：
        </p><div class="variablelist"><dl class="variablelist"><dt><span class="term">今天</span></dt><dd><p>
                        显示当前日期即将到来的预约。
                    </p></dd><dt><span class="term">明天</span></dt><dd><p>
                        显示下一天即将到来的预约。
                    </p></dd><dt><span class="term">很快</span></dt><dd><p>
                        很快意味着接下来5天，不包括今天和明天。
                    </p></dd></dl></div><p>
            像其他仪表板小部件一样，服务人员可以通过点击过滤器名称在过滤器之间切换：
        </p><p>
            </p><div class="figure"><a name="id-1.8.3.13.9.1"></a><p class="title"><b>图 6.41. 即将到来的预约仪表板小部件中的“很快”过滤器</b></p><div class="figure-contents"><div class="screenshot"><div><img src="screenshots/appointment-calendar/dashboardwidgetsoon.png" alt="即将到来的预约仪表板小部件中的“很快”过滤器"></div></div></div></div><p><br class="figure-break">
        </p><p>
            由于预约信息被简化并需要紧凑以便在小部件中正确显示，悬停在列上时相关的提示框中会显示每个值的详细信息，如上一个屏幕截图所示。
        </p><p>
            基本上只有相关日历的颜色、预约的开始时间和预约标题会显示给服务人员。 如果需要，悬停在相关列上时，将显示更多信息。
如果服务人员点击该预约，浏览器将重定向到日历概览屏幕，并打开相关预约以显示全部信息。
        </p></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="appointment-calendar.html">上一页</a> </td><td width="20%" align="center"><a accesskey="u" href="appointment-calendar.html">上一级</a></td><td width="40%" align="right"> <a accesskey="n" href="performance-tuning.html">下一页</a></td></tr><tr><td width="40%" align="left" valign="top">第 6 章 预约日历 </td><td width="20%" align="center"><a accesskey="h" href="index.html">起始页</a></td><td width="40%" align="right" valign="top"> 第 7 章 性能优化</td></tr></table></div></body></html>
