

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Customer Users &mdash; OTRS Administration Manual 7.0 documentation</title>
  

  
  
  
  

  

  
  
    

  

  <link rel="stylesheet" href="../../_static/css/otrs.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Customer Users ↔ Customers" href="customer-users-customers.html" />
    <link rel="prev" title="Customers ↔ Groups" href="customers-groups.html" /> 

  
  <script src="../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          
    
    
    <a href="https://doc.otrs.com/doc" class="icon fa-rocket DocumentationOverview"> OTRS Documentation</a>

    

          
            <a href="../index.html" class="icon icon-home"> OTRS Administration Manual
          

          
            
            <img src="../../_static/otrs-logo.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                7.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          


        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ticket-settings.html">Ticket Settings</a></li>
<li class="toctree-l1"><a class="reference internal" href="../communication-notifications.html">Communication &amp; Notifications</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../users-groups-roles.html">Users, Groups &amp; Roles</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="agents.html">Agents</a></li>
<li class="toctree-l2"><a class="reference internal" href="agents-groups.html">Agents ↔ Groups</a></li>
<li class="toctree-l2"><a class="reference internal" href="agents-roles.html">Agents ↔ Roles</a></li>
<li class="toctree-l2"><a class="reference internal" href="customers.html">Customers</a></li>
<li class="toctree-l2"><a class="reference internal" href="customers-groups.html">Customers ↔ Groups</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Customer Users</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#manage-customer-users">Manage Customer Users</a></li>
<li class="toctree-l3"><a class="reference internal" href="#customer-user-settings">Customer User Settings</a></li>
<li class="toctree-l3"><a class="reference internal" href="#customer-user-back-ends">Customer User Back Ends</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#database">Database</a></li>
<li class="toctree-l4"><a class="reference internal" href="#ldap">LDAP</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#multiple-customer-user-back-ends">Multiple Customer User Back Ends</a></li>
<li class="toctree-l3"><a class="reference internal" href="#customer-user-data-in-dynamic-fields">Customer User Data in Dynamic Fields</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="customer-users-customers.html">Customer Users ↔ Customers</a></li>
<li class="toctree-l2"><a class="reference internal" href="customer-users-groups.html">Customer Users ↔ Groups</a></li>
<li class="toctree-l2"><a class="reference internal" href="customer-users-services.html">Customer Users ↔ Services</a></li>
<li class="toctree-l2"><a class="reference internal" href="groups.html">Groups</a></li>
<li class="toctree-l2"><a class="reference internal" href="roles.html">Roles</a></li>
<li class="toctree-l2"><a class="reference internal" href="roles-groups.html">Roles ↔ Groups</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../processes-automation.html">Processes &amp; Automation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../external-interface.html">External Interface</a></li>
<li class="toctree-l1"><a class="reference internal" href="../otrs-group-services.html">OTRS Group Services</a></li>
<li class="toctree-l1"><a class="reference internal" href="../administration.html">Administration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../glossary.html">Glossary</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">OTRS Administration Manual</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../users-groups-roles.html">Users, Groups &amp; Roles</a> &raquo;</li>
        
      <li>Customer Users</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            
              <a href="https://github.com/OTRS/doc-admin/blob/rel-7_0/content/users-groups-roles/customer-users.rst" class="fa fa-github"> Edit on GitHub</a>
            
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="customer-users">
<h1>Customer Users<a class="headerlink" href="#customer-users" title="Permalink to this headline">¶</a></h1>
<p>A record of who your company deals with requires more information about that individual: physical location for shipping and billing purposes, as well as contact information for email and phone contact.</p>
<p>OTRS offers a great way to save individual information about contacts within organizations which your company serves. You can add as many personal connections into OTRS as needed.</p>
<p>Use this screen to add a <a class="reference internal" href="../glossary.html#term-customer-user"><span class="xref std std-term">customer user</span></a> to the system. A fresh OTRS installation contains no customer users by default. The customer user management screen is available in the <em>Customer Users</em> module of the <em>Users, Groups &amp; Roles</em> group.</p>
<div class="figure" id="id1">
<img alt="Customer User Management Screen" src="../../_images/customer-user-management.png" />
<p class="caption"><span class="caption-text">Customer User Management Screen</span></p>
</div>
<div class="section" id="manage-customer-users">
<h2>Manage Customer Users<a class="headerlink" href="#manage-customer-users" title="Permalink to this headline">¶</a></h2>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">A customer user can only be added to the system when at least one <a class="reference internal" href="../glossary.html#term-customer"><span class="xref std std-term">customer</span></a> exists. Create one or more <a class="reference internal" href="customers.html"><span class="doc">Customers</span></a> first.</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Adding or editing a customer user is possible only by using database back end. Using external directory services like LDAP will disable the customer user management functionality.</p>
</div>
<p>To add a customer user:</p>
<ol class="arabic simple">
<li>Click on the <em>Add Customer User</em> button in the left sidebar.</li>
<li>Fill in the required fields.</li>
<li>Click on the <em>Save</em> button.</li>
</ol>
<div class="figure" id="id2">
<img alt="Add Customer User Screen" src="../../_images/customer-user-add.png" />
<p class="caption"><span class="caption-text">Add Customer User Screen</span></p>
</div>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">Customer users can not be deleted from the system. They can only be deactivated by setting the <em>Validity</em> option to <em>invalid</em> or <em>invalid-temporarily</em>.</p>
</div>
<p>To edit a customer user:</p>
<ol class="arabic simple">
<li>Click on a customer user in the list of customer users.</li>
<li>Modify the fields.</li>
<li>Click on the <em>Save</em> or <em>Save and finish</em> button.</li>
</ol>
<div class="figure" id="id3">
<img alt="Edit Customer User Screen" src="../../_images/customer-user-edit.png" />
<p class="caption"><span class="caption-text">Edit Customer User Screen</span></p>
</div>
<p>To find a customer user:</p>
<ol class="arabic simple">
<li>Enter a search term to the search box in the left sidebar.</li>
<li>Click on the magnifying glass icon in the right part of the field or hit an <code class="docutils literal notranslate"><span class="pre">Enter</span></code>.</li>
</ol>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">If several customer users are added to the system, use the search box to find a particular customer user. Only the first 1000 customer users are listed by default.</p>
</div>
<p>The customer user permissions can be controlled by adding a customer or a customer user to <a class="reference internal" href="groups.html"><span class="doc">Groups</span></a>. This can result a complex matrix of permissions. The effective permissions for a customer user can be checked in the bottom of the <em>Edit Customer User</em> screen.</p>
<div class="figure" id="id4">
<img alt="Effective Permissions for Customer User Widget" src="../../_images/customer-user-effective-permission.png" />
<p class="caption"><span class="caption-text">Effective Permissions for Customer User Widget</span></p>
</div>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="customer-users-groups.html"><span class="doc">Customer Users ↔ Groups</span></a> needs to be enabled to use this feature.</p>
</div>
</div>
<div class="section" id="customer-user-settings">
<h2>Customer User Settings<a class="headerlink" href="#customer-user-settings" title="Permalink to this headline">¶</a></h2>
<p>The following settings are available when adding or editing this resource. The fields marked with an asterisk are mandatory.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">These are the default fields available for the internal database table.</p>
</div>
<dl class="docutils">
<dt>Title or salutation</dt>
<dd>Some name prefix can be added here like <em>Mr.</em>, <em>Dr.</em>, <em>Jr.</em>, etc.</dd>
<dt>Firstname *</dt>
<dd>The first name of the customer user.</dd>
<dt>Lastname *</dt>
<dd>The last name of the customer user.</dd>
<dt>Username *</dt>
<dd>The username of the customer user to login to the system.</dd>
<dt>Password</dt>
<dd>The password of the customer user. This will be auto-generated if left empty.</dd>
<dt>Email *</dt>
<dd>The email address of the customer user.</dd>
<dt>Customer *</dt>
<dd>The customer company the customer user belongs to. Select a customer from the list of <a class="reference internal" href="customers.html"><span class="doc">Customers</span></a>.</dd>
<dt>Phone</dt>
<dd>The phone number of the customer user.</dd>
<dt>Fax</dt>
<dd>The fax number of the customer user.</dd>
<dt>Mobile</dt>
<dd>The cellphone number of the customer user.</dd>
<dt>Street</dt>
<dd>The street name of the customer.</dd>
<dt>Zip</dt>
<dd>The zip code of the customer.</dd>
<dt>City</dt>
<dd>The headquarter city of the customer.</dd>
<dt>Country</dt>
<dd>The country of the customer user.</dd>
<dt>Comment</dt>
<dd>Add additional information to this resource. It is recommended to always fill this field as a description of the resource with a full sentence for better clarity, because the comment will be also displayed in the overview table.</dd>
<dt>Validity *</dt>
<dd>Set the validity of this resource. Each resource can be used in OTRS only, if this field is set to <em>valid</em>. Setting this field to <em>invalid</em> or <em>invalid-temporarily</em> will disable the use of the resource.</dd>
</dl>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last">It is possible to assign multiple customers to customer users via the <a class="reference internal" href="customer-users-customers.html"><span class="doc">Customer Users ↔ Customers</span></a> screen.</p>
</div>
</div>
<div class="section" id="customer-user-back-ends">
<h2>Customer User Back Ends<a class="headerlink" href="#customer-user-back-ends" title="Permalink to this headline">¶</a></h2>
<p>The system works with many customer user data attributes such as username, email address, phone number, etc. These attributes are displayed in both the agent and the external interface, and also used for the authentication of customer users.</p>
<p>Customer data used or displayed within the system is highly customizable. The user login and the email address are always needed for customer authentication.</p>
<p>You can use two types of customer back end: database or LDAP. If you already have another customer back end (e.g. SAP), it is possible to write a module that uses it.</p>
<p>The administrator interface does not support the configuration of external back ends. Administrators need to edit the file <code class="docutils literal notranslate"><span class="pre">Kernel/Config.pm</span></code> by copying and pasting code snippets from <code class="docutils literal notranslate"><span class="pre">Kernel/Config/Defaults.pm</span></code> manually in case of using <em>On-Premise</em> system or <em>((OTRS)) Community Edition</em>.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">Do not modify the file <code class="docutils literal notranslate"><span class="pre">Kernel/Config/Defaults.pm</span></code>, it will be overwritten after upgrading the system! Copy and paste the code snippets into <code class="docutils literal notranslate"><span class="pre">Kernel/Config.pm</span></code> instead.</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The following configurations are taken care of by the <em>Customer Solution Team</em> in <strong>OTRS</strong>. Please contact the <em>Customer Solution Team</em> via <a class="reference external" href="mailto:support&#37;&#52;&#48;otrs&#46;com">support<span>&#64;</span>otrs<span>&#46;</span>com</a> or in the <a class="reference external" href="https://portal.otrs.com/">OTRS Portal</a>.</p>
</div>
<div class="section" id="database">
<h3>Database<a class="headerlink" href="#database" title="Permalink to this headline">¶</a></h3>
<p>This is the default customer user back end for new installations. The example below shows the configuration of a database customer back end, which uses customer user data stored in the database table <code class="docutils literal notranslate"><span class="pre">customer_user</span></code>.</p>
<div class="highlight-perl notranslate"><div class="highlight"><pre><span></span>    <span class="c1"># CustomerUser</span>
    <span class="c1"># (customer user database backend and settings)</span>
    <span class="nv">$Self</span><span class="o">-&gt;</span><span class="p">{</span><span class="n">CustomerUser</span><span class="p">}</span> <span class="o">=</span> <span class="p">{</span>
        <span class="n">Name</span>   <span class="o">=&gt;</span> <span class="n">Translatable</span><span class="p">(</span><span class="s">&#39;Database Backend&#39;</span><span class="p">),</span>
        <span class="n">Module</span> <span class="o">=&gt;</span> <span class="s">&#39;Kernel::System::CustomerUser::DB&#39;</span><span class="p">,</span>
        <span class="n">Params</span> <span class="o">=&gt;</span> <span class="p">{</span>

            <span class="c1"># if you want to use an external database, add the</span>
            <span class="c1"># required settings</span>
<span class="c1">#            DSN  =&gt; &#39;DBI:odbc:yourdsn&#39;,</span>
<span class="c1">#            Type =&gt; &#39;mssql&#39;, # only for ODBC connections</span>
<span class="c1">#            DSN =&gt; &#39;DBI:mysql:database=customerdb;host=customerdbhost&#39;,</span>
<span class="c1">#            User =&gt; &#39;&#39;,</span>
<span class="c1">#            Password =&gt; &#39;&#39;,</span>
            <span class="n">Table</span> <span class="o">=&gt;</span> <span class="s">&#39;customer_user&#39;</span><span class="p">,</span>
<span class="c1">#            ForeignDB =&gt; 0,    # set this to 1 if your table does not have create_time, create_by, change_time and change_by fields</span>

            <span class="c1"># CaseSensitive defines if the data storage of your DBMS is case sensitive and will be</span>
            <span class="c1"># preconfigured within the database driver by default.</span>
            <span class="c1"># If the collation of your data storage differs from the default settings,</span>
            <span class="c1"># you can set the current behavior ( either 1 = CaseSensitive or 0 = CaseINSensitive )</span>
            <span class="c1"># to fit your environment.</span>
            <span class="c1">#</span>
<span class="c1">#            CaseSensitive =&gt; 0,</span>

            <span class="c1"># SearchCaseSensitive will control if the searches within the data storage are performed</span>
            <span class="c1"># case sensitively (if possible) or not. Change this option to 1, if you want to search case sensitive.</span>
            <span class="c1"># This can improve the performance dramatically on large databases.</span>
            <span class="n">SearchCaseSensitive</span> <span class="o">=&gt;</span> <span class="mi">0</span><span class="p">,</span>
        <span class="p">},</span>

        <span class="c1"># customer unique id</span>
        <span class="n">CustomerKey</span> <span class="o">=&gt;</span> <span class="s">&#39;login&#39;</span><span class="p">,</span>

        <span class="c1"># customer #</span>
        <span class="n">CustomerID</span>    <span class="o">=&gt;</span> <span class="s">&#39;customer_id&#39;</span><span class="p">,</span>
        <span class="n">CustomerValid</span> <span class="o">=&gt;</span> <span class="s">&#39;valid_id&#39;</span><span class="p">,</span>

        <span class="c1"># The last field must always be the email address so that a valid</span>
        <span class="c1">#   email address like &quot;John Doe&quot; &lt;john.doe@domain.com&gt; can be constructed from the fields.</span>
        <span class="n">CustomerUserListFields</span> <span class="o">=&gt;</span> <span class="p">[</span> <span class="s">&#39;first_name&#39;</span><span class="p">,</span> <span class="s">&#39;last_name&#39;</span><span class="p">,</span> <span class="s">&#39;email&#39;</span> <span class="p">],</span>

<span class="c1">#        CustomerUserListFields =&gt; [&#39;login&#39;, &#39;first_name&#39;, &#39;last_name&#39;, &#39;customer_id&#39;, &#39;email&#39;],</span>
        <span class="n">CustomerUserSearchFields</span>           <span class="o">=&gt;</span> <span class="p">[</span> <span class="s">&#39;login&#39;</span><span class="p">,</span> <span class="s">&#39;first_name&#39;</span><span class="p">,</span> <span class="s">&#39;last_name&#39;</span><span class="p">,</span> <span class="s">&#39;customer_id&#39;</span> <span class="p">],</span>
        <span class="n">CustomerUserSearchPrefix</span>           <span class="o">=&gt;</span> <span class="s">&#39;*&#39;</span><span class="p">,</span>
        <span class="n">CustomerUserSearchSuffix</span>           <span class="o">=&gt;</span> <span class="s">&#39;*&#39;</span><span class="p">,</span>
        <span class="n">CustomerUserSearchListLimit</span>        <span class="o">=&gt;</span> <span class="mi">250</span><span class="p">,</span>
        <span class="n">CustomerUserPostMasterSearchFields</span> <span class="o">=&gt;</span> <span class="p">[</span><span class="s">&#39;email&#39;</span><span class="p">],</span>
        <span class="n">CustomerUserNameFields</span>             <span class="o">=&gt;</span> <span class="p">[</span> <span class="s">&#39;title&#39;</span><span class="p">,</span> <span class="s">&#39;first_name&#39;</span><span class="p">,</span> <span class="s">&#39;last_name&#39;</span> <span class="p">],</span>
        <span class="n">CustomerUserEmailUniqCheck</span>         <span class="o">=&gt;</span> <span class="mi">1</span><span class="p">,</span>

<span class="c1">#        # Configures the character for joining customer user name parts. Join single space if it is not defined.</span>
<span class="c1">#        # CustomerUserNameFieldsJoin =&gt; &#39;&#39;,</span>

<span class="c1">#        # show now own tickets in customer panel, CompanyTickets</span>
<span class="c1">#        CustomerUserExcludePrimaryCustomerID =&gt; 0,</span>
<span class="c1">#        # generate auto logins</span>
<span class="c1">#        AutoLoginCreation =&gt; 0,</span>
<span class="c1">#        # generate auto login prefix</span>
<span class="c1">#        AutoLoginCreationPrefix =&gt; &#39;auto&#39;,</span>
<span class="c1">#        # admin can change customer preferences</span>
<span class="c1">#        AdminSetPreferences =&gt; 1,</span>
        <span class="c1"># use customer company support (reference to company, See CustomerCompany settings)</span>
        <span class="n">CustomerCompanySupport</span> <span class="o">=&gt;</span> <span class="mi">1</span><span class="p">,</span>
        <span class="c1"># cache time to live in sec. - cache any database queries</span>
        <span class="n">CacheTTL</span> <span class="o">=&gt;</span> <span class="mi">60</span> <span class="o">*</span> <span class="mi">60</span> <span class="o">*</span> <span class="mi">24</span><span class="p">,</span>
<span class="c1">#        # Consider this source read only.</span>
<span class="c1">#        ReadOnly =&gt; 1,</span>
        <span class="n">Map</span> <span class="o">=&gt;</span> <span class="p">[</span>

            <span class="c1"># Info about dynamic fields:</span>
            <span class="c1">#</span>
            <span class="c1"># Dynamic Fields of type CustomerUser can be used within the mapping (see example below).</span>
            <span class="c1"># The given storage (third column) then can also be used within the following configurations (see above):</span>
            <span class="c1"># CustomerUserSearchFields, CustomerUserPostMasterSearchFields, CustomerUserListFields, CustomerUserNameFields</span>
            <span class="c1">#</span>
            <span class="c1"># Note that the columns &#39;frontend&#39; and &#39;readonly&#39; will be ignored for dynamic fields.</span>

            <span class="c1"># note: Login, Email and CustomerID needed!</span>
            <span class="c1"># var, frontend, storage, shown (1=always,2=lite), required, storage-type, http-link, readonly, http-link-target, link class(es)</span>
            <span class="p">[</span> <span class="s">&#39;UserTitle&#39;</span><span class="p">,</span>        <span class="n">Translatable</span><span class="p">(</span><span class="s">&#39;Title or salutation&#39;</span><span class="p">),</span> <span class="s">&#39;title&#39;</span><span class="p">,</span>          <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="s">&#39;var&#39;</span><span class="p">,</span> <span class="s">&#39;&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="nb">undef</span><span class="p">,</span> <span class="nb">undef</span> <span class="p">],</span>
            <span class="p">[</span> <span class="s">&#39;UserFirstname&#39;</span><span class="p">,</span>    <span class="n">Translatable</span><span class="p">(</span><span class="s">&#39;Firstname&#39;</span><span class="p">),</span>           <span class="s">&#39;first_name&#39;</span><span class="p">,</span>     <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="s">&#39;var&#39;</span><span class="p">,</span> <span class="s">&#39;&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="nb">undef</span><span class="p">,</span> <span class="nb">undef</span> <span class="p">],</span>
            <span class="p">[</span> <span class="s">&#39;UserLastname&#39;</span><span class="p">,</span>     <span class="n">Translatable</span><span class="p">(</span><span class="s">&#39;Lastname&#39;</span><span class="p">),</span>            <span class="s">&#39;last_name&#39;</span><span class="p">,</span>      <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="s">&#39;var&#39;</span><span class="p">,</span> <span class="s">&#39;&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="nb">undef</span><span class="p">,</span> <span class="nb">undef</span> <span class="p">],</span>
            <span class="p">[</span> <span class="s">&#39;UserLogin&#39;</span><span class="p">,</span>        <span class="n">Translatable</span><span class="p">(</span><span class="s">&#39;Username&#39;</span><span class="p">),</span>            <span class="s">&#39;login&#39;</span><span class="p">,</span>          <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="s">&#39;var&#39;</span><span class="p">,</span> <span class="s">&#39;&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="nb">undef</span><span class="p">,</span> <span class="nb">undef</span> <span class="p">],</span>
            <span class="p">[</span> <span class="s">&#39;UserPassword&#39;</span><span class="p">,</span>     <span class="n">Translatable</span><span class="p">(</span><span class="s">&#39;Password&#39;</span><span class="p">),</span>            <span class="s">&#39;pw&#39;</span><span class="p">,</span>             <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="s">&#39;var&#39;</span><span class="p">,</span> <span class="s">&#39;&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="nb">undef</span><span class="p">,</span> <span class="nb">undef</span> <span class="p">],</span>
            <span class="p">[</span> <span class="s">&#39;UserEmail&#39;</span><span class="p">,</span>        <span class="n">Translatable</span><span class="p">(</span><span class="s">&#39;Email&#39;</span><span class="p">),</span>               <span class="s">&#39;email&#39;</span><span class="p">,</span>          <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="s">&#39;var&#39;</span><span class="p">,</span> <span class="s">&#39;&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="nb">undef</span><span class="p">,</span> <span class="nb">undef</span> <span class="p">],</span>
<span class="c1">#            [ &#39;UserEmail&#39;,        Translatable(&#39;Email&#39;),               &#39;email&#39;,          1, 1, &#39;var&#39;, &#39;[% Env(&quot;CGIHandle&quot;) %]?Action=AgentTicketCompose;ResponseID=1;TicketID=[% Data.TicketID | uri %];ArticleID=[% Data.ArticleID | uri %]&#39;, 0, &#39;&#39;, &#39;AsPopup OTRSPopup_TicketAction&#39; ],</span>
            <span class="p">[</span> <span class="s">&#39;UserCustomerID&#39;</span><span class="p">,</span>   <span class="n">Translatable</span><span class="p">(</span><span class="s">&#39;CustomerID&#39;</span><span class="p">),</span>          <span class="s">&#39;customer_id&#39;</span><span class="p">,</span>    <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="s">&#39;var&#39;</span><span class="p">,</span> <span class="s">&#39;&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="nb">undef</span><span class="p">,</span> <span class="nb">undef</span> <span class="p">],</span>
<span class="c1">#            [ &#39;UserCustomerIDs&#39;,  Translatable(&#39;CustomerIDs&#39;),         &#39;customer_ids&#39;,   1, 0, &#39;var&#39;, &#39;&#39;, 0, undef, undef ],</span>
            <span class="p">[</span> <span class="s">&#39;UserPhone&#39;</span><span class="p">,</span>        <span class="n">Translatable</span><span class="p">(</span><span class="s">&#39;Phone&#39;</span><span class="p">),</span>               <span class="s">&#39;phone&#39;</span><span class="p">,</span>          <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="s">&#39;var&#39;</span><span class="p">,</span> <span class="s">&#39;&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="nb">undef</span><span class="p">,</span> <span class="nb">undef</span> <span class="p">],</span>
            <span class="p">[</span> <span class="s">&#39;UserFax&#39;</span><span class="p">,</span>          <span class="n">Translatable</span><span class="p">(</span><span class="s">&#39;Fax&#39;</span><span class="p">),</span>                 <span class="s">&#39;fax&#39;</span><span class="p">,</span>            <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="s">&#39;var&#39;</span><span class="p">,</span> <span class="s">&#39;&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="nb">undef</span><span class="p">,</span> <span class="nb">undef</span> <span class="p">],</span>
            <span class="p">[</span> <span class="s">&#39;UserMobile&#39;</span><span class="p">,</span>       <span class="n">Translatable</span><span class="p">(</span><span class="s">&#39;Mobile&#39;</span><span class="p">),</span>              <span class="s">&#39;mobile&#39;</span><span class="p">,</span>         <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="s">&#39;var&#39;</span><span class="p">,</span> <span class="s">&#39;&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="nb">undef</span><span class="p">,</span> <span class="nb">undef</span> <span class="p">],</span>
            <span class="p">[</span> <span class="s">&#39;UserStreet&#39;</span><span class="p">,</span>       <span class="n">Translatable</span><span class="p">(</span><span class="s">&#39;Street&#39;</span><span class="p">),</span>              <span class="s">&#39;street&#39;</span><span class="p">,</span>         <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="s">&#39;var&#39;</span><span class="p">,</span> <span class="s">&#39;&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="nb">undef</span><span class="p">,</span> <span class="nb">undef</span> <span class="p">],</span>
            <span class="p">[</span> <span class="s">&#39;UserZip&#39;</span><span class="p">,</span>          <span class="n">Translatable</span><span class="p">(</span><span class="s">&#39;Zip&#39;</span><span class="p">),</span>                 <span class="s">&#39;zip&#39;</span><span class="p">,</span>            <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="s">&#39;var&#39;</span><span class="p">,</span> <span class="s">&#39;&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="nb">undef</span><span class="p">,</span> <span class="nb">undef</span> <span class="p">],</span>
            <span class="p">[</span> <span class="s">&#39;UserCity&#39;</span><span class="p">,</span>         <span class="n">Translatable</span><span class="p">(</span><span class="s">&#39;City&#39;</span><span class="p">),</span>                <span class="s">&#39;city&#39;</span><span class="p">,</span>           <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="s">&#39;var&#39;</span><span class="p">,</span> <span class="s">&#39;&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="nb">undef</span><span class="p">,</span> <span class="nb">undef</span> <span class="p">],</span>
            <span class="p">[</span> <span class="s">&#39;UserCountry&#39;</span><span class="p">,</span>      <span class="n">Translatable</span><span class="p">(</span><span class="s">&#39;Country&#39;</span><span class="p">),</span>             <span class="s">&#39;country&#39;</span><span class="p">,</span>        <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="s">&#39;var&#39;</span><span class="p">,</span> <span class="s">&#39;&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="nb">undef</span><span class="p">,</span> <span class="nb">undef</span> <span class="p">],</span>
            <span class="p">[</span> <span class="s">&#39;UserComment&#39;</span><span class="p">,</span>      <span class="n">Translatable</span><span class="p">(</span><span class="s">&#39;Comment&#39;</span><span class="p">),</span>             <span class="s">&#39;comments&#39;</span><span class="p">,</span>       <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="s">&#39;var&#39;</span><span class="p">,</span> <span class="s">&#39;&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="nb">undef</span><span class="p">,</span> <span class="nb">undef</span> <span class="p">],</span>
            <span class="p">[</span> <span class="s">&#39;ValidID&#39;</span><span class="p">,</span>          <span class="n">Translatable</span><span class="p">(</span><span class="s">&#39;Valid&#39;</span><span class="p">),</span>               <span class="s">&#39;valid_id&#39;</span><span class="p">,</span>       <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="s">&#39;int&#39;</span><span class="p">,</span> <span class="s">&#39;&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="nb">undef</span><span class="p">,</span> <span class="nb">undef</span> <span class="p">],</span>

            <span class="c1"># Dynamic field example</span>
<span class="c1">#            [ &#39;DynamicField_Name_X&#39;, undef, &#39;Name_X&#39;, 0, 0, &#39;dynamic_field&#39;, undef, 0, undef, undef ],</span>
        <span class="p">],</span>

        <span class="c1"># default selections</span>
        <span class="n">Selections</span> <span class="o">=&gt;</span> <span class="p">{</span>

<span class="c1">#            UserTitle =&gt; {</span>
<span class="c1">#                &#39;Mr.&#39; =&gt; Translatable(&#39;Mr.&#39;),</span>
<span class="c1">#                &#39;Mrs.&#39; =&gt; Translatable(&#39;Mrs.&#39;),</span>
<span class="c1">#            },</span>
        <span class="p">},</span>
    <span class="p">};</span>
</pre></div>
</div>
<p>If you want to customize the customer user data, change the columns or add new ones to the <code class="docutils literal notranslate"><span class="pre">customer_user</span></code> table in the database.</p>
<p>For example, to add a new field for room number:</p>
<ol class="arabic">
<li><p class="first">Add a new column <code class="docutils literal notranslate"><span class="pre">room</span></code> to table <code class="docutils literal notranslate"><span class="pre">customer_user</span></code>.</p>
<p>MySQL or MariaDB:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>root&gt; mysql -u root -p -e <span class="s1">&#39;ALTER TABLE otrs.customer_user ADD room VARCHAR (250)&#39;</span>
</pre></div>
</div>
<p>PostgreSQL (from the <code class="docutils literal notranslate"><span class="pre">/opt/otrs</span></code> directory):</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>otrs&gt; psql -c <span class="s1">&#39;ALTER TABLE customer_user ADD COLUMN room varchar(250)&#39;</span>
</pre></div>
</div>
</li>
<li><p class="first">Copy the <code class="docutils literal notranslate"><span class="pre">$Self-&gt;{CustomerUser}</span></code> section from <code class="docutils literal notranslate"><span class="pre">Kernel/Config/Defaults.pm</span></code> into <code class="docutils literal notranslate"><span class="pre">Kernel/Config.pm</span></code>.</p>
</li>
<li><p class="first">Add the new column to the <code class="docutils literal notranslate"><span class="pre">Map</span></code> array.</p>
<div class="highlight-perl notranslate"><div class="highlight"><pre><span></span><span class="p">[</span> <span class="s">&#39;UserRoom&#39;</span><span class="p">,</span> <span class="s">&#39;Room&#39;</span><span class="p">,</span> <span class="s">&#39;room&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="s">&#39;var&#39;</span><span class="p">,</span> <span class="s">&#39;&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="nb">undef</span><span class="p">,</span> <span class="nb">undef</span> <span class="p">],</span>
</pre></div>
</div>
<p>You can set the HTTP link target and link class (the last two keys) to <code class="docutils literal notranslate"><span class="pre">undef</span></code> in map array elements, if they are not to be used. These keys add <code class="docutils literal notranslate"><span class="pre">target=&quot;&quot;</span></code> and <code class="docutils literal notranslate"><span class="pre">class=&quot;&quot;</span></code> attributes to the HTTP link element, respectively. They are ignored if HTTP link is not set (it is <code class="docutils literal notranslate"><span class="pre">''</span></code> in this example).</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">It is recommended to always use English words for names.</p>
</div>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last">Names can be translated into other languages with custom translation files. See the <a class="reference external" href="http://doc.otrs.com/doc/manual/developer/7.0/en/content/how-it-works/translations.html#custom-translation-file">Custom Translation File</a> chapter in the developer manual.</p>
</div>
</li>
</ol>
</div>
<div class="section" id="ldap">
<h3>LDAP<a class="headerlink" href="#ldap" title="Permalink to this headline">¶</a></h3>
<p>If you have an LDAP directory with your customer user data, you can use it as the customer user back end. The example below shows the configuration of a LDAP customer user back end.</p>
<div class="highlight-perl notranslate"><div class="highlight"><pre><span></span><span class="c1"># CustomerUser</span>
<span class="c1"># (customer user ldap backend and settings)</span>
    <span class="nv">$Self</span><span class="o">-&gt;</span><span class="p">{</span><span class="n">CustomerUser</span><span class="p">}</span> <span class="o">=</span> <span class="p">{</span>
        <span class="n">Name</span> <span class="o">=&gt;</span> <span class="s">&#39;LDAP Backend&#39;</span><span class="p">,</span>
        <span class="n">Module</span> <span class="o">=&gt;</span> <span class="s">&#39;Kernel::System::CustomerUser::LDAP&#39;</span><span class="p">,</span>
        <span class="n">Params</span> <span class="o">=&gt;</span> <span class="p">{</span>
            <span class="c1"># ldap host</span>
            <span class="n">Host</span> <span class="o">=&gt;</span> <span class="s">&#39;bay.csuhayward.edu&#39;</span><span class="p">,</span>
            <span class="c1"># ldap base dn</span>
            <span class="n">BaseDN</span> <span class="o">=&gt;</span> <span class="s">&#39;ou=seas,o=csuh&#39;</span><span class="p">,</span>
            <span class="c1"># search scope (one|sub)</span>
            <span class="n">SSCOPE</span> <span class="o">=&gt;</span> <span class="s">&#39;sub&#39;</span><span class="p">,</span>
            <span class="c1"># The following is valid but would only be necessary if the</span>
            <span class="c1"># anonymous user does NOT have permission to read from the LDAP tree</span>
            <span class="n">UserDN</span> <span class="o">=&gt;</span> <span class="s">&#39;&#39;</span><span class="p">,</span>
            <span class="n">UserPw</span> <span class="o">=&gt;</span> <span class="s">&#39;&#39;</span><span class="p">,</span>
            <span class="c1"># in case you want to add always one filter to each ldap query, use</span>
            <span class="c1"># this option. e. g. AlwaysFilter =&gt; &#39;(mail=*)&#39; or AlwaysFilter =&gt; &#39;(objectclass=user)&#39;</span>
            <span class="n">AlwaysFilter</span> <span class="o">=&gt;</span> <span class="s">&#39;&#39;</span><span class="p">,</span>
            <span class="c1"># if the charset of your ldap server is iso-8859-1, use this:</span>
<span class="c1">#            # SourceCharset =&gt; &#39;iso-8859-1&#39;,</span>
            <span class="c1"># die if backend can&#39;t work, e. g. can&#39;t connect to server</span>
            <span class="n">Die</span> <span class="o">=&gt;</span> <span class="mi">0</span><span class="p">,</span>
            <span class="c1"># Net::LDAP new params (if needed - for more info see perldoc Net::LDAP)</span>
            <span class="n">Params</span> <span class="o">=&gt;</span> <span class="p">{</span>
                <span class="n">port</span>    <span class="o">=&gt;</span> <span class="mi">389</span><span class="p">,</span>
                <span class="n">timeout</span> <span class="o">=&gt;</span> <span class="mi">120</span><span class="p">,</span>
                <span class="n">async</span>   <span class="o">=&gt;</span> <span class="mi">0</span><span class="p">,</span>
                <span class="n">version</span> <span class="o">=&gt;</span> <span class="mi">3</span><span class="p">,</span>
            <span class="p">},</span>
        <span class="p">},</span>
        <span class="c1"># customer unique id</span>
        <span class="n">CustomerKey</span> <span class="o">=&gt;</span> <span class="s">&#39;uid&#39;</span><span class="p">,</span>
        <span class="c1"># customer #</span>
        <span class="n">CustomerID</span> <span class="o">=&gt;</span> <span class="s">&#39;mail&#39;</span><span class="p">,</span>
        <span class="n">CustomerUserListFields</span> <span class="o">=&gt;</span> <span class="p">[</span><span class="s">&#39;cn&#39;</span><span class="p">,</span> <span class="s">&#39;mail&#39;</span><span class="p">],</span>
        <span class="n">CustomerUserSearchFields</span> <span class="o">=&gt;</span> <span class="p">[</span><span class="s">&#39;uid&#39;</span><span class="p">,</span> <span class="s">&#39;cn&#39;</span><span class="p">,</span> <span class="s">&#39;mail&#39;</span><span class="p">],</span>
        <span class="n">CustomerUserSearchPrefix</span> <span class="o">=&gt;</span> <span class="s">&#39;&#39;</span><span class="p">,</span>
        <span class="n">CustomerUserSearchSuffix</span> <span class="o">=&gt;</span> <span class="s">&#39;*&#39;</span><span class="p">,</span>
        <span class="n">CustomerUserSearchListLimit</span> <span class="o">=&gt;</span> <span class="mi">250</span><span class="p">,</span>
        <span class="n">CustomerUserPostMasterSearchFields</span> <span class="o">=&gt;</span> <span class="p">[</span><span class="s">&#39;mail&#39;</span><span class="p">],</span>
        <span class="n">CustomerUserNameFields</span> <span class="o">=&gt;</span> <span class="p">[</span><span class="s">&#39;givenname&#39;</span><span class="p">,</span> <span class="s">&#39;sn&#39;</span><span class="p">],</span>
        <span class="c1"># Configures the character for joining customer user name parts. Join single space if it is not defined.</span>
        <span class="n">CustomerUserNameFieldsJoin</span> <span class="o">=&gt;</span> <span class="s">&#39;&#39;</span><span class="p">,</span>
        <span class="c1"># show customer user and customer tickets in the external interface</span>
        <span class="n">CustomerUserExcludePrimaryCustomerID</span> <span class="o">=&gt;</span> <span class="mi">0</span><span class="p">,</span>
        <span class="c1"># add a ldap filter for valid users (expert setting)</span>
<span class="c1">#        # CustomerUserValidFilter =&gt; &#39;(!(description=gesperrt))&#39;,</span>
        <span class="c1"># admin can&#39;t change customer preferences</span>
        <span class="n">AdminSetPreferences</span> <span class="o">=&gt;</span> <span class="mi">0</span><span class="p">,</span>
        <span class="c1"># cache time to live in sec. - cache any ldap queries</span>
<span class="c1">#        CacheTTL =&gt; 0,</span>
        <span class="n">Map</span> <span class="o">=&gt;</span> <span class="p">[</span>
            <span class="c1"># note: Login, Email and CustomerID needed!</span>
            <span class="c1"># var, frontend, storage, shown (1=always,2=lite), required, storage-type, http-link, readonly, http-link-target, link class(es)</span>
            <span class="p">[</span> <span class="s">&#39;UserTitle&#39;</span><span class="p">,</span>       <span class="n">Translatable</span><span class="p">(</span><span class="s">&#39;Title or salutation&#39;</span><span class="p">),</span> <span class="s">&#39;title&#39;</span><span class="p">,</span>               <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="s">&#39;var&#39;</span><span class="p">,</span> <span class="s">&#39;&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="nb">undef</span><span class="p">,</span> <span class="nb">undef</span> <span class="p">],</span>
            <span class="p">[</span> <span class="s">&#39;UserFirstname&#39;</span><span class="p">,</span>   <span class="n">Translatable</span><span class="p">(</span><span class="s">&#39;Firstname&#39;</span><span class="p">),</span>           <span class="s">&#39;givenname&#39;</span><span class="p">,</span>           <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="s">&#39;var&#39;</span><span class="p">,</span> <span class="s">&#39;&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="nb">undef</span><span class="p">,</span> <span class="nb">undef</span> <span class="p">],</span>
            <span class="p">[</span> <span class="s">&#39;UserLastname&#39;</span><span class="p">,</span>    <span class="n">Translatable</span><span class="p">(</span><span class="s">&#39;Lastname&#39;</span><span class="p">),</span>            <span class="s">&#39;sn&#39;</span><span class="p">,</span>                  <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="s">&#39;var&#39;</span><span class="p">,</span> <span class="s">&#39;&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="nb">undef</span><span class="p">,</span> <span class="nb">undef</span> <span class="p">],</span>
            <span class="p">[</span> <span class="s">&#39;UserLogin&#39;</span><span class="p">,</span>       <span class="n">Translatable</span><span class="p">(</span><span class="s">&#39;Username&#39;</span><span class="p">),</span>            <span class="s">&#39;uid&#39;</span><span class="p">,</span>                 <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="s">&#39;var&#39;</span><span class="p">,</span> <span class="s">&#39;&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="nb">undef</span><span class="p">,</span> <span class="nb">undef</span> <span class="p">],</span>
            <span class="p">[</span> <span class="s">&#39;UserEmail&#39;</span><span class="p">,</span>       <span class="n">Translatable</span><span class="p">(</span><span class="s">&#39;Email&#39;</span><span class="p">),</span>               <span class="s">&#39;mail&#39;</span><span class="p">,</span>                <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="s">&#39;var&#39;</span><span class="p">,</span> <span class="s">&#39;&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="nb">undef</span><span class="p">,</span> <span class="nb">undef</span> <span class="p">],</span>
            <span class="p">[</span> <span class="s">&#39;UserCustomerID&#39;</span><span class="p">,</span>  <span class="n">Translatable</span><span class="p">(</span><span class="s">&#39;CustomerID&#39;</span><span class="p">),</span>          <span class="s">&#39;mail&#39;</span><span class="p">,</span>                <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="s">&#39;var&#39;</span><span class="p">,</span> <span class="s">&#39;&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="nb">undef</span><span class="p">,</span> <span class="nb">undef</span> <span class="p">],</span>
            <span class="c1"># [ &#39;UserCustomerIDs&#39;, Translatable(&#39;CustomerIDs&#39;),         &#39;second_customer_ids&#39;, 1, 0, &#39;var&#39;, &#39;&#39;, 1, undef, undef ],</span>
            <span class="p">[</span> <span class="s">&#39;UserPhone&#39;</span><span class="p">,</span>       <span class="n">Translatable</span><span class="p">(</span><span class="s">&#39;Phone&#39;</span><span class="p">),</span>               <span class="s">&#39;telephonenumber&#39;</span><span class="p">,</span>     <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="s">&#39;var&#39;</span><span class="p">,</span> <span class="s">&#39;&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="nb">undef</span><span class="p">,</span> <span class="nb">undef</span> <span class="p">],</span>
            <span class="p">[</span> <span class="s">&#39;UserAddress&#39;</span><span class="p">,</span>     <span class="n">Translatable</span><span class="p">(</span><span class="s">&#39;Address&#39;</span><span class="p">),</span>             <span class="s">&#39;postaladdress&#39;</span><span class="p">,</span>       <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="s">&#39;var&#39;</span><span class="p">,</span> <span class="s">&#39;&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="nb">undef</span><span class="p">,</span> <span class="nb">undef</span> <span class="p">],</span>
            <span class="p">[</span> <span class="s">&#39;UserComment&#39;</span><span class="p">,</span>     <span class="n">Translatable</span><span class="p">(</span><span class="s">&#39;Comment&#39;</span><span class="p">),</span>             <span class="s">&#39;description&#39;</span><span class="p">,</span>         <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="s">&#39;var&#39;</span><span class="p">,</span> <span class="s">&#39;&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="nb">undef</span><span class="p">,</span> <span class="nb">undef</span> <span class="p">],</span>

            <span class="c1"># this is needed, if &quot;SMIME::FetchFromCustomer&quot; is active</span>
            <span class="c1"># [ &#39;UserSMIMECertificate&#39;, &#39;SMIMECertificate&#39;, &#39;userSMIMECertificate&#39;, 0, 1, &#39;var&#39;, &#39;&#39;, 1, undef, undef ],</span>

            <span class="c1"># Dynamic field example</span>
            <span class="c1"># [ &#39;DynamicField_Name_X&#39;, undef, &#39;Name_X&#39;, 0, 0, &#39;dynamic_field&#39;, undef, 0, undef, undef ],</span>
        <span class="p">],</span>
    <span class="p">};</span>
</pre></div>
</div>
<p>To activate and configure the LDAP back end:</p>
<ol class="arabic simple">
<li>Copy the <code class="docutils literal notranslate"><span class="pre">$Self-&gt;{CustomerUser}</span></code> section from <code class="docutils literal notranslate"><span class="pre">Kernel/Config/Defaults.pm</span></code> into <code class="docutils literal notranslate"><span class="pre">Kernel/Config.pm</span></code>.</li>
<li>Remove the comments (<code class="docutils literal notranslate"><span class="pre">#</span></code> characters) from the beginning of the lines.</li>
</ol>
<p>If additional customer user attributes are stored in your LDAP directory, such as a manager name, a mobile phone number, or a department, this information can be displayed in OTRS.</p>
<p>To display additional customer user attributes from LDAP directory:</p>
<ol class="arabic">
<li><p class="first">Expand the <code class="docutils literal notranslate"><span class="pre">Map</span></code> array in <code class="docutils literal notranslate"><span class="pre">Kernel/Config.pm</span></code> with the entries for these attributes.</p>
<div class="highlight-perl notranslate"><div class="highlight"><pre><span></span><span class="p">[</span> <span class="s">&#39;UserMobilePhone&#39;</span><span class="p">,</span> <span class="s">&#39;Mobile Phone&#39;</span><span class="p">,</span> <span class="s">&#39;mobilephone&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="s">&#39;var&#39;</span><span class="p">,</span> <span class="s">&#39;&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="nb">undef</span><span class="p">,</span> <span class="nb">undef</span> <span class="p">],</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">It is recommended to always use English words for names.</p>
</div>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last">Names can be translated into other languages with custom translation files. See the <a class="reference external" href="http://doc.otrs.com/doc/manual/developer/7.0/en/content/how-it-works/translations.html#custom-translation-file">Custom Translation File</a> chapter in the developer manual.</p>
</div>
</li>
</ol>
</div>
</div>
<div class="section" id="multiple-customer-user-back-ends">
<h2>Multiple Customer User Back Ends<a class="headerlink" href="#multiple-customer-user-back-ends" title="Permalink to this headline">¶</a></h2>
<p>If you want to use more than one customer user data source, the <code class="docutils literal notranslate"><span class="pre">CustomerUser</span></code> configuration parameter should be expanded with a number, like <code class="docutils literal notranslate"><span class="pre">CustomerUser1</span></code> and <code class="docutils literal notranslate"><span class="pre">CustomerUser2</span></code>.</p>
<p>The following configuration example shows usage of both a database and an LDAP customer user back end.</p>
<div class="highlight-perl notranslate"><div class="highlight"><pre><span></span><span class="c1"># Data source 1: customer user database back end and settings.</span>
    <span class="nv">$Self</span><span class="o">-&gt;</span><span class="p">{</span><span class="n">CustomerUser1</span><span class="p">}</span> <span class="o">=</span> <span class="p">{</span>
        <span class="n">Name</span>   <span class="o">=&gt;</span> <span class="s">&#39;Database Backend&#39;</span><span class="p">,</span>
        <span class="n">Module</span> <span class="o">=&gt;</span> <span class="s">&#39;Kernel::System::CustomerUser::DB&#39;</span><span class="p">,</span>
        <span class="n">Params</span> <span class="o">=&gt;</span> <span class="p">{</span>
            <span class="n">DSN</span> <span class="o">=&gt;</span> <span class="s">&#39;DBI:odbc:yourdsn&#39;</span><span class="p">,</span>
            <span class="n">DSN</span> <span class="o">=&gt;</span> <span class="s">&#39;DBI:mysql:database=customerdb;host=customerdbhost&#39;</span><span class="p">,</span>
            <span class="n">User</span> <span class="o">=&gt;</span> <span class="s">&#39;&#39;</span><span class="p">,</span>
            <span class="n">Password</span> <span class="o">=&gt;</span> <span class="s">&#39;&#39;</span><span class="p">,</span>
            <span class="n">Table</span> <span class="o">=&gt;</span> <span class="s">&#39;customer_user&#39;</span><span class="p">,</span>
        <span class="p">},</span>
        <span class="c1"># Other setting here.</span>
    <span class="p">};</span>

<span class="c1"># Data source 2: customer user LDAP back end and settings.</span>
    <span class="nv">$Self</span><span class="o">-&gt;</span><span class="p">{</span><span class="n">CustomerUser2</span><span class="p">}</span> <span class="o">=</span> <span class="p">{</span>
        <span class="n">Name</span> <span class="o">=&gt;</span> <span class="s">&#39;LDAP Backend&#39;</span><span class="p">,</span>
        <span class="n">Module</span> <span class="o">=&gt;</span> <span class="s">&#39;Kernel::System::CustomerUser::LDAP&#39;</span><span class="p">,</span>
        <span class="n">Params</span> <span class="o">=&gt;</span> <span class="p">{</span>
            <span class="n">Host</span> <span class="o">=&gt;</span> <span class="s">&#39;bay.csuhayward.edu&#39;</span><span class="p">,</span>
            <span class="n">BaseDN</span> <span class="o">=&gt;</span> <span class="s">&#39;ou=seas,o=csuh&#39;</span><span class="p">,</span>
            <span class="n">SSCOPE</span> <span class="o">=&gt;</span> <span class="s">&#39;sub&#39;</span><span class="p">,</span>
            <span class="n">UserDN</span> <span class="o">=&gt;</span> <span class="s">&#39;&#39;</span><span class="p">,</span>
            <span class="n">UserPw</span> <span class="o">=&gt;</span> <span class="s">&#39;&#39;</span><span class="p">,</span>
            <span class="n">AlwaysFilter</span> <span class="o">=&gt;</span> <span class="s">&#39;&#39;</span><span class="p">,</span>
            <span class="n">Die</span> <span class="o">=&gt;</span> <span class="mi">0</span><span class="p">,</span>
            <span class="n">Params</span> <span class="o">=&gt;</span> <span class="p">{</span>
                <span class="n">port</span>    <span class="o">=&gt;</span> <span class="mi">389</span><span class="p">,</span>
                <span class="n">timeout</span> <span class="o">=&gt;</span> <span class="mi">120</span><span class="p">,</span>
                <span class="n">async</span>   <span class="o">=&gt;</span> <span class="mi">0</span><span class="p">,</span>
                <span class="n">version</span> <span class="o">=&gt;</span> <span class="mi">3</span><span class="p">,</span>
            <span class="p">},</span>
        <span class="p">},</span>
        <span class="c1"># Other setting here.</span>
    <span class="p">};</span>
</pre></div>
</div>
<p>It is possible to integrate up to 10 different customer back ends. Use the <a class="reference internal" href="#"><span class="doc">Customer Users</span></a> screen to view or edit (assuming write access is enabled) all customer user data.</p>
</div>
<div class="section" id="customer-user-data-in-dynamic-fields">
<h2>Customer User Data in Dynamic Fields<a class="headerlink" href="#customer-user-data-in-dynamic-fields" title="Permalink to this headline">¶</a></h2>
<p>Sometimes it can be useful to also store customer user data directly in dynamic fields of a ticket, for example to create special statistics on this data.</p>
<p>The dynamic field values are set, when a ticket is created or when the customer user of a ticket is changed. The values of the dynamic fields are taken from the customer user data. This works for all back ends, but is especially useful for LDAP back ends.</p>
<p>To activate this optional feature:</p>
<ol class="arabic">
<li><p class="first">Activate the setting <code class="docutils literal notranslate"><span class="pre">Ticket::EventModulePost###4100-DynamicFieldFromCustomerUser</span></code>.</p>
</li>
<li><p class="first">Activate the setting <code class="docutils literal notranslate"><span class="pre">DynamicFieldFromCustomerUser::Mapping</span></code>. This setting contains the configuration of which customer user field entry should be stored in which ticket dynamic field.</p>
</li>
<li><p class="first">Create the dynamic fields, if the dynamic fields are not present in the system yet.</p>
</li>
<li><p class="first">Enable the dynamic fields in setting <code class="docutils literal notranslate"><span class="pre">Ticket::Frontend::AgentTicketFreeText###DynamicField</span></code>, so that they can be set manually.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>The dynamic field must not be enabled in the following settings:</p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">Ticket::Frontend::AgentTicketPhone###DynamicField</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">Ticket::Frontend::AgentTicketEmail###DynamicField</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">Ticket::Frontend::AgentTicketCustomer###DynamicField</span></code></li>
</ul>
<p class="last">If they were, they would have precedence over the automatically set values.</p>
</div>
</li>
</ol>
</div>
</div>


           </div>
           
          </div>
          

<script>
// Start Google Analytics Tracking
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');
ga('create', 'UA-28118796-2', 'auto');
ga('send', 'pageview');
// End Google Analytics Tracking
</script>

<footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="customer-users-customers.html" class="btn btn-neutral float-right" title="Customer Users ↔ Customers" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="customers-groups.html" class="btn btn-neutral" title="Customers ↔ Groups" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2001-2020 OTRS AG, https://otrs.com/

    </p>
  </div> 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../../_static/jquery.js"></script>
        <script type="text/javascript" src="../../_static/underscore.js"></script>
        <script type="text/javascript" src="../../_static/doctools.js"></script>
    

  

  <script type="text/javascript" src="../../_static/js/theme.js"></script>

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>